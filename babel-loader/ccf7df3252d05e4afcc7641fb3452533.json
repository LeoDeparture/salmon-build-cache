{"ast":null,"code":"import \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport Router from 'next/router';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { ContentP, DetailCommonP, FlexCenterColumn, FlexDisplay, FlexDisplayBetween, TextContent } from '../../../lib/commonCss';\nimport { breakLine } from '../../../lib/commonJs';\nexport var ContentDiv = styled.div.withConfig({\n  displayName: \"CourseInfo__ContentDiv\",\n  componentId: \"sc-1pu8pyc-0\"\n})([\"width:100%;padding:28px 32px;background-color:#fff;\"]);\nexport var RenderImgDiv = styled.div.withConfig({\n  displayName: \"CourseInfo__RenderImgDiv\",\n  componentId: \"sc-1pu8pyc-1\"\n})([\"position:relative;width:200px;height:104px;margin-right:12px;\"]);\nexport var RichTextDiv = styled.div.withConfig({\n  displayName: \"CourseInfo__RichTextDiv\",\n  componentId: \"sc-1pu8pyc-2\"\n})([\"width:100%;padding:16px;margin:0 0 12px 12px;background:rgba(0,0,0,0.05);border-radius:4px;& img{max-width:100%;}\"]);\nexport var Image = styled.img.withConfig({\n  displayName: \"CourseInfo__Image\",\n  componentId: \"sc-1pu8pyc-3\"\n})([\"width:200px;height:104px;object-fit:cover;\"]);\nvar TitleDiv = styled.h4.withConfig({\n  displayName: \"CourseInfo__TitleDiv\",\n  componentId: \"sc-1pu8pyc-4\"\n})([\"margin:0 12px 0 0;font-size:20px;word-break:break-all;\"]);\n\nvar CourseInfo =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CourseInfo, _React$Component);\n\n  function CourseInfo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CourseInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CourseInfo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isActive: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEdit\", function () {\n      _this.props.changeState('editing', true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function () {\n      var isActive = _this.state.isActive;\n\n      _this.setState({\n        isActive: !isActive\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"jumpTo\", function () {\n      var router = Router.router.asPath;\n\n      if (router.indexOf('edit') > 0) {\n        Router.back();\n        return;\n      }\n\n      _this.props.changeState('editing', false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStatus\", function (statusName) {\n      return _this.props.mutationHandler(_this.props.courseData.id, statusName).then(function () {\n        _message.success(\"\".concat(statusName, \"\\u6B64\").concat(_this.props.courseTypeName, \"\\u6210\\u529F\"));\n\n        if (statusName === '移除') {\n          var url = _this.props.courseTypeName === '1对1辅导' ? '/private-course-management' : '/group-course-management';\n          Router.push(url); // this.jumpTo();\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderModal\", function (statusName) {\n      var courseTypeName = _this.props.courseTypeName;\n      var props = {\n        cancelText: '取消',\n        centered: true,\n        iconType: statusName === '移除' ? 'delete' : 'exclamation-circle',\n        okText: \"\\u786E\\u8BA4\".concat(statusName),\n        okType: statusName === '移除' ? 'danger' : 'primary',\n        title: \"\\u786E\\u8BA4\\u8981\".concat(statusName, \"\\u6B64\").concat(courseTypeName, \"\\u5417\\uFF1F\"),\n        onOk: _this.handleStatus.bind(_assertThisInitialized(_this), statusName),\n        content: ''\n      };\n\n      if (statusName === '下线') {\n        props.content = React.createElement(\"div\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, React.createElement(\"p\", null, \"\\u4E0B\\u7EBF\\u6B64\", courseTypeName, \"\\u540E\\uFF1A\"), React.createElement(\"ol\", null, React.createElement(\"li\", null, \"\\u672A\\u9884\\u7EA6\\u7684\\u7528\\u6237\\u5C06\\u65E0\\u6CD5\\u770B\\u5F85\\u8BE5\", courseTypeName, \"\\u5E76\\u9884\\u7EA6\\uFF1B\"), React.createElement(\"li\", null, \"\\u5DF2\\u9884\\u7EA6\\u6210\\u529F\\u7684\\u7528\\u6237\\u9700\\u8981\\u7EE7\\u7EED\\u5B8C\\u6210\\u5C65\\u7EA6\\uFF1B\"), React.createElement(\"li\", null, \"MIS \\u7CFB\\u7EDF\\u5185\\u53EF\\u4EE5\\u88AB\\u770B\\u5230\\uFF0C\\u4F46\\u65E0\\u6CD5\\u88AB\\u5E94\\u7528\\u5230\\u4E1A\\u52A1\\uFF1B\"), React.createElement(\"li\", null, \"\\u4E0B\\u7EBF\\u540E\\u7684\", courseTypeName, \"\\u53EF\\u4EE5\\u91CD\\u65B0\\u4E0A\\u7EBF\\u3002\")));\n      } else if (statusName === '移除') {\n        props.content = React.createElement(\"div\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, React.createElement(\"p\", null, \"\\u79FB\\u9664\\u6B64\", courseTypeName, \"\\u540E\\uFF1A\"), React.createElement(\"ol\", null, React.createElement(\"li\", null, \"\\u672A\\u9884\\u7EA6\\u7684\\u7528\\u6237\\u5C06\\u65E0\\u6CD5\\u770B\\u5F85\\u8BE5\", courseTypeName, \"\\u5E76\\u9884\\u7EA6\\uFF1B\"), React.createElement(\"li\", null, \"\\u5DF2\\u9884\\u7EA6\\u6210\\u529F\\u7684\\u7528\\u6237\\u9700\\u8981\\u7EE7\\u7EED\\u5B8C\\u6210\\u5C65\\u7EA6\\uFF1B\"), React.createElement(\"li\", null, \"MIS \\u7CFB\\u7EDF\\u5185\\u7528\\u6237\\u65E0\\u6CD5\\u67E5\\u770B\\u5230\\u8BE5\", courseTypeName, \"\\uFF1B\"), React.createElement(\"li\", null, \"\\u79FB\\u9664\\u540E\\u7684\", courseTypeName, \"\\u65E0\\u6CD5\\u518D\\u6B21\\u4E0A\\u7EBF\\u3002\")));\n      }\n\n      _Modal.confirm(props);\n    });\n\n    return _this;\n  }\n\n  _createClass(CourseInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.isCollapse) {\n        this.setState({\n          isActive: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$courseDat = this.props.courseData,\n          name = _this$props$courseDat.name,\n          courseCategory = _this$props$courseDat.courseCategory,\n          industry = _this$props$courseDat.industry,\n          status = _this$props$courseDat.status,\n          banner = _this$props$courseDat.banner,\n          introduction = _this$props$courseDat.introduction,\n          tutorIntroduction = _this$props$courseDat.tutorIntroduction,\n          duration = _this$props$courseDat.duration,\n          autoForm = _this$props$courseDat.autoForm,\n          remarks = _this$props$courseDat.remarks;\n      var isCollapse = this.props.isCollapse;\n      var isActive = this.state.isActive;\n      var bannerUrl = banner ? banner : '../../../static/default_banner.png';\n      var badgeStatus = status.name === '已上线' ? 'success' : status.name === '未上线' ? 'warning' : 'default';\n      var buttonStatus = status.name === '已上线' ? '下线' : '上线';\n      var form = autoForm ? breakLine(autoForm.rawInput) : '';\n\n      var getCourseCategoryNameString = function getCourseCategoryNameString(category) {\n        var current = category;\n        var courseCategoriesArr = [];\n\n        while (current && current.name) {\n          courseCategoriesArr.push(current.name);\n          current = current.parent;\n        }\n\n        courseCategoriesArr.reverse();\n        return courseCategoriesArr.join(' / ');\n      };\n\n      return React.createElement(ContentDiv, null, React.createElement(FlexDisplay, null, React.createElement(RenderImgDiv, null, React.createElement(Image, {\n        src: bannerUrl\n      })), React.createElement(FlexCenterColumn, null, React.createElement(FlexDisplayBetween, null, React.createElement(FlexDisplay, null, React.createElement(TitleDiv, null, name), React.createElement(FlexDisplay, {\n        style: {\n          margin: '5px 12px 0 0',\n          whiteSpace: 'nowrap'\n        }\n      }, React.createElement(_Badge, {\n        status: badgeStatus\n      }), React.createElement(\"span\", {\n        style: {\n          fontSize: '14px'\n        }\n      }, status.name))), React.createElement(FlexDisplay, null, React.createElement(_Button, {\n        type: \"default\",\n        onClick: this.handleEdit\n      }, \"\\u7F16\\u8F91\"), React.createElement(_Button, {\n        type: \"default\",\n        onClick: this.renderModal.bind(this, buttonStatus),\n        style: {\n          margin: '0 12px'\n        }\n      }, buttonStatus), React.createElement(_Button, {\n        type: \"danger\",\n        onClick: this.renderModal.bind(this, '移除')\n      }, \"\\u79FB\\u9664\"))), React.createElement(FlexDisplay, null, React.createElement(FlexDisplay, {\n        style: {\n          marginRight: '30px'\n        }\n      }, React.createElement(DetailCommonP, null, \"\\u6240\\u5C5E\\u884C\\u4E1A\\uFF1A\"), React.createElement(ContentP, null, industry.name)), React.createElement(FlexDisplay, null, React.createElement(DetailCommonP, null, \"\\u6240\\u5C5E\\u5206\\u7C7B\\uFF1A\"), ' ', React.createElement(ContentP, null, getCourseCategoryNameString(courseCategory)))), React.createElement(FlexDisplay, null, React.createElement(DetailCommonP, null, \"\\u5BF9\\u5185\\u5907\\u6CE8\\uFF1A\"), React.createElement(ContentP, null, breakLine(remarks))))), isActive && React.createElement(_Row, {\n        style: {\n          marginTop: '40px'\n        }\n      }, React.createElement(_Col, {\n        lg: 24\n      }, React.createElement(_Col, {\n        style: {\n          display: 'flex'\n        }\n      }, React.createElement(DetailCommonP, {\n        style: styles\n      }, \"\\u9884\\u8BA1\\u6388\\u8BFE\\u65F6\\u957F\\uFF1A\"), React.createElement(TextContent, null, duration, \"\\u5206\\u949F\"))), React.createElement(_Col, {\n        lg: 24\n      }, React.createElement(_Col, {\n        style: {\n          display: 'flex'\n        }\n      }, React.createElement(DetailCommonP, {\n        style: styles\n      }, \"\\u9884\\u7EA6\\u8868\\u5355\\uFF1A\"), React.createElement(TextContent, null, form))), React.createElement(_Col, {\n        lg: 24\n      }, React.createElement(_Col, {\n        style: {\n          display: 'flex'\n        }\n      }, React.createElement(DetailCommonP, {\n        style: styles\n      }, \"\\u8BE6\\u7EC6\\u4ECB\\u7ECD\\uFF1A\"), React.createElement(RichTextDiv, {\n        dangerouslySetInnerHTML: {\n          __html: introduction\n        }\n      }))), this.props.courseTypeName === '小班课' && React.createElement(_Col, {\n        lg: 24\n      }, React.createElement(_Col, {\n        style: {\n          display: 'flex'\n        }\n      }, React.createElement(DetailCommonP, {\n        style: styles\n      }, \"\\u9002\\u5408\\u4EBA\\u7FA4\\uFF1A\"), React.createElement(RichTextDiv, {\n        dangerouslySetInnerHTML: {\n          __html: this.props.courseData.suitedPeople\n        }\n      }))), React.createElement(_Col, {\n        lg: 24\n      }, React.createElement(_Col, {\n        style: {\n          display: 'flex'\n        }\n      }, React.createElement(DetailCommonP, {\n        style: styles\n      }, \"\\u5BFC\\u5E08\\u56E2\\u961F\\u4ECB\\u7ECD\\uFF1A\"), React.createElement(RichTextDiv, {\n        dangerouslySetInnerHTML: {\n          __html: tutorIntroduction\n        }\n      })))), isCollapse && React.createElement(WrapCollapse, null, React.createElement(CollapseText, {\n        onClick: this.onChange\n      }, isActive ? '收起更多信息' : '展开更多信息'), React.createElement(_Icon, {\n        type: \"down\",\n        style: {\n          lineHeight: '25px'\n        },\n        rotate: isActive ? 180 : 0\n      })));\n    }\n  }]);\n\n  return CourseInfo;\n}(React.Component);\n\nexport default CourseInfo;\nvar WrapCollapse = styled(FlexDisplay).withConfig({\n  displayName: \"CourseInfo__WrapCollapse\",\n  componentId: \"sc-1pu8pyc-5\"\n})([\"justify-content:center;padding-top:10px;color:#82a3fc;\"]);\nvar CollapseText = styled.p.withConfig({\n  displayName: \"CourseInfo__CollapseText\",\n  componentId: \"sc-1pu8pyc-6\"\n})([\"margin:0;font-size:14px;color:#82a3fc;cursor:pointer;\"]);\nvar styles = {\n  width: '10%'\n};","map":null,"metadata":{},"sourceType":"module"}