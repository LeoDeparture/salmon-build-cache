{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport Router from 'next/router';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { handleConfirmOtherError } from '../../../lib/handleError';\nvar FormItem = _Form.Item;\nvar Option = _Select.Option;\nvar MentionP = styled.p.withConfig({\n  displayName: \"AddTutorComponent__MentionP\",\n  componentId: \"sc-1upim6h-0\"\n})([\"margin-top:88px;font-size:15px;color:#9b9b9b;\"]);\n\nvar RegistrationForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RegistrationForm, _React$Component);\n\n  function RegistrationForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RegistrationForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RegistrationForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      countryPhoneCode: '+86',\n      loading: false,\n      inputValue: '',\n      nickNameInputValue: '',\n      phoneNumber: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFieldsAndScroll(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(err, fieldsValue) {\n          var prefix, re, tel;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!err) {\n                    prefix = fieldsValue.prefix;\n                    re = /\\D*/;\n                    tel = prefix.label.split(re).join('');\n\n                    _this.setState({\n                      loading: true\n                    });\n\n                    fieldsValue.phoneNumber = \"\".concat(tel, \"-\").concat(fieldsValue.phoneNumber);\n                    delete fieldsValue.prefix;\n\n                    _this.props.createTutorMutations(fieldsValue).then(function (result) {\n                      if (result.data.createTutor) {\n                        _this.jumpBack();\n\n                        _message.success('添加成功');\n\n                        return;\n                      }\n                    }).catch(function (error) {\n                      if (handleConfirmOtherError(error)) {\n                        _message.error('添加失败');\n                      }\n\n                      _this.setState({\n                        loading: false\n                      });\n                    });\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"jumpBack\", function () {\n      Router.push('/search-tutor');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderOption\", function () {\n      var allCountry = JSON.parse(localStorage.getItem('zhiwen_all_country'));\n\n      if (allCountry.length) {\n        return allCountry.map(function (item) {\n          return React.createElement(Option, {\n            key: item.id,\n            value: \"\".concat(item.name)\n          }, \"+\".concat(item.countryTelCode, \" \").concat(item.name));\n        });\n      }\n\n      return [];\n    });\n\n    return _this;\n  }\n\n  _createClass(RegistrationForm, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var prefixSelector = getFieldDecorator('prefix', {\n        initialValue: {\n          key: '中国',\n          label: '+86 中国'\n        }\n      })(React.createElement(_Select, {\n        showSearch: true,\n        labelInValue: true,\n        style: {\n          width: 135\n        }\n      }, this.renderOption()));\n      return React.createElement(_Form, {\n        onSubmit: this.handleSubmit,\n        style: {\n          width: '100%',\n          backgroundColor: '#fff'\n        }\n      }, React.createElement(_Row, null, React.createElement(FormItem, {\n        style: {\n          width: '40%'\n        },\n        label: \"\\u59D3\\u540D\",\n        colon: false\n      }, getFieldDecorator('name', {\n        rules: [{\n          message: '字段不可为空',\n          required: true\n        }]\n      })(React.createElement(_Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BFC\\u5E08\\u7684\\u771F\\u5B9E\\u59D3\\u540D\"\n      }))), React.createElement(FormItem, {\n        style: {\n          width: '40%'\n        },\n        label: \"\\u6635\\u79F0\",\n        colon: false\n      }, getFieldDecorator('nickname', {\n        rules: [{\n          message: '字段不可为空',\n          required: true\n        }]\n      })(React.createElement(_Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BFC\\u5E08\\u7684\\u6635\\u79F0\"\n      }))), React.createElement(FormItem, {\n        style: {\n          width: '40%'\n        },\n        label: \"\\u624B\\u673A\\u53F7\",\n        colon: false\n      }, getFieldDecorator('phoneNumber', {\n        rules: [{\n          message: '此字段无法为空',\n          required: true,\n          whitespace: true\n        }, {\n          message: '请输入6-11位数字的手机号码',\n          pattern: /^[0-9]{6,11}$/\n        }]\n      })(React.createElement(_Input, {\n        addonBefore: prefixSelector,\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BFC\\u5E08\\u7684\\u624B\\u673A\\u53F7\"\n      })))), React.createElement(FormItem, {\n        labelCol: {\n          span: 12\n        },\n        colon: false\n      }, React.createElement(MentionP, null, \"\\u53CB\\u60C5\\u63D0\\u793A\\uFF1A\\u5982\\u9700\\u8F93\\u5165\\u66F4\\u591A\\u4FE1\\u606F\\uFF0C\\u8BF7\\u6DFB\\u52A0\\u5BFC\\u5E08\\u540E\\uFF0C\\u5728\\u5BFC\\u5E08\\u8BE6\\u60C5\\u9875\\u64CD\\u4F5C\"), React.createElement(_Button, {\n        style: {\n          marginRight: 10,\n          fontSize: 15\n        },\n        onClick: this.jumpBack\n      }, \"\\u53D6 \\u6D88\"), React.createElement(_Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        disabled: this.state.loading,\n        loading: this.state.loading\n      }, \"\\u786E\\u8BA4\\u6DFB\\u52A0\")));\n    }\n  }]);\n\n  return RegistrationForm;\n}(React.Component);\n\nvar WrappedRegistrationForm = _Form.create()(RegistrationForm);\n\nexport default WrappedRegistrationForm;","map":null,"metadata":{},"sourceType":"module"}