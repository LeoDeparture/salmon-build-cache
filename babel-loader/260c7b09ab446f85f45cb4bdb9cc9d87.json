{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport Router from 'next/router';\nimport React, { Component } from 'react';\nimport TextArea from 'antd/lib/input/TextArea';\nimport LimitedInput from '../../../../../components/Input/LimitedInput';\nimport NumberInput from '../../../../../components/Input/NumberInput';\nimport { NoEmptyInputRule, NoEmptyOtherRule, RequiredPositiveIntegerRule } from '../../../../../lib/commonRule';\nimport CatalogSelector from '../../../components/CatalogSelector';\nimport { formStyle, LabelDescription, LabelWrapper } from '../../../components/CSSComponents';\nimport BlockHeader from '../BlockHeader';\n\nvar EditBasicInfo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditBasicInfo, _Component);\n\n  function EditBasicInfo(props) {\n    var _this;\n\n    _classCallCheck(this, EditBasicInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditBasicInfo).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickSave\", function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var _this$props = _this.props,\n              updatePlan = _this$props.updatePlan,\n              switchEdit = _this$props.switchEdit;\n\n          _this.setState({\n            loading: true\n          });\n\n          updatePlan(_objectSpread({}, values, {\n            id: Router.query.id\n          })).then(function () {\n            _message.success('已保存');\n\n            switchEdit();\n          }).finally(function () {\n            _this.setState({\n              loading: false\n            });\n          });\n        }\n      });\n    });\n\n    _this.state = {\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(EditBasicInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props$servicePl = this.props.servicePlan,\n          name = _this$props$servicePl.name,\n          innerRemarks = _this$props$servicePl.innerRemarks,\n          servicePeriod = _this$props$servicePl.servicePeriod,\n          serviceCatalog = _this$props$servicePl.serviceCatalog,\n          industry = _this$props$servicePl.industry;\n      var data = {\n        name: name,\n        innerRemarks: innerRemarks,\n        servicePeriod: servicePeriod,\n        serviceCatalogId: serviceCatalog && serviceCatalog.id,\n        industryId: industry && industry.id\n      };\n      this.props.form.setFieldsValue(data);\n    } // 点击保存\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var _this$props2 = this.props,\n          servicePlan = _this$props2.servicePlan,\n          switchEdit = _this$props2.switchEdit;\n      return React.createElement(React.Fragment, null, React.createElement(BlockHeader, {\n        title: \"\\u57FA\\u672C\\u4FE1\\u606F\",\n        showBtn: false\n      }), React.createElement(_Form, {\n        style: formStyle\n      }, React.createElement(_Row, {\n        gutter: 24\n      }, React.createElement(_Col, {\n        span: 12\n      }, React.createElement(_Form.Item, {\n        label: \"\\u65B9\\u6848\\u540D\\u79F0\",\n        colon: false\n      }, getFieldDecorator('name', {\n        rules: NoEmptyInputRule\n      })(React.createElement(LimitedInput, {\n        limit: 32,\n        placeholder: \"\\u8BF7\\u8F93\\u5165\"\n      }))), React.createElement(_Form.Item, {\n        label: \"\\u6240\\u5C5E\\u76EE\\u5F55\",\n        colon: false\n      }, getFieldDecorator('serviceCatalogId', {\n        rules: NoEmptyOtherRule\n      })(React.createElement(CatalogSelector, null))), React.createElement(_Form.Item, {\n        colon: false,\n        label: React.createElement(LabelWrapper, null, React.createElement(\"label\", null, \"\\u5BF9\\u5185\\u5907\\u6CE8\"), React.createElement(LabelDescription, null, \"\\u4EC5\\u5BF9\\u5185\\u53EF\\u89C1\"))\n      }, getFieldDecorator('innerRemarks')(React.createElement(TextArea, {\n        rows: 2,\n        placeholder: \"\\u8BF7\\u8F93\\u5165\"\n      })))), React.createElement(_Col, {\n        span: 12\n      }, React.createElement(_Form.Item, {\n        colon: false,\n        label: \"\\u884C\\u4E1A\"\n      }, getFieldDecorator('industryId')(React.createElement(\"div\", null, servicePlan.industry.name))), React.createElement(_Form.Item, {\n        colon: false,\n        label: \"\\u670D\\u52A1\\u5468\\u671F\"\n      }, getFieldDecorator('servicePeriod', {\n        rules: RequiredPositiveIntegerRule\n      })(React.createElement(NumberInput, {\n        max: 48,\n        min: 1,\n        placeholder: \"\\u6B63\\u6574\\u6570\",\n        style: {\n          width: '85%',\n          marginRight: '8px'\n        }\n      })), React.createElement(\"span\", null, \"\\u4E2A\\u6708\")))), React.createElement(\"div\", null, React.createElement(_Button, {\n        onClick: switchEdit,\n        style: {\n          marginRight: 12\n        }\n      }, \"\\u53D6\\u6D88\"), React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.onClickSave,\n        loading: this.state.loading\n      }, \"\\u4FDD\\u5B58\"))));\n    }\n  }]);\n\n  return EditBasicInfo;\n}(Component);\n\nvar EditBasicInfoForm = _Form.create()(EditBasicInfo);\n\nexport default EditBasicInfoForm;","map":null,"metadata":{},"sourceType":"module"}