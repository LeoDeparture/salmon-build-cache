{"ast":null,"code":"import \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport Router from 'next/router';\nimport React from 'react';\nimport AgreementDetails from '../components/AgreementDetails';\nimport QueryGetAgreementByNo, { query } from './QueryGetAgreementByNo';\nimport { cancelAgreementMutation, resendAgreementMutation, reviewAgreementMutation } from '../../agreementManagement/containers/AgreementMutations';\n\nvar AgreementDetailsContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AgreementDetailsContainer, _React$Component);\n\n  function AgreementDetailsContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AgreementDetailsContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AgreementDetailsContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"reviewAgreement\", function (agreementNo) {\n      return _this.client.mutate({\n        mutation: reviewAgreementMutation,\n        variables: {\n          input: {\n            agreementNo: agreementNo\n          }\n        },\n        update: function update(store, _ref) {\n          var reviewAgreement = _ref.data.reviewAgreement;\n\n          _message.success('已成功通过审核并发送协议');\n\n          store.writeQuery({\n            query: query,\n            variables: {\n              input: {\n                agreementNo: agreementNo\n              }\n            },\n            data: {\n              GetAgreementByNo: {\n                status: reviewAgreement.status\n              }\n            }\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resendAgreement\", function (agreementNo) {\n      return _this.client.mutate({\n        mutation: resendAgreementMutation,\n        variables: {\n          input: {\n            agreementNo: agreementNo\n          }\n        },\n        update: function update() {\n          _message.success('已重新发送协议');\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"cancelAgreement\", function (agreementNo) {\n      return _this.client.mutate({\n        mutation: cancelAgreementMutation,\n        variables: {\n          input: {\n            agreementNo: agreementNo\n          }\n        },\n        // tslint:disable-next-line:no-identical-functions\n        update: function update(store, _ref2) {\n          var reviewAgreement = _ref2.data.reviewAgreement;\n\n          _message.success('已成功撤销此协议'); // Read the data from our cache for this query.\n\n\n          store.writeQuery({\n            query: query,\n            variables: {\n              input: {\n                agreementNo: agreementNo\n              }\n            },\n            data: {\n              GetAgreementByNo: {\n                status: reviewAgreement.status\n              }\n            }\n          });\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(AgreementDetailsContainer, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(QueryGetAgreementByNo, {\n        query: query,\n        variables: {\n          input: {\n            agreementNo: Router.query.agreementNo\n          }\n        }\n      }, function (_ref3) {\n        var data = _ref3.data,\n            loading = _ref3.loading,\n            error = _ref3.error,\n            client = _ref3.client;\n\n        if (loading) {\n          return null;\n        }\n\n        if (error) {\n          return null;\n        }\n\n        _this2.client = client;\n\n        if (!data || !data.getAgreementByNo) {\n          return null;\n        }\n\n        return React.createElement(AgreementDetails, {\n          data: data.getAgreementByNo,\n          reviewAgreement: _this2.reviewAgreement,\n          resendAgreement: _this2.resendAgreement,\n          cancelAgreement: _this2.cancelAgreement\n        });\n      });\n    }\n  }]);\n\n  return AgreementDetailsContainer;\n}(React.Component);\n\nexport default AgreementDetailsContainer;","map":null,"metadata":{},"sourceType":"module"}