{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport ResetPasswordEmailSuccess from './ResetPasswordEmailSuccess';\nvar ContentDiv = styled.div.withConfig({\n  displayName: \"ResetPasswordEmailContent__ContentDiv\",\n  componentId: \"sc-1dcjxg1-0\"\n})([\"display:flex;align-items:center;flex-direction:column;justify-content:center;width:50%;height:100vh;margin:0 auto;\"]);\nvar FormItem = _Form.Item;\n\nvar RegistrationForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RegistrationForm, _React$Component);\n\n  function RegistrationForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RegistrationForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RegistrationForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      disabled: true,\n      firstConfirm: true,\n      secondConfirm: false,\n      timeOut: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeState\", function (stateName, stateValue) {\n      _this.setState(_defineProperty({}, stateName, stateValue));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFieldsAndScroll(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(err, fieldsValue) {\n          var result;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!err) {\n                    _context.next = 4;\n                    break;\n                  }\n\n                  _this.setState({\n                    disabled: true\n                  });\n\n                  _context.next = 15;\n                  break;\n\n                case 4:\n                  _this.setState({\n                    disabled: false\n                  });\n\n                  _context.prev = 5;\n                  _context.next = 8;\n                  return _this.props.resetPassword(fieldsValue.password);\n\n                case 8:\n                  result = _context.sent;\n\n                  if (result.data.resetPassword) {\n                    _this.setState({\n                      firstConfirm: false,\n                      secondConfirm: true\n                    });\n                  }\n\n                  _context.next = 15;\n                  break;\n\n                case 12:\n                  _context.prev = 12;\n                  _context.t0 = _context[\"catch\"](5);\n\n                  if (_context.t0.message === 'GraphQL error: PasswordStrengthError: Password is too weak') {\n                    _this.setState({\n                      disabled: true\n                    });\n                  }\n\n                case 15:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[5, 12]]);\n        }));\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function () {\n      window.setTimeout(function () {\n        var values = _this.props.form.getFieldsValue();\n\n        var filled = true;\n\n        _Object$keys(values).forEach(function (key) {\n          filled = filled && values[key];\n        });\n\n        _this.setState({\n          disabled: !filled\n        });\n      }, 100);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFun\", function () {\n      if (_this.state.firstConfirm) {\n        var getFieldDecorator = _this.props.form.getFieldDecorator;\n        return React.createElement(_Form, {\n          onSubmit: _this.handleSubmit,\n          style: {\n            width: '100%',\n            backgroundColor: '#fff'\n          }\n        }, React.createElement(ContentDiv, null, React.createElement(_Row, null, React.createElement(\"h3\", {\n          style: {\n            textAlign: 'center',\n            marginBottom: 50\n          }\n        }, \"\\u60A8\\u7684\\u5BC6\\u7801\\u5DF2\\u88AB\\u91CD\\u7F6E\\uFF0C\\u8BF7\\u8BBE\\u7F6E\\u4E00\\u4E2A\\u65B0\\u5BC6\\u7801\"), React.createElement(FormItem, {\n          style: {\n            width: 350\n          },\n          label: \"\\u65B0\\u5BC6\\u7801\"\n        }, getFieldDecorator('password', {\n          rules: [{\n            message: '此字段无法为空',\n            required: true,\n            whitespace: true\n          }, {\n            message: '请输入不少于8位字符的密码',\n            pattern: /^.{8,}$/\n          }]\n        })(React.createElement(_Input, {\n          type: \"password\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u4E0D\\u5C11\\u4E8E8\\u4F4D\\u5B57\\u7B26\\u7684\\u5BC6\\u7801\",\n          onChange: _this.handleChange\n        })))), React.createElement(FormItem, {\n          labelCol: {\n            span: 12\n          }\n        }, React.createElement(_Button, {\n          style: {\n            marginLeft: 20,\n            marginTop: 10\n          },\n          type: \"primary\",\n          htmlType: \"submit\",\n          disabled: _this.state.disabled\n        }, \"\\u786E\\u8BA4\\u66F4\\u6362\\u5BC6\\u7801\"))));\n      }\n\n      if (_this.state.secondConfirm) {\n        return React.createElement(ResetPasswordEmailSuccess, null);\n      }\n\n      return null;\n    });\n\n    return _this;\n  }\n\n  _createClass(RegistrationForm, [{\n    key: \"render\",\n    value: function render() {\n      return this.renderFun();\n    }\n  }]);\n\n  return RegistrationForm;\n}(React.Component);\n\nvar WrappedRegistrationForm = _Form.create()(RegistrationForm);\n\nexport default WrappedRegistrationForm;","map":null,"metadata":{},"sourceType":"module"}