{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/dropdown/style\";\nimport _Dropdown from \"antd/lib/dropdown\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport { FlexContent } from '../../../lib/commonCss';\nimport { KeyFlexContentCenterL } from './TemplateModal';\n/**\n *\n * backgroundColor: string; // title 文本的 backgroundColor\n * color: string; // title 文本的 color\n * text: string; // title 文本\n * hasLeftBut: boolean; // 是否有左边返回按钮\n * hasRightBut: boolean; // 是否有右侧按钮\n * rightBut: [{ type: string; name: string; color: string; fun: string }]; // 右侧按钮的数组 type: normal | dropdown; name: 按钮文本； color: 按钮颜色；fun：执行的方法名称 字符串\n *\n */\n\nvar TemplateTitle =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TemplateTitle, _React$Component);\n\n  function TemplateTitle() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TemplateTitle);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TemplateTitle)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"renderDropdown\", function (item, key) {\n      var dropdownData = ['接受并变更预约时间', '改派至其他AM', '取消此预约日程'];\n      return React.createElement(KeyFlexContentCenterL, {\n        key: key,\n        color: item.color,\n        isSec: key >= 1\n      }, React.createElement(_Dropdown, {\n        overlay: React.createElement(_Menu, null, dropdownData.map(function (i, v) {\n          return React.createElement(_Menu.Item, {\n            key: v,\n            onClick: _this.changeModalContent.bind(_assertThisInitialized(_this), i, v + 1)\n          }, i);\n        }))\n      }, React.createElement(\"a\", {\n        className: \"ant-dropdown-link\",\n        style: {\n          alignItems: 'center',\n          display: 'flex',\n          fontSize: '14px'\n        },\n        href: \"javascript:;\"\n      }, \"\\u66F4\\u591A\\u64CD\\u4F5C \", React.createElement(_Icon, {\n        style: {\n          fontSize: '16px'\n        },\n        type: \"down\"\n      }))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBack\", function () {\n      _this.props.toSetState({\n        step: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getResult\", function (result, mutationName, text) {\n      var _this$props = _this.props,\n          itemData = _this$props.itemData,\n          UpdateAfterCloseModal = _this$props.UpdateAfterCloseModal,\n          getSlotsDetails = _this$props.getSlotsDetails,\n          toSetState = _this$props.toSetState;\n\n      if (result.data) {\n        toSetState({\n          step: 0\n        });\n        UpdateAfterCloseModal();\n        getSlotsDetails(itemData.id, mutationName, false);\n      }\n\n      _message.destroy();\n\n      _message.success(\"\\u5DF2\\u6210\\u529F\".concat(text));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeModalContent\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(key, index) {\n        var _this$props2, modalMutation, itemData, toSetState;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props2 = _this.props, modalMutation = _this$props2.modalMutation, itemData = _this$props2.itemData, toSetState = _this$props2.toSetState; // 当 已履约 - 待制定学习计划 (点击已履约) 或者 已接受 - 待履约 时点击右侧按钮 (点击已履约) 或者点击删除按钮\n\n                if (key === '删除' || key === '已履约') {\n                  toSetState({\n                    step: 1\n                  });\n                }\n\n                if (key === '接受并变更预约时间' || key === '改派至其他AM' || key === '取消此预约日程') {\n                  toSetState({\n                    step: index\n                  });\n                }\n\n                if (!(key === '接受')) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _message.destroy();\n\n                _message.loading('加载中...');\n\n                _context.next = 8;\n                return modalMutation('ConfirmStudentOperatorReservation', {\n                  id: itemData.id\n                }).then(function (result) {\n                  _this.getResult(result, 'acceptedUnPerformance', '接受预约');\n                });\n\n              case 8:\n                if (!(key === '公开')) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _message.destroy();\n\n                _message.loading('加载中...');\n\n                _context.next = 13;\n                return modalMutation('PublishOperatorSlot', {\n                  id: itemData.id\n                }).then(function (result) {\n                  _this.getResult(result, 'publiclyAvailable', '公开预约日程');\n                });\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  _createClass(TemplateTitle, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          itemData = _this$props3.itemData,\n          backgroundColor = _this$props3.backgroundColor,\n          color = _this$props3.color,\n          text = _this$props3.text,\n          hasLeftBut = _this$props3.hasLeftBut,\n          hasRightBut = _this$props3.hasRightBut,\n          rightBut = _this$props3.rightBut;\n      return React.createElement(ModalFlexContent, null, React.createElement(FlexContent, null, hasLeftBut && React.createElement(_Icon, {\n        style: {\n          cursor: 'pointer',\n          fontSize: 22,\n          marginRight: 8,\n          paddingTop: 8\n        },\n        onClick: this.onBack,\n        type: \"arrow-left\"\n      }), React.createElement(ModalTitle, {\n        style: {\n          backgroundColor: backgroundColor,\n          color: color\n        }\n      }, text)), React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        }\n      }, hasRightBut && rightBut.map(function (item, key) {\n        if (item.type === 'dropdown') {\n          return _this2.renderDropdown(item, key);\n        }\n\n        return React.createElement(KeyFlexContentCenterL, {\n          key: key,\n          onClick: _this2[item.fun].bind(_this2, item.name, itemData),\n          color: item.color,\n          isSec: key >= 1\n        }, item.name);\n      })), React.createElement(TopBottomBorder, null));\n    }\n  }]);\n\n  return TemplateTitle;\n}(React.Component);\n\n_defineProperty(TemplateTitle, \"defaultProps\", {\n  hasLeftBut: false,\n  hasRightBut: false,\n  rightBut: []\n});\n\nexport default TemplateTitle;\nvar ModalFlexContent = styled(FlexContent).withConfig({\n  displayName: \"TemplateTitle__ModalFlexContent\",\n  componentId: \"sc-1tykyul-0\"\n})([\"align-items:center;justify-content:space-between;margin-top:-14px;margin-bottom:35px;\"]);\nvar ModalTitle = styled.span.withConfig({\n  displayName: \"TemplateTitle__ModalTitle\",\n  componentId: \"sc-1tykyul-1\"\n})([\"display:block;padding:7px 11px;font-size:16px;border-radius:4%;\"]);\nvar TopBottomBorder = styled.div.withConfig({\n  displayName: \"TemplateTitle__TopBottomBorder\",\n  componentId: \"sc-1tykyul-2\"\n})([\"position:absolute;top:55px;left:0;width:100%;height:1px;background:#e8e8e8;\"]);","map":null,"metadata":{},"sourceType":"module"}