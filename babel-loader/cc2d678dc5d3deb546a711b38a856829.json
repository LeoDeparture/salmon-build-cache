{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { Random } from 'random-js';\nimport React, { Fragment } from 'react';\nimport styled from 'styled-components';\nvar random = new Random(); // uses the nativeMath engine\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  function Index(_props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"Item\", function (props) {\n      var required = props.required,\n          title = props.title,\n          uniq = props.uniq,\n          active = props.active,\n          type = props.type;\n      var Wrapper = active ? ActiveItemWrapper : ItemWrapper;\n      var isShowRequiredText = _this.props.isShowRequiredText;\n      return React.createElement(Wrapper, {\n        style: type === 'parent' ? ParentItemStyle : ChildItemStyle,\n        onClick: !required ? _this.onClickItem.bind(_assertThisInitialized(_this), uniq) : null\n      }, React.createElement(ItemText, null, title), required && isShowRequiredText && React.createElement(RequiredText, null, \"\\u5FC5\\u9009\"), React.createElement(_Icon, {\n        style: {\n          color: active ? '#172b4d' : '#e1e1e8',\n          fontSize: type === 'parent' ? '28px' : '20px'\n        },\n        type: \"check-circle\",\n        className: \"icon\"\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickItem\", function (uniq) {\n      var options = _this.state.options;\n      var newOptions = options.map(function (option) {\n        if (option.uniq === uniq) {\n          return _objectSpread({}, option, {\n            active: !option.active\n          });\n        }\n\n        if (option.children) {\n          var newChildren = option.children.map(function (child) {\n            if (child.uniq === uniq) {\n              return _objectSpread({}, child, {\n                active: !child.active\n              });\n            }\n\n            return child;\n          });\n          return _objectSpread({}, option, {\n            children: newChildren\n          });\n        }\n\n        return option;\n      });\n\n      _this.setState({\n        options: newOptions\n      }); // 每次更改时返回结果\n\n\n      _this.triggerOnChange(newOptions);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"triggerOnChange\", function (options) {\n      var result = options.filter(function (option) {\n        return option.active;\n      }).map(function (option) {\n        return _objectSpread({}, option, {\n          children: option.children.filter(function (child) {\n            return child.active;\n          })\n        });\n      });\n      var ids = result.length ? result[0].children.map(function (v) {\n        return v.value;\n      }) : [];\n\n      if (_this.props.onChange) {\n        _this.props.onChange(ids);\n      }\n    });\n\n    _this.state = {\n      options: []\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var options = this.props.options;\n      var handledOptions = options.map(function (option) {\n        var required = option.required;\n        return _objectSpread({}, option, {\n          uniq: random.uuid4(),\n          active: required,\n          children: option.children.map(function (child) {\n            return {\n              title: child.title,\n              required: child.required,\n              value: child.value,\n              uniq: random.uuid4(),\n              active: child.required\n            };\n          })\n        });\n      });\n      this.setState({\n        options: handledOptions\n      }); // 初始化时返回一次结果\n\n      this.triggerOnChange(handledOptions);\n    } // 单个条目\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var options = this.state.options;\n\n      if (!options.length) {\n        return null;\n      }\n\n      return React.createElement(\"div\", null, options.map(function (parent, i) {\n        return React.createElement(Fragment, {\n          key: i\n        }, React.createElement(_this2.Item, _extends({}, parent, {\n          type: \"parent\"\n        })), parent.active && parent.children.map(function (child, index) {\n          return React.createElement(_this2.Item, _extends({\n            key: index\n          }, child, {\n            type: \"child\"\n          }));\n        }));\n      }));\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\n_defineProperty(Index, \"defaultProps\", {\n  isShowRequiredText: true\n});\n\nexport default Index;\nvar ItemWrapper = styled.div.withConfig({\n  displayName: \"Accordion__ItemWrapper\",\n  componentId: \"sc-1u3e609-0\"\n})([\"display:flex;align-items:center;justify-content:space-between;padding:0 16px;margin-bottom:8px;color:#a2aab8;border:1px solid #e1e1e8;border-radius:4px;&:last-child{margin-bottom:0;}\"]);\nvar ActiveItemWrapper = styled(ItemWrapper).withConfig({\n  displayName: \"Accordion__ActiveItemWrapper\",\n  componentId: \"sc-1u3e609-1\"\n})([\"color:#172b4d;border-color:#172b4d;\"]);\nvar ParentItemStyle = {\n  width: '300px',\n  height: '52px',\n  fontSize: '16px',\n  lineHeight: '52px'\n};\nvar ChildItemStyle = {\n  width: '220px',\n  height: '36px',\n  fontSize: '12px',\n  lineHeight: '36px'\n};\nvar ItemText = styled.span.withConfig({\n  displayName: \"Accordion__ItemText\",\n  componentId: \"sc-1u3e609-2\"\n})([\"margin-right:12px;overflow:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap;\"]);\nvar RequiredText = styled.span.withConfig({\n  displayName: \"Accordion__RequiredText\",\n  componentId: \"sc-1u3e609-3\"\n})([\"flex:1;min-width:30px;margin-right:12px;font-size:12px;color:#a2aab8;\"]);","map":null,"metadata":{},"sourceType":"module"}