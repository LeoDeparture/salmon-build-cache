{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport numeral from 'numeral';\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Router from 'next/router';\nimport EmptyComponent from '../../../../components/Empty';\nimport ZhiWenSelect from '../../../../components/Select/ZhiWenSelect';\nimport CatalogSelector from '../../components/CatalogSelector';\nimport { MutationCreateServicePlanSnapshot } from '../containers/MutationCreateServicePlanSnapshot';\nimport { checkServicePlanValidQuery } from '../containers/QueryCheckServicePlanValid';\n\nvar CreateModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateModal, _Component);\n\n  function CreateModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CreateModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CreateModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      visible: false,\n      chooseId: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showModal\", function () {\n      _this.setState({\n        visible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCancel\", function () {\n      _this.setState({\n        visible: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeChooseID\", function (chooseId) {\n      _this.setState({\n        chooseId: chooseId\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clickOk\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var result, ServicePlanSnapshot;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_this.props.client) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.next = 3;\n              return _this.props.client.query({\n                query: checkServicePlanValidQuery,\n                variables: {\n                  id: _this.state.chooseId\n                },\n                fetchPolicy: 'network-only'\n              });\n\n            case 3:\n              result = _context.sent;\n\n              if (!result.data.checkServicePlanValid) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 7;\n              return _this.props.client.mutate({\n                mutation: MutationCreateServicePlanSnapshot,\n                variables: {\n                  id: _this.state.chooseId\n                }\n              });\n\n            case 7:\n              ServicePlanSnapshot = _context.sent;\n              localStorage.setItem('servicePlanSnapshotId', ServicePlanSnapshot.data.createServicePlanSnapshot.id);\n\n              _this.props.data.forEach(function (item) {\n                if (item.id === _this.state.chooseId) {\n                  localStorage.setItem('servicePlanSnapshot', _JSON$stringify(item));\n                }\n              });\n\n              Router.push('/service/create-ticket');\n              _context.next = 15;\n              break;\n\n            case 13:\n              _message.destroy();\n\n              _message.error('你选择的方案不存在或未上线');\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"changeIndustryIdValue\", function (value) {\n      _this.props.changeInput(value, 'industry');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeCatalogValue\", function (value) {\n      _this.props.changeInput(value, 'serviceCatalog');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderItem\", function () {\n      var data = _this.props.data;\n\n      if (data && data.length !== 0) {\n        return data.map(function (item) {\n          var id = item.id,\n              name = item.name,\n              industry = item.industry,\n              serviceCatalog = item.serviceCatalog,\n              relatedServiceTicketCount = item.relatedServiceTicketCount,\n              jobBusinessJobRecommendationServiceConfig = item.jobBusinessJobRecommendationServiceConfig,\n              basePrice = item.basePrice;\n\n          if (id === _this.state.chooseId) {\n            return React.createElement(ItemContainer, {\n              key: id,\n              style: {\n                borderColor: '#172b4d'\n              }\n            }, React.createElement(ItemTextContainer, null, React.createElement(ItemTitle, null, React.createElement(ItemTypeWords, null, name)), React.createElement(ItemTypeContainer, null, React.createElement(ItemTypeFixContainer, null, \"\\u884C\\u4E1A\\uFF1A\", React.createElement(ItemTypeWords, null, industry && industry.name)), React.createElement(ItemTypeFlexContainer, null, \"\\u6240\\u5C5E\\u76EE\\u5F55\\uFF1A\", React.createElement(ItemTypeWords, null, serviceCatalog && serviceCatalog.name))), React.createElement(ItemTypeContainer, null, React.createElement(ItemTypeFixContainer, null, \"\\u5DF2\\u5173\\u8054\\u670D\\u52A1\\u5355\\u6570\\uFF1A\", React.createElement(ItemTypeWords, null, relatedServiceTicketCount)), jobBusinessJobRecommendationServiceConfig && jobBusinessJobRecommendationServiceConfig.companyLevel && React.createElement(ItemTypeFlexContainer, null, \"\\u76EE\\u6807\\u516C\\u53F8\\u7B49\\u7EA7\\uFF1A\", React.createElement(ItemTypeWords, null, jobBusinessJobRecommendationServiceConfig.companyLevel.name)))), React.createElement(PriceContainer, null, React.createElement(PriceNumber, null, React.createElement(ItemTypeWords, null, numeral(basePrice / 100).format('0,0.00'))), React.createElement(PriceTitle, null, \"\\u57FA\\u7840\\u4EF7\\u683C\\uFF08CNY\\uFF09\")), React.createElement(ChooseContainer, null, React.createElement(ChooseBorder, {\n              style: {\n                borderColor: '#172b4d'\n              }\n            }, React.createElement(ChooseItem, {\n              style: {\n                background: '#172b4d'\n              }\n            }))));\n          }\n\n          return React.createElement(ItemContainer, {\n            key: id,\n            onClick: _this.changeChooseID.bind(_assertThisInitialized(_this), id)\n          }, React.createElement(ItemTextContainer, null, React.createElement(ItemTitle, null, name), React.createElement(ItemTypeContainer, null, React.createElement(ItemTypeFixContainer, null, \"\\u884C\\u4E1A\\uFF1A\", industry.name), React.createElement(ItemTypeFlexContainer, null, \"\\u6240\\u5C5E\\u76EE\\u5F55\\uFF1A\", serviceCatalog.name)), React.createElement(ItemTypeContainer, null, React.createElement(ItemTypeFixContainer, null, \"\\u5DF2\\u5173\\u8054\\u670D\\u52A1\\u5355\\u6570\\uFF1A\", relatedServiceTicketCount), jobBusinessJobRecommendationServiceConfig !== null && jobBusinessJobRecommendationServiceConfig.companyLevel && React.createElement(ItemTypeFlexContainer, null, \"\\u76EE\\u6807\\u516C\\u53F8\\u7B49\\u7EA7\\uFF1A\", jobBusinessJobRecommendationServiceConfig.companyLevel.name))), React.createElement(PriceContainer, null, React.createElement(PriceNumber, null, numeral(basePrice / 100).format('0,0.00')), React.createElement(PriceTitle, null, \"\\u57FA\\u7840\\u4EF7\\u683C\\uFF08CNY\\uFF09\")), React.createElement(ChooseContainer, null, React.createElement(ChooseBorder, null)));\n        });\n      }\n\n      return React.createElement(EmptyComponent, {\n        type: \"table-and-bottomline\"\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(CreateModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          visible = _this$state.visible,\n          chooseId = _this$state.chooseId;\n      return React.createElement(React.Fragment, null, React.createElement(\"style\", null, \"\\n            .ant-btn-primary {\\n              background-color: #172b4d;\\n              border-color: #172b4d;\\n            }\\n          \"), React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.showModal\n      }, \"\\u521B\\u5EFA\\u670D\\u52A1\\u5355\"), React.createElement(_Modal, {\n        width: 774,\n        visible: visible,\n        title: \"\\u8BF7\\u9009\\u62E9\\u54A8\\u8BE2\\u670D\\u52A1\\u65B9\\u6848\",\n        onCancel: this.handleCancel,\n        maskClosable: false,\n        closable: false,\n        cancelText: \"\\u53D6\\u6D88\",\n        okText: \"\\u786E\\u8BA4\\u9009\\u62E9\",\n        okButtonProps: {\n          disabled: !chooseId\n        },\n        onOk: this.clickOk,\n        bodyStyle: {\n          padding: 0\n        }\n      }, React.createElement(ModelContainer, null, React.createElement(InputContainer, null, React.createElement(StyledSelect, {\n        type: \"zhiwen-profession\",\n        allowClear: true,\n        placeholder: \"\\u4E0D\\u9650\\u884C\\u4E1A\",\n        onChange: this.changeIndustryIdValue\n      }), React.createElement(StyledCatalogSelector, {\n        allowClear: true,\n        placeholder: \"\\u4E0D\\u9650\\u76EE\\u5F55\",\n        onChange: this.changeCatalogValue\n      })), this.renderItem())));\n    }\n  }]);\n\n  return CreateModal;\n}(Component);\n\nexport { CreateModal as default };\nvar ModelContainer = styled.div.withConfig({\n  displayName: \"CreateModal__ModelContainer\",\n  componentId: \"sc-3w3emd-0\"\n})([\"width:100%;height:565px;padding:32px 32px 0 32px;overflow-y:overlay;\"]);\nvar StyledSelect = styled(ZhiWenSelect).withConfig({\n  displayName: \"CreateModal__StyledSelect\",\n  componentId: \"sc-3w3emd-1\"\n})([\"width:140px;height:32px;margin-right:12px;\"]);\nvar StyledCatalogSelector = styled(CatalogSelector).withConfig({\n  displayName: \"CreateModal__StyledCatalogSelector\",\n  componentId: \"sc-3w3emd-2\"\n})([\"width:140px;height:32px;margin-right:12px;\"]);\nvar InputContainer = styled.div.withConfig({\n  displayName: \"CreateModal__InputContainer\",\n  componentId: \"sc-3w3emd-3\"\n})([\"width:100%;height:64px;\"]);\nvar ItemContainer = styled.div.withConfig({\n  displayName: \"CreateModal__ItemContainer\",\n  componentId: \"sc-3w3emd-4\"\n})([\"display:flex;width:100%;min-height:116px;padding:14px 16px;margin-bottom:16px;color:#a2aab8;border:1px solid #c3c4d1;border-radius:4px;\"]);\nvar ItemTextContainer = styled.div.withConfig({\n  displayName: \"CreateModal__ItemTextContainer\",\n  componentId: \"sc-3w3emd-5\"\n})([\"display:flex;flex-wrap:wrap;width:400px;\"]);\nvar ItemTitle = styled.div.withConfig({\n  displayName: \"CreateModal__ItemTitle\",\n  componentId: \"sc-3w3emd-6\"\n})([\"font-size:20px;line-height:28px;\"]);\nvar ItemTypeContainer = styled.div.withConfig({\n  displayName: \"CreateModal__ItemTypeContainer\",\n  componentId: \"sc-3w3emd-7\"\n})([\"display:flex;width:100%;margin-top:8px;font-size:14px;line-height:22px;\"]);\nvar ItemTypeFixContainer = styled.div.withConfig({\n  displayName: \"CreateModal__ItemTypeFixContainer\",\n  componentId: \"sc-3w3emd-8\"\n})([\"display:flex;flex-wrap:wrap;width:144px;margin-right:16px;\"]);\nvar ItemTypeFlexContainer = styled.div.withConfig({\n  displayName: \"CreateModal__ItemTypeFlexContainer\",\n  componentId: \"sc-3w3emd-9\"\n})([\"display:flex;flex:1;flex-wrap:wrap;\"]);\nvar ItemTypeWords = styled.div.withConfig({\n  displayName: \"CreateModal__ItemTypeWords\",\n  componentId: \"sc-3w3emd-10\"\n})([\"flex:1;color:#172b4d;\"]);\nvar PriceContainer = styled.div.withConfig({\n  displayName: \"CreateModal__PriceContainer\",\n  componentId: \"sc-3w3emd-11\"\n})([\"display:flex;align-items:flex-end;flex-direction:column;justify-content:center;width:194px;\"]);\nvar PriceNumber = styled.div.withConfig({\n  displayName: \"CreateModal__PriceNumber\",\n  componentId: \"sc-3w3emd-12\"\n})([\"font-family:'DIN',sans-serif;font-size:28px;line-height:28px;\"]);\nvar PriceTitle = styled.div.withConfig({\n  displayName: \"CreateModal__PriceTitle\",\n  componentId: \"sc-3w3emd-13\"\n})([\"margin-top:4px;font-size:14px;line-height:22px;\"]);\nvar ChooseContainer = styled.div.withConfig({\n  displayName: \"CreateModal__ChooseContainer\",\n  componentId: \"sc-3w3emd-14\"\n})([\"display:flex;align-items:center;flex:1;justify-content:flex-end;\"]);\nvar ChooseBorder = styled.div.withConfig({\n  displayName: \"CreateModal__ChooseBorder\",\n  componentId: \"sc-3w3emd-15\"\n})([\"display:flex;align-items:center;justify-content:center;width:24px;height:24px;margin-right:6px;border:3px solid #c3c4d1;border-radius:50%;\"]);\nvar ChooseItem = styled.div.withConfig({\n  displayName: \"CreateModal__ChooseItem\",\n  componentId: \"sc-3w3emd-16\"\n})([\"width:10px;height:10px;background:#c3c4d1;border-radius:50%;\"]);","map":null,"metadata":{},"sourceType":"module"}