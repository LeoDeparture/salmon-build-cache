{"ast":null,"code":"import \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport debounce from 'lodash/debounce';\nimport React from 'react';\n\nvar SelectCompany =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SelectCompany, _React$Component);\n\n  function SelectCompany() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SelectCompany);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SelectCompany)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      companyData: [],\n      value: _this.props.setValue\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (value) {\n      var v = value.replace(/<em>|<\\/em>/g, '');\n\n      _this.setState({\n        value: v\n      });\n\n      _this.props.getValue(v);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillReceiveProps\", function (nextProps) {\n      if (_this.props.setValue !== nextProps.setValue) {\n        _this.setState({\n          value: nextProps.setValue\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"searchCompanies\", function (text) {\n      if (text === '') {\n        return null;\n      }\n\n      text.trim();\n\n      _this.fetchCompanyData(text);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchCompanyData\", function (text) {\n      fetch(\"https://bankpros.market.alicloudapi.com/searchCompany?com=\".concat(encodeURI(text)), {\n        headers: {\n          Authorization: 'APPCODE 203a0a666f0e4f8cba8cffbf1b0f336c'\n        },\n        method: 'get'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json.reason === '查询成功') {\n          _this.setState({\n            companyData: json.result.data\n          });\n\n          return;\n        }\n\n        _this.setState({\n          companyData: []\n        });\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(SelectCompany, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchCompanyData = debounce(this.fetchCompanyData, 500);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var style = this.props.style;\n      var companyData = this.state.companyData;\n      return React.createElement(_Select, {\n        showSearch: true,\n        style: _objectSpread({\n          flex: 1\n        }, style),\n        value: this.state.value,\n        onSearch: this.searchCompanies,\n        disabled: this.props.disabled,\n        onChange: this.onChange,\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD\\u641C\\u7D22\\uFF0C\\u5982\\uFF1A\\u5FB7\\u52E4\"\n      }, companyData.map(function (item) {\n        var companyName = item.companyName;\n        return React.createElement(_Select.Option, {\n          value: companyName,\n          key: companyName\n        }, companyName.replace(/<em>|<\\/em>/g, ''));\n      }));\n    }\n  }]);\n\n  return SelectCompany;\n}(React.Component);\n\nexport default SelectCompany;","map":null,"metadata":{},"sourceType":"module"}