{"ast":null,"code":"import \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/dropdown/style\";\nimport _Dropdown from \"antd/lib/dropdown\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nimport { format } from 'date-fns';\nimport React from 'react';\nimport styled from 'styled-components';\nimport Router from 'next/router';\nimport { FlexDisplay } from '../../../lib/commonCss';\nimport CreateAgreementPop from './CreateAgreementPop';\nvar Content = _Layout.Content;\n\nvar AgreementManagementTable =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AgreementManagementTable, _React$Component);\n\n  function AgreementManagementTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AgreementManagementTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AgreementManagementTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onRefCreateAgreementPop\", function (ref) {\n      _this.createAgreementPop = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickCreateButton\", function () {\n      _this.createAgreementPop.showPop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"reviewAgreementModal\", function (record) {\n      _Modal.confirm({\n        cancelText: '取消',\n        centered: true,\n        content: React.createElement(\"div\", null, React.createElement(\"p\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, \"\\u786E\\u8BA4\\u540E\\uFF0C\\u6B64\\u534F\\u8BAE\\u5C06\\u4F1A\\u4EE5\\u77ED\\u4FE1\\u548C\\u90AE\\u4EF6\\u7684\\u65B9\\u5F0F\\u53D1\\u9001\\u7ED9\\u5B66\\u5458\\u3002\"), React.createElement(\"p\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, \"\\u8054\\u7CFB\\u7535\\u8BDD: \".concat(record.studentPhoneNumber)), React.createElement(\"p\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, \"\\u90AE\\u7BB1: \".concat(record.studentEmail))),\n        okText: '通过审核并发送协议',\n        iconType: 'exclamation-circle',\n        okType: 'primary',\n        onOk: _this.props.reviewAgreement.bind(_assertThisInitialized(_this), record.agreementNo),\n        title: \"\\u786E\\u8BA4\\u901A\\u8FC7\\u5BA1\\u6838\\u5E76\\u53D1\\u9001\\u534F\\u8BAE\\u5417\\uFF1F\"\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resendAgreementModal\", function (record) {\n      _Modal.confirm({\n        cancelText: '取消',\n        centered: true,\n        content: React.createElement(\"div\", null, React.createElement(\"p\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, \"\\u786E\\u8BA4\\u540E\\uFF0C\\u6B64\\u534F\\u8BAE\\u5C06\\u4F1A\\u4EE5\\u77ED\\u4FE1\\u548C\\u90AE\\u4EF6\\u7684\\u65B9\\u5F0F\\u53D1\\u9001\\u7ED9\\u5B66\\u5458\\u3002\"), React.createElement(\"p\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, \"\\u8054\\u7CFB\\u7535\\u8BDD: \".concat(record.studentPhoneNumber)), React.createElement(\"p\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, \"\\u90AE\\u7BB1: \".concat(record.studentEmail))),\n        okText: '重新发送协议',\n        iconType: 'exclamation-circle',\n        okType: 'primary',\n        onOk: _this.props.resendAgreement.bind(_assertThisInitialized(_this), record.agreementNo),\n        title: \"\\u786E\\u8BA4\\u91CD\\u65B0\\u53D1\\u9001\\u534F\\u8BAE\\u5417\\uFF1F\"\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"cancelAgreementModal\", function (record) {\n      _Modal.confirm({\n        cancelText: '取消',\n        centered: true,\n        content: React.createElement(\"div\", null, React.createElement(\"p\", {\n          style: {\n            fontSize: '13px'\n          }\n        }, \"\\u64A4\\u9500\\u540E\\uFF0C\\u6B64\\u534F\\u8BAE\\u5C06\\u5931\\u53BB\\u6CD5\\u5F8B\\u6548\\u529B\\u3002\")),\n        okText: '确认撤销',\n        okType: 'danger',\n        iconType: 'close-circle',\n        iconClassName: 'tst',\n        onOk: _this.props.cancelAgreement.bind(_assertThisInitialized(_this), record.agreementNo),\n        title: \"\\u786E\\u8BA4\\u64A4\\u9500\\u6B64\\u534F\\u8BAE\\uFF1F\"\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"menu\", function (record) {\n      var showHoverData = ['查看详情', '撤销'];\n\n      if (record.status.key === 'PENDINGREVIEW') {\n        showHoverData = ['查看详情', '通过审核并发送协议', '撤销'];\n      } else if (record.status.key === 'PENDINGSIGN') {\n        showHoverData = ['查看详情', '重新发送协议', '撤销'];\n      } else if (record.status.key === 'CANCELED') {\n        showHoverData = ['查看详情'];\n      }\n\n      var toDetail = function toDetail() {\n        Router.push(\"/agreement-details?agreementNo=\".concat(record.agreementNo));\n      };\n\n      return React.createElement(_Menu, null, showHoverData.map(function (data, index) {\n        if (data === '查看详情') {\n          return React.createElement(_Menu.Item, {\n            onClick: toDetail,\n            key: \"agreementmenu\".concat(index)\n          }, React.createElement(\"span\", null, data));\n        } else if (data === '通过审核并发送协议') {\n          return React.createElement(_Menu.Item, {\n            onClick: _this.reviewAgreementModal.bind(_assertThisInitialized(_this), record),\n            key: \"agreementmenu\".concat(index)\n          }, React.createElement(\"a\", null, \"\\u901A\\u8FC7\\u5BA1\\u6838\\u5E76\\u53D1\\u9001\\u534F\\u8BAE\"));\n        } else if (data === '重新发送协议') {\n          return React.createElement(_Menu.Item, {\n            onClick: _this.resendAgreementModal.bind(_assertThisInitialized(_this), record),\n            key: \"agreementmenu\".concat(index)\n          }, React.createElement(\"a\", null, \"\\u91CD\\u65B0\\u53D1\\u9001\\u534F\\u8BAE\"));\n        } else if (data === '撤销') {\n          return React.createElement(_Menu.Item, {\n            onClick: _this.cancelAgreementModal.bind(_assertThisInitialized(_this), record),\n            key: \"agreementmenu\".concat(index)\n          }, React.createElement(\"a\", {\n            style: {\n              color: 'red'\n            }\n          }, \"\\u64A4\\u9500\"));\n        } else {\n          return null;\n        }\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRowKey\", function (data) {\n      return data.id;\n    });\n\n    return _this;\n  }\n\n  _createClass(AgreementManagementTable, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = this.props.data;\n      var columns = [{\n        dataIndex: 'agreementNo',\n        key: 'agreementNo',\n        title: '协议ID',\n        width: '250px'\n      }, {\n        dataIndex: 'name',\n        key: 'name',\n        title: '协议名称'\n      }, {\n        dataIndex: 'studentName',\n        key: 'studentName',\n        title: '学员姓名'\n      }, {\n        dataIndex: 'status.name',\n        key: 'status.name',\n        title: '状态',\n        width: '100px',\n        render: function render(_, record) {\n          var bageStatus = 'warning';\n\n          if (record.status.key === 'SIGNED') {\n            bageStatus = 'success';\n          } else if (record.status.key === 'CANCELED') {\n            bageStatus = 'default';\n          }\n\n          return React.createElement(FlexDisplay, {\n            style: {\n              alignItems: 'center'\n            }\n          }, React.createElement(_Badge, {\n            status: bageStatus\n          }), React.createElement(\"div\", {\n            style: {\n              fontSize: '14px'\n            }\n          }, record.status.name));\n        }\n      }, {\n        dataIndex: 'signedAt',\n        key: 'signedAt',\n        title: '签署时间',\n        render: function render(_, record) {\n          return record.signedAt ? format(record.signedAt, 'YYYY/MM/DD HH:mm') : '- -';\n        }\n      }, {\n        dataIndex: 'creator.person.name',\n        key: 'creator.person.name',\n        title: '负责人'\n      }, {\n        dataIndex: 'reviewer.person.name',\n        key: 'reviewer.person.name',\n        title: '审核人',\n        render: function render(_, record) {\n          return record.reviewer ? record.reviewer.person.name : '- -';\n        }\n      }, {\n        dataIndex: 'createdAt',\n        key: 'createdAt',\n        title: '生成时间',\n        render: function render(_, record) {\n          return record.createdAt ? format(record.createdAt, 'YYYY/MM/DD HH:mm') : '- -';\n        }\n      }, {\n        dataIndex: 'operating',\n        key: 'operating',\n        width: '120px',\n        render: function render(_, record) {\n          return React.createElement(_Dropdown, {\n            overlay: _this2.menu(record)\n          }, React.createElement(\"span\", {\n            style: {\n              color: '#6285ff'\n            },\n            className: \"ant-dropdown-link\"\n          }, \"\\u9009\\u62E9\\u64CD\\u4F5C\", React.createElement(_Icon, {\n            type: \"down\"\n          })));\n        },\n        title: '操作'\n      }];\n      return React.createElement(React.Fragment, null, React.createElement(HeaderWrapper, null, React.createElement(\"h1\", null, \"\\u534F\\u8BAE\\u7BA1\\u7406\"), React.createElement(CreateAgreementPop, {\n        onRef: this.onRefCreateAgreementPop\n      })), React.createElement(ContentWrapper, null, React.createElement(_Table, {\n        rowKey: this.getRowKey,\n        columns: columns,\n        dataSource: data,\n        pagination: false,\n        bordered: false,\n        locale: {\n          emptyText: '暂无协议，点击右上角按钮开始生成协议'\n        } // loading={this.state.loading}\n        ,\n        footer: this.props.footer.bind(this, ContentLoad)\n      })));\n    }\n  }]);\n\n  return AgreementManagementTable;\n}(React.Component);\n\nexport default AgreementManagementTable; // Header\n\nvar HeaderWrapper = styled.div.withConfig({\n  displayName: \"AgreementTable__HeaderWrapper\",\n  componentId: \"qxl21l-0\"\n})([\"display:flex;align-items:center;justify-content:space-between;height:60px;background-color:#fff;h1{margin:0 0 0 32px;font-size:20px;line-height:60px;color:rgba(0,0,0,0.85);}\"]); // const HeaderButtonStyle = {\n//   marginRight: '24px',\n// };\n// Content\n\nvar ContentWrapper = styled(Content).withConfig({\n  displayName: \"AgreementTable__ContentWrapper\",\n  componentId: \"qxl21l-1\"\n})([\"min-width:1136px;margin:24px;background-color:#fff;\"]);\nvar ContentLoad = styled.div.withConfig({\n  displayName: \"AgreementTable__ContentLoad\",\n  componentId: \"qxl21l-2\"\n})([\"display:flex;align-items:flex-start;justify-content:center;\"]);","map":null,"metadata":{},"sourceType":"module"}