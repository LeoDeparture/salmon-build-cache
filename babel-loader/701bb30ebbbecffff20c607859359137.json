{"ast":null,"code":"import \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport ModalTitle from '../../../components/ModalTitle';\n\nvar CopyFilePop =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CopyFilePop, _React$Component);\n\n  function CopyFilePop() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CopyFilePop);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CopyFilePop)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      searchKeyword: '',\n      visible: false,\n      selectedFolderId: '',\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      _this.props.onRef(_assertThisInitialized(_this));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOk\", function () {\n      _this.showLoading();\n\n      _this.props.copyFile({\n        folderId: _this.state.selectedFolderId,\n        fileLinkIds: [_this.props.fileLinkId]\n      }, _this.state.selectedFolderId, _this.hidePop, _this.hideLoading);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showLoading\", function () {\n      _this.setState({\n        loading: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hideLoading\", function () {\n      _this.setState({\n        loading: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCancel\", function () {\n      _this.hidePop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showPop\", function () {\n      _this.setState({\n        visible: true,\n        // 每次打开重置窗口信息\n        searchKeyword: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hidePop\", function () {\n      _this.setState({\n        visible: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInput\", function (e) {\n      _this.setState({\n        searchKeyword: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickFolder\", function (id) {\n      _this.setState({\n        selectedFolderId: id\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickCreate\", function () {\n      _this.hidePop();\n\n      _this.props.showCreateFolderPop();\n    });\n\n    return _this;\n  }\n\n  _createClass(CopyFilePop, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var FolderItem = function FolderItem(props) {\n        var _props$data = props.data,\n            id = _props$data.id,\n            name = _props$data.name;\n        var ownerName = props.data.owner.person.name; // 选中文件夹高亮\n\n        var style = id === _this2.state.selectedFolderId ? {\n          backgroundColor: 'rgba(92, 134, 251, 0.2)'\n        } : {};\n        return React.createElement(ChildContainer, {\n          style: style,\n          onClick: _this2.onClickFolder.bind(_this2, id)\n        }, React.createElement(_Icon, {\n          style: iconStyle,\n          type: \"folder\",\n          theme: \"filled\"\n        }), React.createElement(ChildInfoContainer, null, React.createElement(\"h1\", null, name), React.createElement(\"h2\", null, \"\\u521B\\u5EFA\\u8005: \", ownerName)));\n      };\n\n      var myfolders = this.props.myfolders;\n      var noResult = myfolders.length === 0;\n\n      if (noResult) {\n        var title = React.createElement(ModalTitle, {\n          iconColor: \"#faad14\",\n          iconType: \"exclamation-circle\",\n          txt: \"\\u6682\\u65F6\\u65E0\\u6CD5\\u590D\\u5236\"\n        });\n        return React.createElement(_Modal, {\n          title: title,\n          visible: this.state.visible,\n          onOk: this.onClickCreate,\n          closable: false,\n          cancelButtonProps: {\n            hidden: true\n          },\n          okText: '创建文件夹',\n          cancelText: '取消',\n          onCancel: this.handleCancel\n        }, \"\\u4F60\\u672A\\u521B\\u5EFA\\u4EFB\\u4F55\\u6587\\u4EF6\\u5939\\uFF0C\\u6682\\u65F6\\u65E0\\u6CD5\\u64CD\\u4F5C\\u3002\\u8BF7\\u5148\\u521B\\u5EFA\\u6587\\u4EF6\\u5939\\u540E\\uFF0C\\u5728\\u8FDB\\u884C\\u590D\\u5236\\u64CD\\u4F5C\\u3002\");\n      } // 有文件夹\n\n\n      var folders = myfolders.filter(function (v) {\n        return v.name.toLowerCase().includes(_this2.state.searchKeyword.toLowerCase());\n      }).map(function (v) {\n        var id = v.id;\n        return React.createElement(FolderItem, {\n          key: id,\n          data: v\n        });\n      });\n      return React.createElement(_Modal, {\n        title: \"\\u5C06\\u6B64\\u6587\\u4EF6\\u590D\\u5236\\u5230\\u6587\\u4EF6\\u5939\",\n        visible: this.state.visible,\n        onOk: this.handleOk,\n        onCancel: this.handleCancel,\n        closable: false,\n        okText: '确认复制',\n        cancelText: '取消',\n        destroyOnClose: true,\n        okButtonProps: {\n          disabled: !this.state.selectedFolderId,\n          loading: this.state.loading\n        },\n        maskClosable: false\n      }, React.createElement(Label, null, \"\\u8BF7\\u9009\\u62E91\\u4E2A\\u76EE\\u6807\\u6587\\u4EF6\\u5939\", React.createElement(Hint, null, \"*\\u4EC5\\u652F\\u6301\\u590D\\u5236\\u5230\\u672C\\u4EBA\\u521B\\u5EFA\\u7684\\u6587\\u4EF6\\u5939\")), React.createElement(_Input, {\n        style: {\n          marginBottom: 24\n        },\n        placeholder: '搜索文件夹名称',\n        onChange: this.onInput,\n        value: this.state.searchKeyword\n      }), React.createElement(ChildrenContainer, null, folders));\n    }\n  }]);\n\n  return CopyFilePop;\n}(React.Component);\n\nexport default CopyFilePop;\nvar Label = styled.p.withConfig({\n  displayName: \"CopyFilePop__Label\",\n  componentId: \"sc-192kz7h-0\"\n})([\"margin:0;margin-bottom:8px;\"]);\nvar Hint = styled.span.withConfig({\n  displayName: \"CopyFilePop__Hint\",\n  componentId: \"sc-192kz7h-1\"\n})([\"position:relative;top:4px;float:right;font-size:12px;color:#b9b9b9;vertical-align:bottom;\"]);\nvar ChildrenContainer = styled.div.withConfig({\n  displayName: \"CopyFilePop__ChildrenContainer\",\n  componentId: \"sc-192kz7h-2\"\n})([\"position:relative;height:292px;overflow-y:scroll;&::-webkit-scrollbar{width:0 !important;}\"]);\nvar ChildContainer = styled.div.withConfig({\n  displayName: \"CopyFilePop__ChildContainer\",\n  componentId: \"sc-192kz7h-3\"\n})([\"display:flex;align-items:center;height:66px;padding:14px;margin-bottom:16px;border:solid 1px #b9b9b9;border-radius:4px;&:last-child{margin-bottom:0;}&:hover{background-color:rgba(92,134,251,0.05);}\"]);\nvar ChildInfoContainer = styled.div.withConfig({\n  displayName: \"CopyFilePop__ChildInfoContainer\",\n  componentId: \"sc-192kz7h-4\"\n})([\"flex:1;margin-left:8px;overflow:hidden;h1{margin-bottom:0;overflow:hidden;font-size:14px;line-height:20px;color:#4a4a4a;text-overflow:ellipsis;white-space:nowrap;}h2{margin-bottom:0;overflow:hidden;font-size:12px;line-height:18px;color:rgba(74,74,74,0.5);text-overflow:ellipsis;white-space:nowrap;}\"]);\nvar iconStyle = {\n  fontSize: 38\n};","map":null,"metadata":{},"sourceType":"module"}