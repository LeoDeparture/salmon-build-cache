{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport { FlexCenterColumn, FlexContent, FlexContentCenter, FlexContentCenterV, TextContent } from '../../../lib/commonCss';\nimport { yyyymmdd } from '../../../lib/date';\n\nvar AppointmentManagementComponents =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AppointmentManagementComponents, _React$Component);\n\n  function AppointmentManagementComponents() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AppointmentManagementComponents);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AppointmentManagementComponents)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      openPanel: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"statusData\", {\n      acceptedChange: ['#f8f8f8', '#9B9B9B', '已接受并变更预约时间 - 待学员确认', true],\n      acceptedUnPerformance: ['#F5A623', '#fff', '已接受 - 待履约', true],\n      appointedUnAccepted: ['#F5A623', '#fff', '学员已预约 - 待接受', true],\n      availableUnAccepted: ['#F5A623', '#fff', '学员已预约 - 待接受 (改派任务)', true],\n      cancel: ['#f8f8f8', '#9B9B9B', '已取消', true],\n      expired: ['#f8f8f8', '#9B9B9B', '已失效', true],\n      expiredNoReservation: ['#f8f8f8', '#9B9B9B', '已失效', false],\n      performanceFormulate: ['#0a0', '#fff', '已履约', true],\n      // performanceUnFormulate: [\n      //   '#F5A623',\n      //   '#fff',\n      //   '已履约 - 待制定学习计划',\n      //   true,\n      // ],\n      publiclyAvailable: ['#f8f8f8', '#9B9B9B', '已公开 - 可预约', false],\n      publiclyUnavailable: ['#f8f8f8', '#9B9B9B', '未公开 - 无法预约', false],\n      reassign: ['#f8f8f8', '#9B9B9B', '已改派至其他AM', true],\n      refuseChange: ['#f8f8f8', '#9B9B9B', '学员已拒绝服务时间变更 - 已取消', true],\n      timeChangeUnPerformance: ['#F5A623', '#fff', '学员已确认服务时间变更 - 待履约', true],\n      timeOut: ['#F5212D', '#fff', '超时未接受', true]\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSlotsContent\", function (item, status) {\n      var action = _this.statusData[status];\n      var contentData = item.reservation;\n      var avatar = contentData && contentData.studentAccount && contentData.studentAccount.account.person.avatar;\n      var nickName = contentData && contentData.studentAccount && contentData.studentAccount.account.person.nickname;\n      return React.createElement(SlotsContent, {\n        key: item.id,\n        onClick: _this.props.getSlotsDetails.bind(_assertThisInitialized(_this), item.id, status, true)\n      }, React.createElement(StatusTitle, {\n        bgColor: action[0],\n        color: action[1]\n      }, action[2]), action[3] ? React.createElement(SlotsCenter, null, React.createElement(_Avatar, {\n        size: 32,\n        icon: \"user\",\n        src: avatar,\n        style: {\n          minWidth: 32\n        }\n      }), React.createElement(NameContent, null, nickName)) : React.createElement(FlexContent, null), React.createElement(SlotsFooter, null, yyyymmdd(item.appointmentTime, 'HH:mm')));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderContent\", function () {\n      var openPanel = _this.state.openPanel;\n      var _this$props = _this.props,\n          type = _this$props.type,\n          dateArr = _this$props.dateArr,\n          slotsData = _this$props.slotsData,\n          cancelAndReassignDate = _this$props.cancelAndReassignDate,\n          todayDate = _this$props.todayDate,\n          renderSlotsContents = _this$props.renderSlotsContents,\n          renderHideSlots = _this$props.renderHideSlots;\n\n      if (dateArr) {\n        var length = _this.props.dateArr.length;\n\n        if (length < 7) {\n          var num = 7 - length;\n          return _toConsumableArray(dateArr.concat(Array(num).fill(undefined))).map(function (item, index) {\n            if (item) {\n              var currentWeek = yyyymmdd(item.date);\n              return React.createElement(FlexCenterColumnList, {\n                key: index\n              }, React.createElement(WeekTitle, {\n                currentWeek: currentWeek,\n                today: todayDate\n              }, item.week), renderSlotsContents(item, slotsData, _this.renderSlotsContent), cancelAndReassignDate.findIndex(function (m) {\n                return m === item.week;\n              }) >= 0 && (openPanel.findIndex(function (m) {\n                return m === currentWeek;\n              }) < 0 && type !== 'unAccepted' ? React.createElement(PanelHeader, {\n                onClick: _this.changePanel.bind(_assertThisInitialized(_this), currentWeek)\n              }, React.createElement(TitleOfCollapse, null, \"\\u70B9\\u51FB\\u67E5\\u770B\\u201C\\u5DF2\\u53D6\\u6D88\\u201D\\u548C\\u201C\\u5DF2\\u6539\\u6D3E\\u201D\\u72B6\\u6001\\u9884\\u7EA6\\u65E5\\u7A0B\")) : renderHideSlots(item, slotsData, _this.renderSlotsContent)));\n            }\n\n            return React.createElement(FlexCenterColumnList, {\n              key: index\n            });\n          });\n        }\n\n        return dateArr.map(function (item, index) {\n          var currentWeek = yyyymmdd(item.date);\n          return React.createElement(FlexCenterColumnList, {\n            key: index\n          }, React.createElement(WeekTitle, {\n            currentWeek: currentWeek,\n            today: todayDate\n          }, item.week), renderSlotsContents(item, slotsData, _this.renderSlotsContent), cancelAndReassignDate.findIndex(function (m) {\n            return m === item.week;\n          }) >= 0 && (openPanel.findIndex(function (m) {\n            return m === currentWeek;\n          }) < 0 && type !== 'unAccepted' ? React.createElement(PanelHeader, {\n            onClick: _this.changePanel.bind(_assertThisInitialized(_this), currentWeek)\n          }, React.createElement(TitleOfCollapse, null, \"\\u70B9\\u51FB\\u67E5\\u770B\\u201C\\u5DF2\\u53D6\\u6D88\\u201D\\u548C\\u201C\\u5DF2\\u6539\\u6D3E\\u201D\\u72B6\\u6001\\u9884\\u7EA6\\u65E5\\u7A0B\")) : renderHideSlots(item, slotsData, _this.renderSlotsContent)));\n        });\n      }\n\n      return null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changePanel\", function (currentWeek) {\n      _this.setState({\n        openPanel: [currentWeek].concat(_toConsumableArray(_this.state.openPanel))\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(AppointmentManagementComponents, [{\n    key: \"render\",\n    value: function render() {\n      var dateArr = this.props.dateArr;\n      var dateArrLength = dateArr && dateArr.length <= 7;\n      var slotsData = this.props.slotsData;\n      return React.createElement(FlexContent, {\n        style: dateArrLength ? StyleNoScroll : StyleAndScroll\n      }, slotsData && slotsData.length ? this.renderContent() : React.createElement(FlexContentCenter, {\n        style: {\n          background: '#fff'\n        }\n      }, React.createElement(TextContent, {\n        color: \"#AEAEAE\"\n      }, \"\\u6682\\u65E0\\u9884\\u7EA6\\u65E5\\u7A0B\\uFF0C\\u70B9\\u51FB\\u201D\\u6DFB\\u52A0\\u9884\\u7EA6\\u65E5\\u7A0B\\u201C\\u5F00\\u59CB\\u6DFB\\u52A0\")));\n    }\n  }]);\n\n  return AppointmentManagementComponents;\n}(React.Component);\n\nexport default AppointmentManagementComponents;\nvar StyleNoScroll = {\n  width: '100%',\n  padding: '6px',\n  background: '#f0f2f5'\n};\nvar StyleAndScroll = {\n  background: '#f0f2f5',\n  overflow: 'scroll',\n  padding: '6px'\n};\nvar FlexCenterColumnList = styled(FlexCenterColumn).withConfig({\n  displayName: \"AppointmentManagementComponents__FlexCenterColumnList\",\n  componentId: \"rrzz1u-0\"\n})([\"max-width:100%;min-width:130px;padding:6px;\"]);\nvar WeekTitle = styled.div.withConfig({\n  displayName: \"AppointmentManagementComponents__WeekTitle\",\n  componentId: \"rrzz1u-1\"\n})([\"padding:3px 0;font-size:14px;text-align:center;background-color:\", \";border-radius:4px;\"], function (props) {\n  return props.currentWeek === props.today ? '#E4E9F8' : '#fff';\n});\nexport var SlotsContent = styled(FlexCenterColumn).withConfig({\n  displayName: \"AppointmentManagementComponents__SlotsContent\",\n  componentId: \"rrzz1u-2\"\n})([\"max-height:112px;min-height:112px;padding:2px;margin:6px 0;cursor:pointer;background:#fff;border-radius:4px;\"]);\nvar SlotsFooter = styled.p.withConfig({\n  displayName: \"AppointmentManagementComponents__SlotsFooter\",\n  componentId: \"rrzz1u-3\"\n})([\"padding:2px 6px;margin:0;font-size:12px;background-color:#f8f8f8;border-radius:4px;\"]);\nexport var NameContent = styled.p.withConfig({\n  displayName: \"AppointmentManagementComponents__NameContent\",\n  componentId: \"rrzz1u-4\"\n})([\"padding-left:6px;margin:0;overflow:hidden;font-size:14px;text-overflow:ellipsis;white-space:nowrap;\"]);\nexport var SlotsCenter = styled(FlexContentCenterV).withConfig({\n  displayName: \"AppointmentManagementComponents__SlotsCenter\",\n  componentId: \"rrzz1u-5\"\n})([\"padding:5px 5px 0 5px;\"]);\nvar TitleOfCollapse = styled.p.withConfig({\n  displayName: \"AppointmentManagementComponents__TitleOfCollapse\",\n  componentId: \"rrzz1u-6\"\n})([\"margin-bottom:0;font-size:12px;color:#c3c3c3;\"]);\nvar PanelHeader = styled.div.withConfig({\n  displayName: \"AppointmentManagementComponents__PanelHeader\",\n  componentId: \"rrzz1u-7\"\n})([\"margin:6px 0;text-align:center;cursor:pointer;\"]); //  #0a0 #f8f8f8  #F5A623  #F5212D #9B9B9B\n\nvar StatusTitle = styled.p.withConfig({\n  displayName: \"AppointmentManagementComponents__StatusTitle\",\n  componentId: \"rrzz1u-8\"\n})([\"padding:2px 4px;margin:0;overflow:hidden;font-size:12px;color:\", \";text-overflow:ellipsis;white-space:nowrap;background:\", \";border-radius:4px;\"], function (props) {\n  return props.color;\n}, function (props) {\n  return props.bgColor;\n});","map":null,"metadata":{},"sourceType":"module"}