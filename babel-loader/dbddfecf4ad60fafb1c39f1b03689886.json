{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { ApolloConsumer } from 'react-apollo';\nimport Accordion from '../../../../components/Accordion';\nimport { allEnum, parseErrorCode } from '../../../../lib/commonJs';\nimport { BasicInfoWrapper, FooterWrapper, HiddenStyle } from '../../components/CSSComponents';\nimport { MutationCreateServicePlanBaseInfo } from '../containers/Mutations';\n\nvar ServiceItems =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ServiceItems, _Component);\n\n  function ServiceItems(props) {\n    var _this;\n\n    _classCallCheck(this, ServiceItems);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ServiceItems).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"businessEnumOptions\", [{\n      title: '职业能力服务',\n      children: allEnum().listStaticZhiwenServiceEnum.filter(function (v) {\n        return v.key !== 'JOB_RECOMMENDATION';\n      }).sort(function (left, right) {\n        var sortArray = ['CAREER_PLANNING', 'SUBSCRIPTION_COURSE', 'PRIVATE_COURSE', 'GROUP_COURSE'];\n        return sortArray.indexOf(left.key) - sortArray.indexOf(right.key);\n      }).map(function (v) {\n        var id = v.id,\n            name = v.name,\n            key = v.key;\n        return {\n          value: id,\n          title: key === 'PRIVATE_COURSE' ? \"\".concat(name, \"\\u8F85\\u5BFC\") : name,\n          required: key === 'CAREER_PLANNING'\n        };\n      })\n    }]);\n\n    _defineProperty(_assertThisInitialized(_this), \"businessLineEnumOptions\", [{\n      title: '求职服务',\n      children: allEnum().listStaticZhiwenServiceEnum.filter(function (v) {\n        return v.key === 'JOB_RECOMMENDATION';\n      }).map(function (v) {\n        var id = v.id,\n            name = v.name;\n        return {\n          value: id,\n          title: name,\n          required: true\n        };\n      })\n    }]);\n\n    _defineProperty(_assertThisInitialized(_this), \"onCareerBusinessChange\", function (ids) {\n      _this.props.updateState({\n        careerBusinessServiceIds: ids\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onJobRecommendationChange\", function (ids) {\n      _this.props.updateState({\n        jobRecommendationServiceIds: ids\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickCreate\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$props, input, updatePlanData, toNextStep;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, input = _this$props.input, updatePlanData = _this$props.updatePlanData, toNextStep = _this$props.toNextStep;\n\n              _this.setState({\n                loading: true\n              });\n\n              _this.client.mutate({\n                mutation: MutationCreateServicePlanBaseInfo,\n                variables: {\n                  input: input\n                }\n              }).then(function (result) {\n                if (result) {\n                  updatePlanData(result.data.servicePlan);\n                  toNextStep();\n                }\n              }).catch(function (error) {\n                if (parseErrorCode(error) === 'serviceCatalogNotExist') {\n                  _message.error('选择的目录不存在，请返回上一步修改');\n\n                  _this.setState({\n                    loading: false\n                  });\n                }\n              }).finally(function () {\n                _this.setState({\n                  loading: false\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _this.state = {\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(ServiceItems, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          hidden = _this$props2.hidden,\n          input = _this$props2.input;\n      var loading = this.state.loading; // 如果未选择, 禁用创建按钮\n\n      var jobRecommendationServiceIds = input.jobRecommendationServiceIds,\n          careerBusinessServiceIds = input.careerBusinessServiceIds;\n      var disabled = jobRecommendationServiceIds.length <= 0 && careerBusinessServiceIds.length <= 0;\n      return React.createElement(BasicInfoWrapper, {\n        style: hidden ? HiddenStyle : {}\n      }, React.createElement(RowWrapper, null, React.createElement(Accordion, {\n        options: this.businessEnumOptions,\n        onChange: this.onCareerBusinessChange\n      }), React.createElement(SpaceSeparate, null), React.createElement(Accordion, {\n        isShowRequiredText: false,\n        options: this.businessLineEnumOptions,\n        onChange: this.onJobRecommendationChange\n      })), React.createElement(FooterWrapper, null, React.createElement(_Button, {\n        style: {\n          marginRight: '12px'\n        },\n        onClick: this.props.toLastStep\n      }, \"\\u4E0A\\u4E00\\u6B65\"), React.createElement(ApolloConsumer, null, function (client) {\n        _this2.client = client;\n        return React.createElement(_Button, {\n          type: \"primary\",\n          disabled: disabled,\n          onClick: _this2.onClickCreate,\n          loading: loading\n        }, \"\\u786E\\u8BA4\\u521B\\u5EFA\");\n      })));\n    }\n  }]);\n\n  return ServiceItems;\n}(Component);\n\n_defineProperty(ServiceItems, \"defaultProps\", {\n  hidden: true\n});\n\nvar SpaceSeparate = styled.div.withConfig({\n  displayName: \"ServiceItems__SpaceSeparate\",\n  componentId: \"h7v6bw-0\"\n})([\"width:1px;height:300px;margin:0 44px;background-color:#e1e1e8;\"]);\nvar RowWrapper = styled.div.withConfig({\n  displayName: \"ServiceItems__RowWrapper\",\n  componentId: \"h7v6bw-1\"\n})([\"display:flex;justify-content:center;margin-bottom:170px;\"]);\nexport default ServiceItems;","map":null,"metadata":{},"sourceType":"module"}