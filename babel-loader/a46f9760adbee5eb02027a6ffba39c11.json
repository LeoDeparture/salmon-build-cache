{"ast":null,"code":"import \"antd/lib/config-provider/style\";\nimport _ConfigProvider from \"antd/lib/config-provider\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { format } from 'date-fns';\nimport Router from 'next/router';\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport EmptyComponents from '../../../../../components/Empty';\nimport TableOperation from '../../../../../components/Table/TableOperation';\nimport StatusBadge from '../../../components/StatusBadge';\n\nvar SkillCourseTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SkillCourseTable, _Component);\n\n  function SkillCourseTable(props) {\n    var _this;\n\n    _classCallCheck(this, SkillCourseTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SkillCourseTable).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"toDetailPage\", function (id) {\n      Router.push(\"/skill-course/series/\".concat(id));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"editSkillCourse\", function (id) {\n      Router.push(\"/skill-course/create/\".concat(id));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"formatOperations\", function (record) {\n      var id = record.id,\n          status = record.status;\n      var _this$props = _this.props,\n          deleteSkillCourse = _this$props.deleteSkillCourse,\n          onlineSkillCourse = _this$props.onlineSkillCourse,\n          offlineSkillCourse = _this$props.offlineSkillCourse;\n      var isOnline = status.key === 'ONLINE';\n      return [{\n        title: '查看详情',\n        onClick: _this.toDetailPage.bind(_assertThisInitialized(_this), id)\n      }, {\n        title: '编辑',\n        onClick: _this.editSkillCourse.bind(_assertThisInitialized(_this), id)\n      }, {\n        render: isOnline ? offlineSkillCourse.bind(_assertThisInitialized(_this), id) : onlineSkillCourse.bind(_assertThisInitialized(_this), id)\n      }, {\n        render: deleteSkillCourse.bind(_assertThisInitialized(_this), id)\n      }];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeLoading\", function (loading) {\n      _this.setState({\n        loading: loading\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"formatCategory\", function (category) {\n      var current = category;\n      var categoryNames = [];\n\n      while (current && current.name) {\n        categoryNames.unshift(current.name);\n        current = current.parent;\n      }\n\n      var categoryStr = categoryNames.join(' / ');\n      return categoryStr.length > 20 ? categoryStr.substr(-20).padStart(23, '.') : categoryStr;\n    });\n\n    _this.state = {\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(SkillCourseTable, [{\n    key: \"render\",\n    // table 列表展示不正确，需要做调整\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          skillCourses = _this$props2.skillCourses,\n          footer = _this$props2.footer;\n      var dataSource = skillCourses;\n      var columns = [{\n        title: '课程名称',\n        dataIndex: 'name',\n        key: 'name',\n        width: '18.4%',\n        render: function render(v) {\n          return React.createElement(NameWrapper, null, v);\n        }\n      }, {\n        title: '所属分类',\n        dataIndex: 'skillCourseCategory',\n        key: 'skillCourseCategory',\n        width: '23%',\n        render: function render(v) {\n          return _this2.formatCategory(v);\n        }\n      }, {\n        title: '周期数',\n        dataIndex: 'skillCourseSeriesCount',\n        key: 'skillCourseSeriesCount',\n        width: '8.7%'\n      }, {\n        title: '状态',\n        dataIndex: 'status',\n        key: 'status',\n        width: '11.65%',\n        render: function render(v) {\n          return React.createElement(StatusBadge, {\n            currentStatus: v,\n            styles: {\n              marginLeft: 12\n            }\n          });\n        }\n      }, {\n        title: '创建时间',\n        dataIndex: 'createdAt',\n        key: 'createdAt',\n        width: '14.9%',\n        render: function render(v) {\n          return format(new Date(v), 'YYYY/MM/DD');\n        }\n      }, {\n        title: '操作',\n        key: 'operation',\n        width: '19.6%',\n        render: function render(_value, record) {\n          return React.createElement(TableOperation, {\n            operations: _this2.formatOperations(record)\n          });\n        }\n      }];\n\n      var Empty = function Empty() {\n        return React.createElement(EmptyComponents, null);\n      };\n\n      return React.createElement(_ConfigProvider, {\n        renderEmpty: Empty\n      }, React.createElement(TableWrapper, null, React.createElement(_Table, {\n        dataSource: dataSource,\n        columns: columns,\n        pagination: false,\n        footer: footer,\n        loading: this.state.loading\n      })));\n    }\n  }]);\n\n  return SkillCourseTable;\n}(Component);\n\nexport { SkillCourseTable as default };\nvar TableWrapper = styled.div.withConfig({\n  displayName: \"SkillCourseTable__TableWrapper\",\n  componentId: \"skhrqu-0\"\n})([\"width:100%;margin-top:24px;\"]);\nvar NameWrapper = styled.div.withConfig({\n  displayName: \"SkillCourseTable__NameWrapper\",\n  componentId: \"skhrqu-1\"\n})([\"width:175px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;\"]);","map":null,"metadata":{},"sourceType":"module"}