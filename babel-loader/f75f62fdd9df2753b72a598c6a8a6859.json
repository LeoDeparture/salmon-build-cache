{"ast":null,"code":"import \"antd/lib/config-provider/style\";\nimport _ConfigProvider from \"antd/lib/config-provider\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { format } from 'date-fns';\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Router from 'next/router';\nimport EmptyComponents from '../../../../../components/Empty';\nimport { TableHeader } from '../../../../../components/Table';\nimport TableOperation from '../../../../../components/Table/TableOperation';\nimport StatusBadge from '../../../components/StatusBadge';\n\nvar SeriesTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SeriesTable, _Component);\n\n  function SeriesTable(props) {\n    var _this;\n\n    _classCallCheck(this, SeriesTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SeriesTable).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"changeLoading\", function (loading) {\n      _this.setState({\n        loading: loading\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toDetailPage\", function (id) {\n      var courseId = Router.query.id;\n      Router.push(\"/skill-course/chapter/\".concat(id, \"/\").concat(courseId));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"formatOperations\", function (record) {\n      var id = record.id,\n          status = record.status;\n      var _this$props = _this.props,\n          deleteSeries = _this$props.deleteSeries,\n          onlineSeries = _this$props.onlineSeries,\n          offlineSeries = _this$props.offlineSeries;\n      var online = status.key === 'ONLINE';\n      return [{\n        title: '查看详情',\n        onClick: _this.toDetailPage.bind(_assertThisInitialized(_this), id)\n      }, {\n        title: '编辑',\n        onClick: _this.onClickCreate.bind(_assertThisInitialized(_this), 'edit', undefined, id)\n      }, {\n        title: '复制并创建周期',\n        onClick: _this.onClickCreate.bind(_assertThisInitialized(_this), 'clone', undefined, id)\n      }, {\n        title: '关联用户列表',\n        onClick: _this.toDetailPage.bind(_assertThisInitialized(_this), id)\n      }, {\n        render: online ? offlineSeries.bind(_assertThisInitialized(_this), id) : onlineSeries.bind(_assertThisInitialized(_this), id)\n      }, {\n        render: deleteSeries.bind(_assertThisInitialized(_this), id)\n      }];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickCreate\", function () {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n      var skillCourseId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Router.query.id;\n      var itemId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n      Router.push(\"/skill-course/create-series/\".concat(type, \"/\").concat(skillCourseId + (itemId ? '/' + itemId : '')));\n    });\n\n    _this.state = {\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(SeriesTable, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          tableData = _this$props2.tableData,\n          footer = _this$props2.footer;\n      var dataSource = tableData.map(function (v) {\n        return _objectSpread({}, v, {\n          key: v.id,\n          effectiveTime: \"\".concat(format(v.startAt, 'YYYY/MM/DD'), \" \\uFF5E \").concat(format(v.endAt, 'YYYY/MM/DD'))\n        });\n      });\n      var columns = [{\n        title: '课程名称',\n        dataIndex: 'name',\n        key: 'name',\n        width: '18.4%',\n        ellipsis: true\n      }, {\n        title: '有效时间周期',\n        dataIndex: 'effectiveTime',\n        key: 'effectiveTime',\n        width: '22.4%'\n      }, {\n        title: '订阅数',\n        dataIndex: 'subscriptionCount',\n        key: 'subscriptionCount',\n        width: '8.7%'\n      }, {\n        title: '章节数',\n        dataIndex: 'skillChaptersCount',\n        key: 'skillChaptersCount',\n        width: '8.8%'\n      }, {\n        title: '状态',\n        dataIndex: 'status',\n        key: 'status',\n        width: '13.2%',\n        render: function render(v) {\n          return React.createElement(StatusBadge, {\n            currentStatus: v\n          });\n        }\n      }, {\n        title: '操作',\n        key: 'operation',\n        width: '18.8%',\n        render: function render(_value, record) {\n          return React.createElement(TableOperation, {\n            operations: _this2.formatOperations(record)\n          });\n        }\n      }];\n\n      var Empty = function Empty() {\n        return React.createElement(EmptyComponents, null);\n      };\n\n      return React.createElement(React.Fragment, null, React.createElement(TableHeader, {\n        buttonText: \"\\u521B\\u5EFA\\u8BFE\\u7A0B\\u5468\\u671F\",\n        onClickButton: this.onClickCreate.bind(this, 'create', undefined, undefined),\n        moduleGroup: React.createElement(TableTitle, null, \"\\u6B64\\u8BFE\\u7A0B\\u5185\\u5468\\u671F\\uFF08\", dataSource.length, \"\\uFF09\")\n      }), React.createElement(_ConfigProvider, {\n        renderEmpty: Empty\n      }, React.createElement(TableWrapper, null, React.createElement(_Table, {\n        dataSource: dataSource,\n        columns: columns,\n        pagination: false,\n        footer: footer,\n        loading: this.state.loading\n      }))));\n    }\n  }]);\n\n  return SeriesTable;\n}(Component);\n\nexport { SeriesTable as default };\nvar TableWrapper = styled.div.withConfig({\n  displayName: \"SeriesTable__TableWrapper\",\n  componentId: \"sc-10bxxv8-0\"\n})([\"width:100%;margin-top:24px;\"]);\nvar TableTitle = styled.div.withConfig({\n  displayName: \"SeriesTable__TableTitle\",\n  componentId: \"sc-10bxxv8-1\"\n})([\"font-weight:600;color:#172b4d;\"]);","map":null,"metadata":{},"sourceType":"module"}