{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { format } from 'date-fns';\nimport Router from 'next/router';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { ApolloConsumer } from 'react-apollo';\nimport { getIndustryText, getPersonName } from '../../../lib/commonJs';\nimport { MutationUpdatePathway } from '../containers/MutationUpdatePathwayBaseInfo';\nimport { ButtonsWrapper, StepContainer, StepTitle } from './Root';\n\nvar ConfirmPlanMessage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ConfirmPlanMessage, _React$Component);\n\n  function ConfirmPlanMessage(props) {\n    var _this;\n\n    _classCallCheck(this, ConfirmPlanMessage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ConfirmPlanMessage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickCreate\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$props, pathway, baseInfo, selectedTemplate, selectedServiceTickets, purpose, introduction, highlights, remarks, variables;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                loading: true\n              });\n\n              _this$props = _this.props, pathway = _this$props.pathway, baseInfo = _this$props.baseInfo, selectedTemplate = _this$props.selectedTemplate, selectedServiceTickets = _this$props.selectedServiceTickets;\n              purpose = baseInfo.purpose, introduction = baseInfo.introduction, highlights = baseInfo.highlights, remarks = baseInfo.remarks;\n              variables = {\n                id: pathway.id,\n                purpose: purpose,\n                introduction: introduction,\n                highlights: highlights,\n                remarks: remarks,\n                serviceTicketIds: selectedServiceTickets.map(function (v) {\n                  return v.id;\n                }),\n                pathwayTemplateId: selectedTemplate.id\n              };\n              _context.next = 6;\n              return _this.client.mutate({\n                mutation: MutationUpdatePathway,\n                variables: {\n                  input: variables\n                }\n              }).then(function (_result) {\n                _message.success('保存成功');\n\n                Router.push('/pathway-detail/' + Router.query.id);\n              }).catch(function (_error) {\n                _message.error('保存失败');\n              });\n\n            case 6:\n              _this.setState({\n                loading: false\n              });\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _this.state = {\n      loading: false\n    };\n    return _this;\n  } // 点击保存\n\n\n  _createClass(ConfirmPlanMessage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          baseInfo = _this$props2.baseInfo,\n          selectedTemplate = _this$props2.selectedTemplate,\n          selectedServiceTickets = _this$props2.selectedServiceTickets,\n          hidden = _this$props2.hidden;\n      var loading = this.state.loading;\n\n      if (!baseInfo || !selectedTemplate || !selectedServiceTickets || !selectedServiceTickets.length) {\n        return null;\n      }\n\n      var no = selectedTemplate.no,\n          templateName = selectedTemplate.name,\n          industries = selectedTemplate.industries,\n          suggestionDays = selectedTemplate.suggestionDays,\n          createdAt = selectedTemplate.createdAt;\n      var purpose = baseInfo.purpose,\n          introduction = baseInfo.introduction,\n          highlights = baseInfo.highlights,\n          remarks = baseInfo.remarks;\n      return React.createElement(StepContainer, {\n        style: hidden ? {\n          display: 'none'\n        } : {}\n      }, React.createElement(StepTitle, null, \"\\u8BF7\\u786E\\u8BA4\\u5B66\\u4E60\\u8BA1\\u5212\\u4FE1\\u606F\"), React.createElement(ContentWrapper, null, React.createElement(BlockTitle, null, \"\\u5B66\\u4E60\\u8BA1\\u5212\\u6A21\\u7248\"), React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u6A21\\u7248ID\\uFF1A\"), React.createElement(FlexItemText, null, no)), React.createElement(FlexItem, {\n        style: {\n          flex: 2\n        }\n      }, React.createElement(FlexItemTitle, null, \"\\u5BF9\\u5185\\u6A21\\u7248\\u540D\\u79F0\\uFF1A\"), React.createElement(FlexItemText, null, templateName))), React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u884C\\u4E1A\\uFF1A\"), React.createElement(FlexItemText, null, getIndustryText(industries))), React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u5EFA\\u8BAE\\u5929\\u6570\\uFF1B\"), React.createElement(FlexItemText, null, suggestionDays)), React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\"), React.createElement(FlexItemText, null, format(createdAt, 'YYYY/MM/DD HH:mm')))), React.createElement(BlockTitle, null, \"\\u5B66\\u4E60\\u8BA1\\u5212\\u57FA\\u672C\\u4FE1\\u606F\"), React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u8BA1\\u5212\\u76EE\\u6807\\uFF1A\"), React.createElement(FlexItemText, null, purpose))), React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u76EE\\u6807\\u7B80\\u4ECB\\uFF1A\"), React.createElement(FlexItemText, null, introduction))), React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u8BA1\\u5212\\u4EAE\\u70B9\\uFF1A\"), React.createElement(FlexItemText, null, highlights))), React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u5BF9\\u5185\\u5907\\u6CE8\\uFF1A\"), React.createElement(FlexItemText, null, remarks))), selectedServiceTickets && React.createElement(BlockTitle, null, \"\\u670D\\u52A1\\u5355\"), selectedServiceTickets.map(function (serviceTicket, index) {\n        var serviceTicketNo = serviceTicket.serviceTicketNo,\n            servicePlan = serviceTicket.servicePlan,\n            sheetCreatedAt = serviceTicket.createdAt,\n            isValid = serviceTicket.isValid,\n            creator = serviceTicket.creator;\n        return React.createElement(FLexContainer, {\n          key: serviceTicket.id\n        }, selectedServiceTickets.length > 1 && React.createElement(NumberText, null, index + 1, \".\"), React.createElement(FLexContainer, {\n          style: {\n            width: '95%'\n          }\n        }, React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u670D\\u52A1\\u5355ID\\uFF1A\"), React.createElement(FlexItemText, null, serviceTicketNo)), React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u884C\\u4E1A\\uFF1A\"), servicePlan.industry && servicePlan.industry.name), React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u670D\\u52A1\\u5355\\u72B6\\u6001\\uFF1A\"), React.createElement(FlexItemText, null, isValid ? React.createElement(_Badge, {\n          color: 'green',\n          text: '有效'\n        }) : React.createElement(_Badge, {\n          color: '#ccc',\n          text: '无效'\n        })))), React.createElement(FLexContainer, null, React.createElement(FlexItem, null, React.createElement(FlexItemTitle, null, \"\\u7ECF\\u529E\\u4EBA\\uFF1A\"), React.createElement(FlexItemText, null, creator.account ? getPersonName(creator.account, 'name-nickname') : '--')), React.createElement(FlexItem, {\n          style: {\n            flex: 2\n          }\n        }, React.createElement(FlexItemTitle, null, \"\\u751F\\u6210\\u65E5\\u671F\\uFF1A\"), React.createElement(FlexItemText, null, format(sheetCreatedAt, 'YYYY/MM/DD HH:mm'))))));\n      })), React.createElement(ButtonsWrapper, null, React.createElement(_Button, {\n        onClick: this.props.lastStep,\n        style: InLineStyle.LeftButton,\n        disabled: loading\n      }, \"\\u4E0A\\u4E00\\u6B65\"), React.createElement(ApolloConsumer, null, function (client) {\n        _this2.client = client;\n        return React.createElement(_Button, {\n          onClick: _this2.onClickCreate,\n          type: \"primary\",\n          loading: loading\n        }, \"\\u5B8C\\u6210\\u5E76\\u521B\\u5EFA\");\n      })));\n    }\n  }]);\n\n  return ConfirmPlanMessage;\n}(React.Component);\n\nexport default ConfirmPlanMessage;\nvar ContentWrapper = styled.div.withConfig({\n  displayName: \"ConfirmPlan__ContentWrapper\",\n  componentId: \"sc-1xwm36w-0\"\n})([\"width:80%;margin-bottom:28px;\"]);\nvar BlockTitle = styled.div.withConfig({\n  displayName: \"ConfirmPlan__BlockTitle\",\n  componentId: \"sc-1xwm36w-1\"\n})([\"margin-top:32px;margin-bottom:16px;font-size:14px;line-height:22px;color:rgba(0,0,0,0.85);\"]);\nvar FLexContainer = styled.div.withConfig({\n  displayName: \"ConfirmPlan__FLexContainer\",\n  componentId: \"sc-1xwm36w-2\"\n})([\"display:flex;flex-wrap:wrap;width:100%;\"]);\nvar FlexItem = styled.div.withConfig({\n  displayName: \"ConfirmPlan__FlexItem\",\n  componentId: \"sc-1xwm36w-3\"\n})([\"display:flex;align-items:flex-start;flex:1;margin-bottom:16px;font-size:14px;line-height:22px;\"]);\nvar FlexItemTitle = styled.div.withConfig({\n  displayName: \"ConfirmPlan__FlexItemTitle\",\n  componentId: \"sc-1xwm36w-4\"\n})([\"color:rgba(0,0,0,0.25);white-space:nowrap;\"]);\nvar FlexItemText = styled.div.withConfig({\n  displayName: \"ConfirmPlan__FlexItemText\",\n  componentId: \"sc-1xwm36w-5\"\n})([\"color:rgba(0,0,0,0.65);\"]);\nvar NumberText = styled.div.withConfig({\n  displayName: \"ConfirmPlan__NumberText\",\n  componentId: \"sc-1xwm36w-6\"\n})([\"width:10px;margin-right:10px;color:rgba(0,0,0,0.25);\"]);\nvar InLineStyle = {\n  Select: {\n    width: '500px',\n    lineHeight: '56px'\n  },\n  LeftButton: {\n    marginRight: '12px'\n  }\n};","map":null,"metadata":{},"sourceType":"module"}