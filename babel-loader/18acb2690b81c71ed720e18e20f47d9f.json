{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport FileUpload from '../../../../components/FileUpload';\nimport NumberInput from '../../../../components/Input/NumberInput';\nimport ZhiWenSelect from '../../../../components/Select/ZhiWenSelect';\nimport ShadowedTitle from '../../../../components/ShadowedTitle';\nimport { FooterWrapper, HiddenWrapper, LabelDescription, LabelWrapper } from '../CSSComponent';\nvar RadioGroup = _Radio.Group;\nvar RangePicker = _DatePicker.RangePicker;\nvar TextArea = _Input.TextArea;\nvar InLineStyle = {\n  Select: {\n    width: '500px',\n    lineHeight: '56px'\n  },\n  LeftButton: {\n    marginRight: '12px'\n  }\n};\nexport var BasicInfoWrapper = styled.div.withConfig({\n  displayName: \"BasicInfo__BasicInfoWrapper\",\n  componentId: \"sc-17s5bs6-0\"\n})([\"display:flex;align-items:center;flex:1;flex-direction:column;height:100%;min-width:320px;font-size:14px;.ant-form-item-control{line-height:32px;}\"]);\nvar StyledSelect = styled(ZhiWenSelect).withConfig({\n  displayName: \"BasicInfo__StyledSelect\",\n  componentId: \"sc-17s5bs6-1\"\n})([\"width:165px;height:32px;margin-left:8px;\"]);\nvar StyledRadio = styled(_Radio).withConfig({\n  displayName: \"BasicInfo__StyledRadio\",\n  componentId: \"sc-17s5bs6-2\"\n})([\"display:flex;align-items:center;height:32px;margin-bottom:8px;font-size:14px;\"]);\nvar RadioContainer = styled.div.withConfig({\n  displayName: \"BasicInfo__RadioContainer\",\n  componentId: \"sc-17s5bs6-3\"\n})([\"display:flex;font-size:14px;line-height:32px;\"]);\nvar ServiceMonth = styled(NumberInput).withConfig({\n  displayName: \"BasicInfo__ServiceMonth\",\n  componentId: \"sc-17s5bs6-4\"\n})([\"width:223px;height:32px;margin:0 8px 0;\"]);\nvar StyledRangePicker = styled(RangePicker).withConfig({\n  displayName: \"BasicInfo__StyledRangePicker\",\n  componentId: \"sc-17s5bs6-5\"\n})([\"width:427px;margin-left:8px;\"]);\nvar Line = styled.div.withConfig({\n  displayName: \"BasicInfo__Line\",\n  componentId: \"sc-17s5bs6-6\"\n})([\"width:768px;height:1px;margin-top:20px;background:#e1e1e8;\"]);\nvar ChannelInput = styled(_Input).withConfig({\n  displayName: \"BasicInfo__ChannelInput\",\n  componentId: \"sc-17s5bs6-7\"\n})([\"width:165px;height:32px;margin-left:8px;\"]);\nvar FileContainer = styled.div.withConfig({\n  displayName: \"BasicInfo__FileContainer\",\n  componentId: \"sc-17s5bs6-8\"\n})([\"width:529px;\"]);\nvar spaceBetween = 'space-between';\nexport var ConfigureInfo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ConfigureInfo, _Component);\n\n  function ConfigureInfo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ConfigureInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ConfigureInfo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      ServiceMonth: 12,\n      ServiceCycleType: true,\n      FreezingPeriodType: true,\n      ResultsChannelsType: true,\n      attachments: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"RadioChange\", function (e) {\n      _this.setState({\n        ServiceCycleType: e.target.value\n      }, function () {\n        var validateFields = _this.props.form.validateFields;\n\n        if (_this.state.ServiceCycleType) {\n          validateFields(['service', 'freeze'], {\n            force: true\n          }, function () {\n            return;\n          });\n        } else {\n          validateFields(['servicePeriod', 'freeze'], {\n            force: true\n          }, function () {\n            return;\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"RadioFreezingChange\", function (e) {\n      _this.setState({\n        FreezingPeriodType: e.target.value\n      }, function () {\n        var validateFields = _this.props.form.validateFields;\n\n        if (_this.state.FreezingPeriodType) {\n          validateFields(['freeze'], {\n            force: true\n          }, function () {\n            return;\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"RadioChannelsChange\", function (e) {\n      _this.setState({\n        ResultsChannelsType: e.target.value\n      }, function () {\n        var validateFields = _this.props.form.validateFields;\n\n        if (_this.state.ResultsChannelsType) {\n          validateFields(['otherChannel'], {\n            force: true\n          }, function () {\n            return;\n          });\n        } else {\n          validateFields(['channelId'], {\n            force: true\n          }, function () {\n            return;\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFreezeCancel\", function (v) {\n      if (v && !v.length) {\n        var validateFields = _this.props.form.validateFields;\n\n        if (_this.state.FreezingPeriodType) {\n          validateFields(['freeze'], {\n            force: true\n          }, function () {\n            return;\n          });\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkFreeze\", function (_rule, _value, callback) {\n      var getFieldValue = _this.props.form.getFieldValue;\n      var service = getFieldValue('service');\n      var freeze = getFieldValue('freeze');\n\n      if (!_this.state.FreezingPeriodType) {\n        if (!freeze || !freeze.length) {\n          callback('当前字段不可为空');\n        }\n\n        if (!!freeze && !!service) {\n          var freezeStartAt = freeze && freeze[0];\n          var freezeEndAt = freeze && freeze[1];\n          var serviceStartAt = service && service[0];\n          var serviceEndAt = service && service[1];\n\n          if (!_this.state.ServiceCycleType && (freezeStartAt && freezeStartAt.isBefore(serviceStartAt, 'day') || serviceEndAt.isBefore(freezeEndAt, 'day'))) {\n            callback('冻结期间必须在服务期间内');\n          }\n        }\n      }\n\n      callback();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkServicePeriod\", function (_rule, _value, callback) {\n      setTimeout(function () {\n        var getFieldValue = _this.props.form.getFieldValue;\n        var servicePeriod = getFieldValue('servicePeriod');\n\n        if (_this.state.ServiceCycleType && !servicePeriod) {\n          callback('');\n        }\n\n        callback();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkService\", function (_rule, _value, callback) {\n      setTimeout(function () {\n        var _this$props$form = _this.props.form,\n            getFieldValue = _this$props$form.getFieldValue,\n            validateFieldsAndScroll = _this$props$form.validateFieldsAndScroll;\n        var service = getFieldValue('service');\n\n        if (!_this.state.ServiceCycleType && (!service || !service.length)) {\n          callback('当前字段不可为空');\n        } else {\n          validateFieldsAndScroll(['freeze'], {\n            force: true\n          }, function () {\n            return;\n          });\n        }\n\n        callback();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkChannelId\", function (_rule, _value, callback) {\n      var getFieldValue = _this.props.form.getFieldValue;\n      var channelId = getFieldValue('channelId');\n\n      if (_this.state.ResultsChannelsType && !channelId) {\n        callback('请选择');\n      }\n\n      callback();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkOtherChannel\", function (_rule, _value, callback) {\n      var getFieldValue = _this.props.form.getFieldValue;\n      var otherChannel = getFieldValue('otherChannel');\n\n      if (!_this.state.ResultsChannelsType && !otherChannel) {\n        callback('请输入');\n      }\n\n      callback();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"chooseFiles\", function (data) {\n      var FileList = data.map(function (item) {\n        return {\n          url: item.response,\n          filename: item.name,\n          size: item.size\n        };\n      });\n\n      _this.setState({\n        attachments: FileList\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickNextStep\", function () {\n      _this.props.form.validateFieldsAndScroll({\n        force: true\n      }, function (err, fieldsValue) {\n        if (!err) {\n          var _this$state = _this.state,\n              ServiceCycleType = _this$state.ServiceCycleType,\n              FreezingPeriodType = _this$state.FreezingPeriodType,\n              ResultsChannelsType = _this$state.ResultsChannelsType,\n              attachments = _this$state.attachments;\n          var servicePeriod = fieldsValue.servicePeriod,\n              service = fieldsValue.service,\n              serviceTicketRemarks = fieldsValue.serviceTicketRemarks,\n              otherChannel = fieldsValue.otherChannel,\n              freeze = fieldsValue.freeze,\n              channelId = fieldsValue.channelId;\n\n          _this.props.changeCreateData({\n            isPrompt: ServiceCycleType,\n            servicePeriod: servicePeriod,\n            serviceStartAt: !ServiceCycleType ? service && service[0].format() : undefined,\n            serviceEndAt: !ServiceCycleType ? service && service[1].format() : undefined,\n            hasFreezeDuration: !FreezingPeriodType,\n            freezeStartAt: !FreezingPeriodType ? freeze && freeze[0].format() : undefined,\n            freezeEndAt: !FreezingPeriodType ? freeze && freeze[1].format() : undefined,\n            channelId: ResultsChannelsType ? channelId : undefined,\n            otherChannel: !ResultsChannelsType ? otherChannel : undefined,\n            attachments: attachments,\n            serviceTicketRemarks: serviceTicketRemarks\n          }, _this.props.goNextStep);\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ConfigureInfo, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var _this$state2 = this.state,\n          ServiceCycleType = _this$state2.ServiceCycleType,\n          FreezingPeriodType = _this$state2.FreezingPeriodType,\n          ResultsChannelsType = _this$state2.ResultsChannelsType;\n      return React.createElement(HiddenWrapper, {\n        style: !this.props.show ? {\n          display: 'none'\n        } : {}\n      }, React.createElement(_Form, null, React.createElement(BasicInfoWrapper, null, React.createElement(ShadowedTitle, {\n        text: \"\\u670D\\u52A1\\u671F\",\n        style: {\n          margin: '44px 0',\n          width: 64\n        }\n      }), React.createElement(_Form.Item, {\n        label: \"\\u670D\\u52A1\\u671F\",\n        colon: false,\n        style: {\n          width: '545px',\n          marginBottom: 0\n        }\n      }), React.createElement(RadioGroup, {\n        value: ServiceCycleType,\n        onChange: this.RadioChange,\n        style: {\n          marginBottom: 32\n        }\n      }, React.createElement(StyledRadio, {\n        value: true\n      }, React.createElement(RadioContainer, null, \"\\u652F\\u4ED8\\u5B8C\\u6210\\u540E\\u7ACB\\u5373\\u5F00\\u59CB\\u670D\\u52A1\\uFF0C\\u670D\\u52A1\\u5468\\u671F\\u5171\", React.createElement(_Form.Item, {\n        style: {\n          height: '30px',\n          marginBottom: 0\n        }\n      }, getFieldDecorator('servicePeriod', {\n        initialValue: this.props.data.servicePeriod,\n        rules: [{\n          validator: this.checkServicePeriod\n        }]\n      })(React.createElement(ServiceMonth, {\n        min: 1,\n        max: 48,\n        placeholder: \"\\u6B63\\u6574\\u6570\",\n        precision: 0,\n        disabled: !ServiceCycleType\n      }))), \"\\u4E2A\\u6708\")), React.createElement(RadioContainer, {\n        style: {\n          width: '100px',\n          justifyContent: spaceBetween\n        }\n      }, React.createElement(StyledRadio, {\n        value: false\n      }, React.createElement(RadioContainer, null, \"\\u6307\\u5B9A\\u670D\\u52A1\\u671F\")), React.createElement(_Form.Item, {\n        style: {\n          height: '30px',\n          marginBottom: 0\n        }\n      }, getFieldDecorator('service', {\n        rules: [{\n          validator: this.checkService\n        }]\n      })(React.createElement(StyledRangePicker, {\n        disabled: ServiceCycleType\n      }))))), React.createElement(_Form.Item, {\n        label: \"\\u662F\\u5426\\u6709\\u51BB\\u7ED3\\u671F\\uFF1F\",\n        colon: false,\n        style: {\n          width: '545px',\n          marginBottom: 0\n        }\n      }), React.createElement(RadioGroup, {\n        value: FreezingPeriodType,\n        onChange: this.RadioFreezingChange,\n        style: {\n          marginBottom: 32\n        }\n      }, React.createElement(RadioContainer, {\n        style: {\n          width: '545px',\n          justifyContent: spaceBetween\n        }\n      }, React.createElement(StyledRadio, {\n        value: true\n      }, \"\\u65E0\"), React.createElement(StyledRadio, {\n        value: false\n      }, React.createElement(RadioContainer, null, \"\\u6307\\u5B9A\\u51BB\\u7ED3\\u671F\")), React.createElement(_Form.Item, {\n        style: {\n          height: '30px',\n          marginBottom: 0\n        }\n      }, getFieldDecorator('freeze', {\n        rules: [{\n          validator: this.checkFreeze\n        }]\n      })(React.createElement(StyledRangePicker, {\n        style: {\n          width: 365\n        },\n        onChange: this.onFreezeCancel,\n        disabled: FreezingPeriodType\n      }))))), React.createElement(Line, null), React.createElement(ShadowedTitle, {\n        text: \"\\u6210\\u5355\\u6E20\\u9053\",\n        style: {\n          margin: '44px 0 14px',\n          width: 80\n        }\n      }), React.createElement(_Form.Item, {\n        label: \"\\u6210\\u5355\\u6E20\\u9053\",\n        colon: false,\n        style: {\n          width: '545px',\n          marginBottom: 0\n        }\n      }), React.createElement(RadioGroup, {\n        value: ResultsChannelsType,\n        onChange: this.RadioChannelsChange\n      }, React.createElement(RadioContainer, {\n        style: {\n          width: '545px',\n          justifyContent: spaceBetween\n        }\n      }, React.createElement(StyledRadio, {\n        value: true\n      }, React.createElement(RadioContainer, null, \"\\u5DF2\\u6709\\u6E20\\u9053\", React.createElement(_Form.Item, {\n        style: {\n          height: '30px',\n          marginBottom: 0\n        }\n      }, getFieldDecorator('channelId', {\n        rules: [{\n          validator: this.checkChannelId\n        }]\n      })(React.createElement(StyledSelect, {\n        style: {\n          width: '165px'\n        },\n        type: \"marketing-channel\",\n        disabled: !ResultsChannelsType\n      }))))), React.createElement(StyledRadio, {\n        value: false\n      }, React.createElement(RadioContainer, null, \"\\u5176\\u4ED6\\u6E20\\u9053\", React.createElement(_Form.Item, {\n        style: {\n          height: '30px',\n          marginBottom: 0\n        }\n      }, getFieldDecorator('otherChannel', {\n        rules: [{\n          validator: this.checkOtherChannel\n        }]\n      })(React.createElement(ChannelInput, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\",\n        disabled: ResultsChannelsType\n      }))))))), React.createElement(Line, null), React.createElement(ShadowedTitle, {\n        text: \"\\u989D\\u5916\\u4FE1\\u606F\",\n        style: {\n          margin: '44px 0 14px',\n          width: 80\n        }\n      }), React.createElement(_Form.Item, {\n        label: React.createElement(LabelWrapper, null, React.createElement(\"label\", null, \"\\u5176\\u4ED6\\u9644\\u4EF6\"), React.createElement(LabelDescription, null, \"\\u4F8B\\u5982\\uFF0C\\u5B66\\u5458\\u7B80\\u5386\\u3001\\u5B66\\u5458\\u65B9\\u6848\\u7B49\\u5176\\u4ED6\\u9644\\u4EF6\")),\n        colon: false\n      }, React.createElement(FileContainer, null, React.createElement(FileUpload, {\n        onChangeValue: this.chooseFiles\n      }))), React.createElement(_Form.Item, {\n        label: React.createElement(LabelWrapper, null, React.createElement(\"label\", null, \"\\u5BF9\\u5916\\u5907\\u6CE8\"), React.createElement(LabelDescription, null, \"\\u5BF9\\u5916\\u516C\\u5F00\\u4FE1\\u606F\")),\n        colon: false\n      }, getFieldDecorator('serviceTicketRemarks')(React.createElement(TextArea, {\n        style: {\n          width: 529\n        },\n        rows: 3,\n        placeholder: \"\\u5728\\u548C\\u5B66\\u5458\\u786E\\u8BA4\\u670D\\u52A1\\u65F6\\uFF0C\\u627F\\u8BFA\\u7ED9\\u5B66\\u5458\\u7684\\u5185\\u5BB9\\u3002\\u53EF\\u80FD\\u662F\\u53E3\\u5934\\u627F\\u8BFA\\uFF0C\\u6216\\u8BA2\\u5355\\u65E0\\u6CD5\\u5305\\u542B\\u7684\\u5185\\u5BB9\\u7B49\\u3002\"\n      }))), React.createElement(FooterWrapper, null, React.createElement(_Button, {\n        onClick: this.props.goLastStep,\n        style: InLineStyle.LeftButton\n      }, \"\\u4E0A\\u4E00\\u6B65\"), React.createElement(_Button, {\n        type: \"primary\",\n        disabled: false,\n        onClick: this.onClickNextStep\n      }, \"\\u4E0B\\u4E00\\u6B65\")))));\n    }\n  }]);\n\n  return ConfigureInfo;\n}(Component);\nexport default _Form.create()(ConfigureInfo);","map":null,"metadata":{},"sourceType":"module"}