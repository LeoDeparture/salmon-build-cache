{"ast":null,"code":"import \"antd/lib/spin/style\";\nimport _Spin from \"antd/lib/spin\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport SortableModal from '../../../components/SortableModal';\nimport TableFooter from '../../../components/Table/TableFooter';\nimport { FlexCenterColumn, FlexContent, FlexContentCenter, FlexContentCenterV, FlexDisplay } from '../../../lib/commonCss';\nimport CONFIG from '../../../lib/config';\nimport { handleConfirmOtherError } from '../../../lib/handleError';\nimport ModalContent from '../components/modalForm';\nimport { createCourseCategory, deleteCourseCategory, disableCourseCategory, enableCourseCategory, listCourseCategories, updateCourseCategory, updateManyCourseCategoryPosition } from './MutationListCourseCategories';\nimport ListCourseCategoriesWithPagination, { listCourseCategoriesWithPagination } from './QueryListCourseCategoriesWithPagination';\nvar getDataNumber = 20;\n\nvar ListCourseCategory =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ListCourseCategory, _React$Component);\n\n  function ListCourseCategory() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ListCourseCategory);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ListCourseCategory)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      mutationLoading: false,\n      childrenType: null,\n      itemName: null,\n      modalType: '',\n      parent: '有',\n      loading: false,\n      levelText: '',\n      parentId: null,\n      listItemId: null,\n      visible: false,\n      selectedId: null,\n      pageInfo: {\n        endCursor: null,\n        hasNextPage: null,\n        startCursor: null\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"variablesLevel0\", {\n      CourseCategoriesInput: {\n        after: _this.state.pageInfo.endCursor,\n        first: getDataNumber,\n        orderBy: 'sort_ASC',\n        where: {\n          isDeleted: false,\n          level: 0,\n          status: {\n            key_not: 'REMOVED'\n          },\n          type: {\n            key: _this.props.type\n          }\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"otherVariables\", {\n      CourseCategoriesInput: {\n        after: _this.state.pageInfo.endCursor,\n        first: getDataNumber,\n        orderBy: 'sort_ASC',\n        where: {\n          isDeleted: false,\n          status: {\n            key_not: 'REMOVED'\n          },\n          parent: {\n            id: _this.props.parentId\n          },\n          type: {\n            key: _this.props.type\n          }\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillReceiveProps\", function (nextProps) {\n      var showContentType = nextProps.levelData.showContentType;\n      var parentId = nextProps.parentId;\n\n      if (navigator.onLine) {\n        if (_this.props.parentId !== parentId) {\n          _this.setState({\n            parentId: parentId\n          });\n\n          _this.otherVariables.CourseCategoriesInput.where.parent = {\n            id: parentId\n          };\n\n          if (_this.refetch && showContentType === 'NORMAL') {\n            _this.refetch();\n          }\n        }\n\n        return;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      var titleBut = ['一级分类', '二级分类', '三级分类'];\n      var level = _this.props.level;\n\n      _this.setState({\n        levelText: titleBut[level]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"queryMore\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$state, pageInfo, loading, variable, CourseCategoriesInput, variables;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$state = _this.state, pageInfo = _this$state.pageInfo, loading = _this$state.loading;\n              variable = _this.props.variable;\n\n              if (loading) {\n                _context.next = 10;\n                break;\n              }\n\n              _this.setState({\n                loading: true\n              });\n\n              CourseCategoriesInput = _objectSpread({}, _this[variable].CourseCategoriesInput, {\n                after: pageInfo.endCursor\n              });\n              variables = _objectSpread({}, _this[variable], {\n                CourseCategoriesInput: CourseCategoriesInput\n              });\n\n              if (!pageInfo.hasNextPage) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 9;\n              return _this.fetchMore({\n                updateQuery: function updateQuery(prev, _ref2) {\n                  var fetchMoreResult = _ref2.fetchMoreResult;\n\n                  if (!fetchMoreResult) {\n                    return prev;\n                  }\n\n                  var prevData = prev.listCourseCategoriesWithPagination.edges;\n                  var fetchResult = fetchMoreResult.listCourseCategoriesWithPagination.edges;\n                  fetchMoreResult.listCourseCategoriesWithPagination.edges = [].concat(_toConsumableArray(prevData), _toConsumableArray(fetchResult));\n                  return fetchMoreResult;\n                },\n                variables: variables\n              }).then(function (result1) {\n                if (result1.data) {\n                  _this.setState({\n                    loading: false\n                  });\n                }\n              });\n\n            case 9:\n              return _context.abrupt(\"return\");\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFetchSortList\", function () {\n      var variableName = _this.props.variable;\n      var variable = JSON.parse(_JSON$stringify(_this[variableName]));\n      variable.CourseCategoriesInput.first = undefined;\n      return _this.client.query({\n        fetchPolicy: 'network-only',\n        query: listCourseCategoriesWithPagination,\n        variables: variable\n      }).then(function (res) {\n        var data = res.data.listCourseCategoriesWithPagination.edges;\n        return data.map(function (item) {\n          return item.node;\n        });\n      }).catch(function (e) {\n        if (handleConfirmOtherError(e)) {\n          _message.error('操作失败');\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSortConfirm\", function (sortItems) {\n      var variable = {\n        input: {\n          idPositions: sortItems\n        }\n      };\n      return _this.client.mutate({\n        variables: variable,\n        mutation: updateManyCourseCategoryPosition\n      }).then(function (res) {\n        _this.refetch();\n\n        _message.success('已成功排序');\n\n        return res;\n      }).catch(function (e) {\n        if (handleConfirmOtherError(e)) {\n          _message.error('操作失败');\n        }\n\n        return _Promise.reject(e);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSort\", function () {\n      _this.sortModal.showPop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRef\", function (child) {\n      _this.sortModal = child;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createCourseCategory\", function (levelText) {\n      _this.setState({\n        levelText: levelText,\n        modalType: 'create',\n        visible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"enableOrDisableListItem\", function (id, action) {\n      var name = action.name,\n          mutation = action.mutation,\n          stringAction = action.stringAction;\n\n      var filterFun = function filterFun(data, result2) {\n        data.listCourseCategoriesWithPagination.edges.forEach(function (item) {\n          if (item.node.id === result2.data[stringAction].id) {\n            item.node.status = result2.data[stringAction].status;\n          }\n        });\n        return data;\n      };\n\n      _message.loading(\"\\u6B63\\u5728\".concat(name, \"...\"), 0);\n\n      var variables = {\n        input: {\n          id: id\n        }\n      };\n\n      _this.mutations(mutation, variables, filterFun, name);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteCourseCategory\", function (id, action) {\n      var name = action.name,\n          mutation = action.mutation;\n\n      var filterFun = function filterFun(data, result2) {\n        var edges = data.listCourseCategoriesWithPagination.edges.filter(function (item) {\n          return item.node.id !== result2.data.deleteCourseCategory.id;\n        });\n        return {\n          listCourseCategoriesWithPagination: _objectSpread({}, data.listCourseCategoriesWithPagination, {\n            edges: edges\n          })\n        };\n      };\n\n      _message.loading('正在删除...', 0);\n\n      var variables = {\n        input: {\n          id: id\n        }\n      };\n\n      _this.mutations(mutation, variables, filterFun, name);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showModal\", function (id, action, e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var name = action.name,\n          stringAction = action.stringAction;\n      var modalObject = _this.props.modalObject[stringAction]; // 上线， 下线，创建分类， 编辑， 移除\n\n      if (name === '上线' || name === '下线') {\n        modalObject.onOk = _this.enableOrDisableListItem.bind(_assertThisInitialized(_this), id, action);\n\n        _Modal.confirm(modalObject);\n      } // 移除\n\n\n      if (name === '移除') {\n        // modalObject.okButtonProps = { loading: confirmLoading };\n        modalObject.onOk = _this.deleteCourseCategory.bind(_assertThisInitialized(_this), id, action);\n\n        _Modal.confirm(modalObject);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"footer\", function () {\n      return _this.state.pageInfo.hasNextPage && React.createElement(FooterWrap, null, React.createElement(TableFooter, {\n        isLoading: _this.state.loading,\n        onClickLink: _this.queryMore\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"editListItem\", function (id, childrenType, name, parent, e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var hasParent = parent === null ? '无' : '有';\n\n      _this.setState({\n        childrenType: childrenType,\n        itemName: name,\n        listItemId: id,\n        modalType: 'edit',\n        parent: hasParent,\n        visible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickListItem\", function (id, childrenType, isDelete) {\n      var _this$props = _this.props,\n          level = _this$props.level,\n          getValue = _this$props.getValue;\n\n      if (!navigator.onLine) {\n        _message.destroy();\n\n        _message.error(CONFIG.txt.networkError);\n\n        return;\n      } // 网络不好时， parentId 为 null\n\n\n      var parentId = navigator.onLine ? id : null;\n\n      _this.setState({\n        selectedId: id\n      });\n\n      var showContentType = isDelete ? 'EMPTY' : childrenType ? 'MENTION' : 'NORMAL';\n      var levelHasChildren = {\n        parentId: null,\n        endCursor: null,\n        index: 1,\n        childrenType: childrenType,\n        showContentType: showContentType\n      };\n\n      if (level === 0) {\n        if (!childrenType) {\n          var level1 = _objectSpread({}, levelHasChildren, {\n            parentId: parentId\n          });\n\n          var level2 = _objectSpread({}, levelHasChildren, {\n            showContentType: 'EMPTY'\n          });\n\n          getValue('level2', level2);\n          getValue('level1', level1);\n        } else {\n          var _level = levelHasChildren;\n\n          var _level2 = _objectSpread({}, levelHasChildren);\n\n          getValue('level2', _level2);\n          getValue('level1', _level);\n        }\n\n        return;\n      }\n\n      if (level === 1) {\n        if (!childrenType) {\n          var _level3 = _objectSpread({}, levelHasChildren, {\n            parentId: parentId,\n            index: 2\n          });\n\n          getValue('level2', _level3);\n        } else {\n          var _level4 = _objectSpread({}, levelHasChildren, {\n            index: 2\n          });\n\n          getValue('level2', _level4);\n        }\n\n        return;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ListItem\", function () {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var i = arguments.length > 1 ? arguments[1] : undefined;\n      var id = node.id,\n          name = node.name,\n          status = node.status,\n          childrenType = node.childrenType,\n          parent = node.parent;\n      var selectedId = _this.state.selectedId;\n      var badge = {\n        未上线: 'warning',\n        已上线: 'success',\n        已下线: 'default'\n      };\n      var action = status.name === '未上线' || status.name === '已下线' ? {\n        mutation: enableCourseCategory,\n        name: '上线',\n        stringAction: 'enableCourseCategory'\n      } : {\n        mutation: disableCourseCategory,\n        name: '下线',\n        stringAction: 'disableCourseCategory'\n      };\n      return React.createElement(ListItem, {\n        key: id,\n        status: selectedId === id,\n        onClick: _this.onClickListItem.bind(_assertThisInitialized(_this), id, childrenType, false)\n      }, React.createElement(FlexContentCenterV, null, React.createElement(ListIndex, null, i + 1), React.createElement(_Badge, {\n        status: badge[status.name],\n        style: {\n          lineHeight: 0\n        }\n      }), React.createElement(\"span\", {\n        style: _objectSpread({}, badgeStyle, {\n          wordBreak: 'keep-all'\n        })\n      }, name)), React.createElement(ItemRightBox, null, React.createElement(ButCommon, {\n        style: {\n          color: '#5C86FB'\n        },\n        onClick: _this.editListItem.bind(_assertThisInitialized(_this), id, childrenType, name, parent)\n      }, \"\\u7F16\\u8F91\"), React.createElement(ButCommon, {\n        style: {\n          color: '#5C86FB'\n        },\n        onClick: _this.showModal.bind(_assertThisInitialized(_this), id, action)\n      }, action.name), React.createElement(ButCommon, {\n        style: {\n          color: '#F5212D'\n        },\n        onClick: _this.showModal.bind(_assertThisInitialized(_this), id, {\n          mutation: deleteCourseCategory,\n          name: '移除',\n          stringAction: 'deleteCourseCategory'\n        })\n      }, \"\\u79FB\\u9664\"), !childrenType && React.createElement(_Icon, {\n        type: \"right\"\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTitle\", function (length) {\n      var levelData = _this.props.levelData;\n      var levelText = _this.state.levelText;\n      var disableAddCategory = levelData.showContentType !== 'NORMAL'; // showMessageIndex === level; // showMessageIndex !== null && !length;\n\n      return React.createElement(ListTile, null, React.createElement(FlexDisplay, null, React.createElement(DetailCommonP, null, \"#\"), React.createElement(DetailCommonP, {\n        style: {\n          margin: '0 12px'\n        }\n      }, \"\\u72B6\\u6001\"), React.createElement(DetailCommonP, null, levelText)), React.createElement(FlexDisplay, null, React.createElement(_Button, {\n        size: \"small\",\n        style: {\n          fontSize: 12\n        },\n        disabled: length < 2 || disableAddCategory,\n        onClick: _this.handleSort\n      }, \"\\u6392\\u5E8F\"), React.createElement(SortableModal, {\n        onRef: _this.onRef,\n        title: levelText,\n        getListItemsHelper: _this.handleFetchSortList,\n        setListItemsHelper: _this.handleSortConfirm\n      }), React.createElement(_Button, {\n        size: \"small\",\n        disabled: disableAddCategory,\n        style: {\n          marginLeft: 8,\n          fontSize: 12\n        },\n        onClick: _this.createCourseCategory.bind(_assertThisInitialized(_this), levelText)\n      }, \"\\u521B\\u5EFA\".concat(levelText))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"content\", function (result) {\n      var showContentType = _this.props.levelData.showContentType;\n      var _this$state2 = _this.state,\n          mutationLoading = _this$state2.mutationLoading,\n          childrenType = _this$state2.childrenType,\n          itemName = _this$state2.itemName,\n          modalType = _this$state2.modalType,\n          parent = _this$state2.parent,\n          levelText = _this$state2.levelText,\n          visible = _this$state2.visible;\n\n      if (showContentType === 'EMPTY') {\n        return React.createElement(FlexCenterColumnBorderR, null);\n      }\n\n      if (showContentType === 'NORMAL') {\n        return React.createElement(FlexCenterColumnBorderR, null, _this.renderTitle(result.edges.length), React.createElement(FlexCenterColumn, {\n          style: {\n            overflowY: 'scroll'\n          }\n        }, result.edges.map(function (r, i) {\n          var node = r.node;\n\n          if (node.status.key !== 'REMOVED') {\n            return _this.ListItem(node, i);\n          } else {\n            return null;\n          }\n        })), _this.footer(), React.createElement(ModalContent, {\n          mutationLoading: mutationLoading,\n          hasSameName: _this.hasSameName,\n          setStateValue: _this.setStateValue,\n          itemChildrenType: childrenType,\n          itemName: itemName,\n          getValue: _this.getValue,\n          type: modalType,\n          parent: parent,\n          title: levelText,\n          visible: visible\n        }));\n      }\n\n      if (showContentType === 'MENTION') {\n        return React.createElement(FlexCenterColumnBorderR, null, _this.renderTitle(0), React.createElement(FlexContentCenter, null, React.createElement(DetailCommonP, {\n          style: {\n            whiteSpace: 'normal'\n          }\n        }, \"\\u7531\\u4E8E\\u4E0A\\u7EA7\\u5206\\u7C7B\\u5DF2\\u8BBE\\u7F6E\\u4E3A\\u53EF\\u5173\\u8054\\u8BFE\\u7A0B\\uFF0C\\u65E0\\u6CD5\\u7EE7\\u7EED\\u521B\\u5EFA\\u6B64\\u7EA7\\u5206\\u7C7B\")));\n      }\n\n      return null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setListItemId\", function (data) {\n      _this.refetch();\n\n      var result = data.createCourseCategory;\n\n      _this.onClickListItem(result.id, result.childrenType, false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mutations\", function (mutationName, variables, filterFun, name) {\n      var queryVariable = _this[_this.props.variable];\n\n      _this.client.mutate({\n        mutation: mutationName,\n        update: function update(proxy, result2) {\n          var data = proxy.readQuery({\n            query: listCourseCategoriesWithPagination,\n            variables: queryVariable\n          });\n          var data2 = filterFun(data, result2);\n          proxy.writeQuery({\n            data: data2,\n            query: listCourseCategoriesWithPagination,\n            variables: queryVariable\n          });\n        },\n        variables: variables\n      }).then(function (result) {\n        if (result.data) {\n          _message.destroy();\n\n          if (name === '创建' || name === '编辑此') {\n            if (name === '创建') {\n              _this.setListItemId(result.data);\n            }\n\n            _this.setState({\n              visible: false,\n              itemName: null,\n              mutationLoading: false\n            });\n\n            _message.success(\"\\u5DF2\\u6210\\u529F\".concat(name, \"\\u5206\\u7C7B\"));\n\n            return;\n          }\n\n          if (name === '移除') {\n            _this.onClickListItem(null, false, true);\n          }\n\n          _message.success(\"\\u5DF2\\u6210\\u529F\".concat(name, \"\\u6B64\\u5206\\u7C7B\"));\n        }\n      }).catch(function (error) {\n        if (name === '创建' || name === '编辑此') {\n          _this.setState({\n            mutationLoading: false\n          });\n        }\n\n        if (name === '移除' && error.graphQLErrors[0] && error.graphQLErrors[0].data) {\n          if (error.graphQLErrors[0].data.code === 'HasOffspring') {\n            var modalObject = _this.props.modalObject.deleteButHasChildren;\n\n            modalObject.onOk = function () {\n              _message.destroy();\n            };\n\n            _Modal.warning(modalObject);\n          }\n\n          if (error.graphQLErrors[0].data.code === 'HasCourse') {\n            var _modalObject = _this.props.modalObject.deleteConnectLesson;\n\n            _modalObject.onOk = function () {\n              _message.destroy();\n            };\n\n            _Modal.warning(_modalObject);\n          }\n\n          return;\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getValue\",\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(obj) {\n        var name, childrenType, parentId, modalType, variable, filterFun, _variable, _filterFun;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                name = obj.name, childrenType = obj.childrenType;\n                parentId = _this.props.levelData.parentId;\n                modalType = _this.state.modalType; // 创建分类\n\n                if (!(modalType === 'create')) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                variable = {\n                  input: {\n                    childrenType: childrenType,\n                    name: name,\n                    parentId: parentId,\n                    typeId: _this.props.typeId\n                  }\n                };\n\n                filterFun = function filterFun(data, _) {\n                  return data;\n                };\n\n                _this.mutations(createCourseCategory, variable, filterFun, '创建');\n\n                return _context2.abrupt(\"return\");\n\n              case 8:\n                // 编辑分类\n                if (modalType === 'edit') {\n                  _variable = {\n                    input: {\n                      childrenType: childrenType,\n                      id: _this.state.listItemId,\n                      name: name\n                    }\n                  };\n\n                  _filterFun = function _filterFun(data, result2) {\n                    data.listCourseCategoriesWithPagination.edges.forEach(function (item) {\n                      if (item.node.id === result2.data.updateCourseCategory.id) {\n                        item.node = _objectSpread({}, item.node, result2.data.updateCourseCategory);\n                      }\n                    });\n                    return data;\n                  };\n\n                  _this.mutations(updateCourseCategory, _variable, _filterFun, '编辑此');\n                }\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"setStateValue\", function (m, n) {\n      _this.setState(_defineProperty({}, m, n));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasSameName\", function (name) {\n      var parentId = _this.props.levelData.parentId;\n      return _this.client.query({\n        fetchPolicy: 'network-only',\n        query: listCourseCategories,\n        variables: {\n          input: {\n            where: {\n              name: name,\n              type: {\n                key: _this.props.type\n              },\n              parent: parentId === null ? parentId : {\n                id: parentId\n              },\n              isDeleted: false\n            }\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"storePageInfo\", function (data) {\n      var result = data.listCourseCategoriesWithPagination;\n      var pageInfo = result.pageInfo;\n\n      if (result && result.edges.length) {\n        _this.setState({\n          pageInfo: {\n            endCursor: pageInfo.endCursor,\n            hasNextPage: pageInfo.hasNextPage,\n            startCursor: pageInfo.startCursor\n          }\n        });\n\n        if (result.edges.length && result.edges[0].node.parent !== null) {\n          var parentId = result.edges[0].node.parent.id;\n\n          _this.setState({\n            parentId: parentId\n          });\n        }\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(ListCourseCategory, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var variable = this[this.props.variable];\n      return React.createElement(ListCourseCategoriesWithPagination, {\n        onCompleted: this.storePageInfo,\n        variables: variable,\n        notifyOnNetworkStatusChange: true,\n        fetchPolicy: \"network-only\",\n        query: listCourseCategoriesWithPagination\n      }, function (_ref4) {\n        var data = _ref4.data,\n            loading = _ref4.loading,\n            error = _ref4.error,\n            client = _ref4.client,\n            fetchMore = _ref4.fetchMore,\n            refetch = _ref4.refetch;\n        _this2.refetch = refetch;\n        _this2.client = client;\n        _this2.fetchMore = fetchMore;\n\n        if (loading) {\n          return React.createElement(FlexCenterColumnBorderR, null, _this2.renderTitle(0), React.createElement(FlexContentCenter, null, React.createElement(_Spin, null)));\n        }\n\n        if (error) {\n          if (error.networkError) {\n            return React.createElement(NetworkErrorWrap, null);\n          }\n\n          return null;\n        }\n\n        var result = data.listCourseCategoriesWithPagination;\n\n        if (result) {\n          return _this2.content(result);\n        } else {\n          return React.createElement(FlexCenterColumnBorderR, null);\n        }\n      });\n    }\n  }]);\n\n  return ListCourseCategory;\n}(React.Component);\n\nexport default ListCourseCategory;\nvar ListTile = styled(FlexDisplay).withConfig({\n  displayName: \"ListCourseCategory__ListTile\",\n  componentId: \"ob6ffe-0\"\n})([\"align-items:center;justify-content:space-between;height:56px;padding:0 12px;background:#fafafa;\"]);\nvar FlexCenterColumnBorderR = styled(FlexCenterColumn).withConfig({\n  displayName: \"ListCourseCategory__FlexCenterColumnBorderR\",\n  componentId: \"ob6ffe-1\"\n})([\"border-right:1px solid #e3e3e3;\"]);\nvar ListItem = styled(FlexDisplay).withConfig({\n  displayName: \"ListCourseCategory__ListItem\",\n  componentId: \"ob6ffe-2\"\n})([\"align-items:center;justify-content:space-between;min-height:56px;padding:0 12px;cursor:pointer;background:\", \";&:hover{background:\", \";}:hover div:nth-child(2) > p{display:inline-block;}\"], function (props) {\n  return props.status ? '#DEE7FE' : '#fff';\n}, function (props) {\n  return props.status ? '#DEE7FE' : '#f7f9ff';\n});\nvar DetailCommonP = styled.p.withConfig({\n  displayName: \"ListCourseCategory__DetailCommonP\",\n  componentId: \"ob6ffe-3\"\n})([\"display:inline-block;margin:0;font-size:12px;color:#c3c3c3;white-space:nowrap;\"]);\nvar ButCommon = styled.p.withConfig({\n  displayName: \"ListCourseCategory__ButCommon\",\n  componentId: \"ob6ffe-4\"\n})([\"display:none;margin:0 8px;font-size:14px;white-space:nowrap;\"]);\nvar ListIndex = styled.p.withConfig({\n  displayName: \"ListCourseCategory__ListIndex\",\n  componentId: \"ob6ffe-5\"\n})([\"display:inline-block;margin:0 8px 0 0;font-size:14px;line-height:56px;color:#4a4a4a;white-space:nowrap;\"]);\nvar badgeStyle = {\n  display: 'inline-block',\n  maxWidth: '150px',\n  fontSize: '14px',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  verticalAlign: 'middle'\n};\nvar ItemRightBox = styled(FlexDisplay).withConfig({\n  displayName: \"ListCourseCategory__ItemRightBox\",\n  componentId: \"ob6ffe-6\"\n})([\"align-items:center;justify-content:flex-end;width:153px;\"]);\nvar NetworkErrorWrap = styled(FlexContent).withConfig({\n  displayName: \"ListCourseCategory__NetworkErrorWrap\",\n  componentId: \"ob6ffe-7\"\n})([\"justify-content:center;color:red;border-right:1px solid #e3e3e3;\"]);\nvar FooterWrap = styled(FlexDisplay).withConfig({\n  displayName: \"ListCourseCategory__FooterWrap\",\n  componentId: \"ob6ffe-8\"\n})([\"justify-content:center;padding:12px 0;\"]);","map":null,"metadata":{},"sourceType":"module"}