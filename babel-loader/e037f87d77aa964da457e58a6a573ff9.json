{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport Router from 'next/router';\nimport React from 'react';\nimport styled from 'styled-components';\nimport FilePicker from '../../../components/FilePicker';\nimport { FlexDisplay } from '../../../lib/commonCss';\nimport { addGroupCourseSlotSourceFile, deleteGroupCourseSlotSourceFile } from '../containers/MutationChangeGroupCourseSlotTutor';\nimport { ItemWarp, Title } from './TutorDetail';\nvar CategoryName = styled.div.withConfig({\n  displayName: \"AudioOrVideo__CategoryName\",\n  componentId: \"sc-12ic7ia-0\"\n})([\"overflow:hidden;font-size:14px;text-overflow:ellipsis;white-space:nowrap;\"]);\nvar TitleContent = styled(FlexDisplay).withConfig({\n  displayName: \"AudioOrVideo__TitleContent\",\n  componentId: \"sc-12ic7ia-1\"\n})([\"align-items:center;\"]);\nvar File = styled.div.withConfig({\n  displayName: \"AudioOrVideo__File\",\n  componentId: \"sc-12ic7ia-2\"\n})([\"margin-right:12px;\"]);\n\nvar AudioOrVideo =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AudioOrVideo, _React$Component);\n\n  function AudioOrVideo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AudioOrVideo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AudioOrVideo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onHandleClick\", function () {\n      _this.sendFilePop.showPop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRefSendFilePop\", function (ref) {\n      _this.sendFilePop = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDeleted\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var variables, filterFun;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                loading: true\n              });\n\n              variables = {\n                input: {\n                  id: Router.router.query.id\n                }\n              };\n\n              filterFun = function filterFun(data) {\n                data.getGroupCourseSlotById.resourceFile = null;\n                return data;\n              };\n\n              _context.next = 5;\n              return _this.props.mutations(deleteGroupCourseSlotSourceFile, variables, filterFun).then(function (result) {\n                if (result.data) {\n                  _message.success('已成功删除文件');\n\n                  _this.setState({\n                    loading: false\n                  });\n                }\n              }).catch(function () {\n                _this.setState({\n                  loading: false\n                });\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"getSelected\", function (files) {\n      var variables = {\n        input: {\n          id: Router.router.query.id,\n          resourceId: files[0].id\n        }\n      };\n\n      var filterFun = function filterFun(data, result) {\n        data.getGroupCourseSlotById.resourceFile = result.data.addGroupCourseSlotSourceFile.resourceFile;\n        return data;\n      };\n\n      _this.props.mutations(addGroupCourseSlotSourceFile, variables, filterFun);\n    });\n\n    return _this;\n  }\n\n  _createClass(AudioOrVideo, [{\n    key: \"render\",\n    value: function render() {\n      var file = this.props.data.resourceFile;\n      return React.createElement(ItemWarp, {\n        style: {\n          margin: 0,\n          flex: 0.6\n        }\n      }, React.createElement(Title, null, React.createElement(\"h4\", null, \"\\u56DE\\u653E\\u97F3/\\u89C6\\u9891\")), React.createElement(TitleContent, null, file && React.createElement(CategoryName, {\n        style: {\n          marginRight: '12px'\n        }\n      }, file.file.filename), React.createElement(File, null, React.createElement(_Button, {\n        onClick: this.onHandleClick\n      }, \"\\u9009\\u62E9\\u6587\\u4EF6\")), file && React.createElement(_Button, {\n        type: \"danger\",\n        loading: this.state.loading,\n        onClick: this.onDeleted\n      }, \"\\u5220\\u9664\")), React.createElement(FilePicker, {\n        selectType: \"single\",\n        fileType: \"audio-video-only\",\n        mode: \"select\",\n        onRef: this.onRefSendFilePop,\n        getSelected: this.getSelected\n      }));\n    }\n  }]);\n\n  return AudioOrVideo;\n}(React.Component);\n\nexport default AudioOrVideo;","map":null,"metadata":{},"sourceType":"module"}