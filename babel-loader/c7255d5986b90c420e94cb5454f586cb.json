{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport ZhiWenSelect from '../../../../components/SelectComponents/ZhiWenSelect';\nimport { FormStyle, InputPlaceHolder, lengthLimit, noTxtRequireRule, textAreaAutoSize, textAreaRule } from '../UserResumeComponent';\n\nvar ModuleForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ModuleForm, _React$Component);\n\n  function ModuleForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ModuleForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ModuleForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"updating\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!_this.updating) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                _this.updating = true;\n\n                _this.props.form.validateFieldsAndScroll(function (err, fieldsValue) {\n                  if (!err) {\n                    // 如果是更新信息, 传信息Id, 如果是创建信息, 传 cvID\n                    if (_JSON$stringify(_this.props.data) === '{}') {\n                      _Object$assign(fieldsValue, {\n                        id: _this.props.cvId\n                      });\n                    } else {\n                      _Object$assign(fieldsValue, {\n                        id: _this.props.data.id\n                      });\n                    } // 执行 mutation\n\n\n                    _this.props.updateData(_this.props.mutation, fieldsValue, _this.afterUpdate);\n                  } else {\n                    _this.updating = false;\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"afterUpdate\", function () {\n      _this.props.closeEdit();\n\n      _this.updating = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getValue\", function (type, values) {\n      _this.props.form.setFieldsValue(_defineProperty({}, type, values));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      // 数据回填\n      var _this$props$data = _this.props.data,\n          language = _this$props$data.language,\n          certificate = _this$props$data.certificate,\n          languageLevel = _this$props$data.languageLevel,\n          description = _this$props$data.description;\n      var data = {\n        certificate: certificate,\n        description: description,\n        languageId: language && language.id,\n        languageLevelId: languageLevel && languageLevel.id\n      }; // 执行回填\n\n      _this.props.form.setFieldsValue(data);\n    });\n\n    return _this;\n  }\n\n  _createClass(ModuleForm, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(_Form, {\n        onSubmit: this.handleSubmit,\n        style: FormStyle,\n        colon: false\n      }, React.createElement(_Row, {\n        gutter: 24\n      }, React.createElement(_Col, {\n        span: 8\n      }, React.createElement(_Form.Item, {\n        label: \"\\u8BED\\u79CD\"\n      }, getFieldDecorator('languageId', {\n        rules: noTxtRequireRule\n      })(React.createElement(ZhiWenSelect, {\n        type: \"language\",\n        getValue: this.getValue.bind(this, 'languageId')\n      })))), React.createElement(_Col, {\n        span: 8\n      }, React.createElement(_Form.Item, {\n        label: \"\\u719F\\u7EC3\\u7A0B\\u5EA6\"\n      }, getFieldDecorator('languageLevelId', {\n        rules: noTxtRequireRule\n      })(React.createElement(ZhiWenSelect, {\n        type: \"language-level\",\n        getValue: this.getValue.bind(this, 'languageLevelId')\n      })))), React.createElement(_Col, {\n        span: 8\n      }, React.createElement(_Form.Item, {\n        label: \"\\u8BA4\\u8BC1\"\n      }, getFieldDecorator('certificate', {\n        rules: [lengthLimit]\n      })(React.createElement(_Input, {\n        placeholder: InputPlaceHolder\n      }))))), React.createElement(_Form.Item, {\n        label: \"\\u8BF4\\u660E\"\n      }, getFieldDecorator('description', {\n        rules: textAreaRule\n      })(React.createElement(_Input.TextArea, {\n        autoSize: textAreaAutoSize,\n        placeholder: \"\\u5982\\u8BA4\\u8BC1\\u4E3A\\u6258\\u798F\\uFF0C\\u8BF7\\u586B\\u5199\\u5BF9\\u5E94\\u6210\\u7EE9\"\n      }))), React.createElement(_Form.Item, {\n        labelCol: {\n          span: 12\n        }\n      }, React.createElement(_Button, {\n        onClick: this.props.cancel\n      }, \"\\u53D6\\u6D88\"), React.createElement(_Button, {\n        disabled: this.updating,\n        style: {\n          marginLeft: 20\n        },\n        type: \"primary\",\n        htmlType: \"submit\"\n      }, \"\\u4FDD\\u5B58\")));\n    }\n  }]);\n\n  return ModuleForm;\n}(React.Component);\n\nvar EditLanguageSkill = _Form.create()(ModuleForm);\n\nexport default EditLanguageSkill;","map":null,"metadata":{},"sourceType":"module"}