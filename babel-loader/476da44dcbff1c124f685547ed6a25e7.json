{"ast":null,"code":"import \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport React from 'react';\nimport { ApolloConsumer } from 'react-apollo';\nimport styled from 'styled-components';\nimport { AvatarImage } from '../../routes/privateCourse/privateCourseAppointmentDetails/components/PrivateCourseAppointmentDetailsComponents';\nimport { listTutors } from '../../routes/tutorManagement/containers/QueryListTutors';\nvar Option = _Select.Option;\nvar DEFAULT_AVATAR = '../../../../../../../static/default_avatar.png';\nvar FlexStartDiv = styled.div.withConfig({\n  displayName: \"SelectTutor__FlexStartDiv\",\n  componentId: \"fg64uk-0\"\n})([\"display:flex;justify-content:start;margin-bottom:14px;\"]);\nvar TitleP = styled.div.withConfig({\n  displayName: \"SelectTutor__TitleP\",\n  componentId: \"fg64uk-1\"\n})([\"flex-shrink:0;margin-right:1px;font-size:14px;opacity:0.5;\"]);\n\nvar SelectTutors =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SelectTutors, _React$Component);\n\n  function SelectTutors() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SelectTutors);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SelectTutors)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      selected: false,\n      data: undefined,\n      value: undefined,\n      selectedData: undefined\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSearch\", function (value) {\n      _this.queryData(value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (value) {\n      _this.setState({\n        value: value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelect\", function (value) {\n      var dataJson = JSON.parse(value);\n\n      _this.setState({\n        value: dataJson.id,\n        selected: true,\n        selectedData: dataJson\n      });\n\n      _this.props.getValue(dataJson);\n\n      return value;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"queryData\", function (value) {\n      var variables = {\n        input: {\n          where: {\n            OR: [{\n              tutorNo_contains: value\n            }, {\n              nickname_contains: value\n            }]\n          }\n        }\n      };\n      setTimeout(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result2;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.client.query({\n                  query: listTutors,\n                  variables: variables\n                });\n\n              case 2:\n                result2 = _context.sent;\n\n                _this.setState({\n                  data: result2.data.listTutors\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })), 500);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function () {\n      _this.setState({\n        data: null\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(SelectTutors, [{\n    key: \"render\",\n    // tslint:disable-next-line:cognitive-complexity\n    value: function render() {\n      var _this2 = this;\n\n      var options = this.state.data ? this.state.data.length > 0 ? this.state.data.map(function (d) {\n        return React.createElement(Option, {\n          key: d.id,\n          value: _JSON$stringify(d)\n        }, React.createElement(\"div\", {\n          style: {\n            padding: '21px 14px',\n            display: 'flex'\n          }\n        }, React.createElement(AvatarImage, {\n          style: d.avatar ? {\n            width: '72px',\n            height: '72px',\n            margin: '10px',\n            flexShrink: 0,\n            backgroundImage: \"url(\".concat(DEFAULT_AVATAR, \")\")\n          } : {\n            width: '72px',\n            height: '72px',\n            margin: '10px',\n            flexShrink: 0,\n            backgroundImage: \"url(\".concat(DEFAULT_AVATAR, \")\"),\n            borderStyle: 'solid',\n            borderWidth: 'thin',\n            borderColor: '#D8D8D8'\n          },\n          src: d.avatar ? d.avatar : DEFAULT_AVATAR\n        }), React.createElement(\"div\", null, React.createElement(FlexStartDiv, null, React.createElement(\"div\", null, d ? d.nickname : ''), React.createElement(\"div\", {\n          style: {\n            marginLeft: '14px'\n          }\n        }, React.createElement(_Badge, {\n          status: d ? d.inCollaboration ? 'success' : 'default' : 'default'\n        })), React.createElement(\"div\", null, d ? d.inCollaboration ? '正常合作' : '停止合作' : '停止合作')), React.createElement(FlexStartDiv, null, React.createElement(TitleP, null, \"ID\\uFF1A\"), React.createElement(TitleP, null, d ? d.tutorNo : '')), React.createElement(FlexStartDiv, null, React.createElement(TitleP, null, \"\\u6700\\u8FD1\\u4E00\\u6B21\\u5DE5\\u4F5C\\u4F01\\u4E1A\\uFF1A\"), React.createElement(TitleP, null, d.lastWorkExperience ? d.lastWorkExperience.foreignCompany ? d.lastWorkExperience.foreignCompany : d.lastWorkExperience.company ? d.lastWorkExperience.company.companyName : '- -' : '- -')))));\n      }) : React.createElement(Option, {\n        key: \"none\",\n        disabled: true\n      }, React.createElement(\"div\", {\n        style: {\n          height: '72px',\n          textAlign: 'center',\n          marginTop: '36px'\n        }\n      }, \"\\u65E0\\u7ED3\\u679C\")) : null;\n      return React.createElement(ApolloConsumer, null, function (client) {\n        _this2.client = client;\n        return React.createElement(\"div\", {\n          hidden: _this2.state.selected\n        }, React.createElement(_Select, {\n          dropdownMatchSelectWidth: false,\n          showSearch: true,\n          value: _this2.state.value,\n          placeholder: '通过昵称或ID搜索导师',\n          defaultActiveFirstOption: false,\n          showArrow: false,\n          filterOption: false,\n          onBlur: _this2.handleBlur,\n          onSelect: _this2.handleSelect,\n          onSearch: _this2.handleSearch,\n          onChange: _this2.handleChange,\n          notFoundContent: null\n        }, options));\n      });\n    }\n  }]);\n\n  return SelectTutors;\n}(React.Component);\n\nexport default SelectTutors;","map":null,"metadata":{},"sourceType":"module"}