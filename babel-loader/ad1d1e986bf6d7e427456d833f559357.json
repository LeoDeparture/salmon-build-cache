{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { format } from 'date-fns';\nimport Router from 'next/router';\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Loading from '../../../../../components/Loading';\nimport DeletedAction from '../../../components/DeletedAction';\nimport { Item, ItemContent, ItemTitle } from '../../../CSSComponents';\nimport SectionDetailPageHeader from '../../../section/sectionDetail/components/SectionDetailPageHeader';\nimport { GetAssociatedUsersDetailById, QueryGetAssociatedUsersDetailById } from './QueryGetAssociatedUsersDetailById';\n\nvar AssociatedUsersDetailContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AssociatedUsersDetailContainer, _Component);\n\n  function AssociatedUsersDetailContainer(props) {\n    var _this;\n\n    _classCallCheck(this, AssociatedUsersDetailContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AssociatedUsersDetailContainer).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"jumpToEditUsers\", function () {\n      Router.push(\"/skill-course/associated-users-edit/\".concat(Router.query.id));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderGroupBtn\", function (seriesUsers) {\n      var id = seriesUsers.id;\n      var actionProps = {\n        type: 'seriesUsers',\n        btnType: 'button',\n        id: id,\n        getDataById: true,\n        variables: {\n          input: {\n            where: {\n              seriesId: Router.query.id,\n              somethingContains: ''\n            }\n          }\n        },\n        removeSuccessCallback: function removeSuccessCallback() {\n          Router.back();\n        }\n      };\n      return React.createElement(React.Fragment, null, React.createElement(_Button, {\n        onClick: _this.jumpToEditUsers\n      }, \"\\u7F16\\u8F91\"), React.createElement(DeletedAction, actionProps));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBaseInfoWrapper\", function (title, list) {\n      return React.createElement(BaseInfoWrapper, null, React.createElement(Title, null, title), list.map(function (info) {\n        return React.createElement(BaseIntroduce, {\n          key: info.key\n        }, React.createElement(Item, null, React.createElement(ItemTitleIn, null, info.key), React.createElement(ItemContent, null, info.value)));\n      }));\n    });\n\n    _this.state = {\n      loading: false\n    };\n    _this.variables = {\n      input: {\n        id: Router.query.id\n      }\n    };\n    return _this;\n  }\n\n  _createClass(AssociatedUsersDetailContainer, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var courseId = Router.query.courseId;\n      var seriesId = Router.query.seriesId;\n      var breadcrumb = [{\n        name: '课程管理',\n        link: '/skill-course/courses'\n      }, {\n        name: '课程详情',\n        link: \"/skill-course/series/\".concat(courseId)\n      }, {\n        name: '周期详情',\n        link: \"/skill-course/chapter/\".concat(seriesId, \"/\").concat(courseId)\n      }, {\n        name: '用户详情'\n      }];\n      return React.createElement(GetAssociatedUsersDetailById, {\n        query: QueryGetAssociatedUsersDetailById,\n        variables: this.variables,\n        fetchPolicy: \"network-only\"\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            networkStatus = _ref.networkStatus,\n            error = _ref.error;\n\n        if (loading && ![2, 3, 4].includes(networkStatus)) {\n          return React.createElement(Loading, null);\n        }\n\n        if (error) {\n          return null;\n        }\n\n        var associatedUsers = data.associatedUsers;\n        var studentAccount = associatedUsers.studentAccount;\n        var account = studentAccount.account,\n            studentNo = studentAccount.studentNo;\n\n        var _ref2 = account ? account : {\n          person: {\n            name: '- -',\n            nickname: '- -',\n            phoneNumber: '- -',\n            email: '- -',\n            createdAt: '- -'\n          }\n        },\n            person = _ref2.person;\n\n        var name = person.name,\n            nickname = person.nickname,\n            phoneNumber = person.phoneNumber,\n            email = person.email,\n            createdAt = person.createdAt;\n        var boughtAt = associatedUsers.boughtAt,\n            orderNo = associatedUsers.orderNo,\n            amountPaid = associatedUsers.amountPaid,\n            amountTotal = associatedUsers.amountTotal,\n            promotions = associatedUsers.promotions,\n            wechat = associatedUsers.wechat,\n            operator = associatedUsers.operator,\n            channel = associatedUsers.channel,\n            innerRemarks = associatedUsers.innerRemarks,\n            city = associatedUsers.city,\n            foreignCity = associatedUsers.foreignCity;\n        var address = city === null ? \"\".concat(foreignCity.country.name, \" / \").concat(foreignCity.name) : \"\".concat(city.country.name, \" / \").concat(city.province.name, \" / \").concat(city.name);\n        var basicInformationList = [{\n          key: 'MIS ID：',\n          value: studentNo\n        }, {\n          key: '姓名 | 昵称：',\n          value: \"\".concat(name, \" | \").concat(nickname)\n        }, {\n          key: '手机号：',\n          value: phoneNumber\n        }, {\n          key: '邮箱：',\n          value: email\n        }, {\n          key: '注册时间：',\n          value: format(new Date(createdAt), 'YYYY/MM/DD')\n        }];\n        var orderInfoList = [{\n          key: '订单编号：',\n          value: orderNo\n        }, {\n          key: '购买时间：',\n          value: format(new Date(boughtAt), 'YYYY/MM/DD')\n        }, {\n          key: '订单原金额：',\n          value: amountPaid\n        }, {\n          key: '实际支付金额：',\n          value: amountTotal\n        }, {\n          key: '优惠活动：',\n          value: promotions\n        }];\n        var operationInfoList = [{\n          key: '运营人员：',\n          value: operator\n        }, {\n          key: '微信号：',\n          value: wechat\n        }, {\n          key: '常驻地点：',\n          value: address\n        }, {\n          key: '来源渠道：',\n          value: channel\n        }, {\n          key: '对内备注：',\n          value: innerRemarks\n        }];\n\n        var BasicInformationList = _this2.getBaseInfoWrapper('基本信息:', basicInformationList);\n\n        var OrderInfoList = _this2.getBaseInfoWrapper('订单信息:', orderInfoList);\n\n        var OperationInfoList = _this2.getBaseInfoWrapper('运营信息:', operationInfoList);\n\n        return React.createElement(React.Fragment, null, React.createElement(Content, null, React.createElement(SectionDetailPageHeader, {\n          breadcrumb: breadcrumb,\n          buttons: _this2.renderGroupBtn(associatedUsers)\n        }), BasicInformationList, OrderInfoList, OperationInfoList));\n      });\n    }\n  }]);\n\n  return AssociatedUsersDetailContainer;\n}(Component);\n\nexport { AssociatedUsersDetailContainer as default };\nvar Content = styled.div.withConfig({\n  displayName: \"AssociatedUsersDetailContainer__Content\",\n  componentId: \"sc-1pnrxrj-0\"\n})([\"padding:24px 32px;background:#fff;\"]);\nexport var Name = styled.p.withConfig({\n  displayName: \"AssociatedUsersDetailContainer__Name\",\n  componentId: \"sc-1pnrxrj-1\"\n})([\"margin-top:20px;overflow:hidden;font-size:20px;font-weight:500;line-height:28px;color:#172b4d;text-overflow:ellipsis;white-space:nowrap;\"]);\nexport var Title = styled.p.withConfig({\n  displayName: \"AssociatedUsersDetailContainer__Title\",\n  componentId: \"sc-1pnrxrj-2\"\n})([\"overflow:hidden;font-size:16px;font-weight:500;line-height:28px;color:#172b4d;text-overflow:ellipsis;white-space:nowrap;\"]);\nvar BaseInfoWrapper = styled.div.withConfig({\n  displayName: \"AssociatedUsersDetailContainer__BaseInfoWrapper\",\n  componentId: \"sc-1pnrxrj-3\"\n})([\"margin-top:32px;text-align:left;\"]);\nvar BaseIntroduce = styled.div.withConfig({\n  displayName: \"AssociatedUsersDetailContainer__BaseIntroduce\",\n  componentId: \"sc-1pnrxrj-4\"\n})([\"margin-top:10px;\"]);\nvar ItemTitleIn = styled(ItemTitle).withConfig({\n  displayName: \"AssociatedUsersDetailContainer__ItemTitleIn\",\n  componentId: \"sc-1pnrxrj-5\"\n})([\"min-width:100px;text-align:right;\"]);","map":null,"metadata":{},"sourceType":"module"}