{"ast":null,"code":"import \"antd/lib/popover/style\";\nimport _Popover from \"antd/lib/popover\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport NumberInput from '../Input/NumberInput';\nvar ItemContainer = styled.div.withConfig({\n  displayName: \"DifferenceItem__ItemContainer\",\n  componentId: \"sc-1h68onp-0\"\n})([\"z-index:3;display:flex;align-items:center;flex-direction:column;width:88px;height:100%;margin-right:24px;div:last-child{margin-right:0;}\"]);\nvar ItemText = styled.div.withConfig({\n  displayName: \"DifferenceItem__ItemText\",\n  componentId: \"sc-1h68onp-1\"\n})([\"z-index:3;width:24px;height:22px;font-size:14px;line-height:22px;color:#ff991f;text-align:center;\"]);\nvar ItemButton = styled.div.withConfig({\n  displayName: \"DifferenceItem__ItemButton\",\n  componentId: \"sc-1h68onp-2\"\n})([\"width:88px;height:22px;font-size:12px;line-height:22px;color:#172b4d;text-align:center;cursor:pointer;background:#fff;border:1px solid #c3c4d1;border-radius:4px;box-sizing:border-box;\"]);\nvar ChooseStyleContainer = styled.div.withConfig({\n  displayName: \"DifferenceItem__ChooseStyleContainer\",\n  componentId: \"sc-1h68onp-3\"\n})([\"display:flex;align-items:center;justify-content:center;width:100%;height:24px;\"]);\nvar ChooseStyle = styled.div.withConfig({\n  displayName: \"DifferenceItem__ChooseStyle\",\n  componentId: \"sc-1h68onp-4\"\n})([\"width:8px;height:8px;background:#ff991f;border-radius:4px;\"]);\nvar PopoverContent = styled.div.withConfig({\n  displayName: \"DifferenceItem__PopoverContent\",\n  componentId: \"sc-1h68onp-5\"\n})([\"display:flex;flex-direction:column;justify-content:space-between;width:350px;height:74px;background-color:#fff;border-radius:4px;\"]);\nvar PopoverContentText = styled.div.withConfig({\n  displayName: \"DifferenceItem__PopoverContentText\",\n  componentId: \"sc-1h68onp-6\"\n})([\"display:flex;width:100%;font-size:14px;line-height:22px;.ant-input-number-input-wrap{display:flex;align-items:center;height:20px;}.ant-input-number-input{display:flex;height:20px;padding:0 8px;font-size:14px;line-height:20px;}\"]);\nvar PopoverContentTextOperation = styled.div.withConfig({\n  displayName: \"DifferenceItem__PopoverContentTextOperation\",\n  componentId: \"sc-1h68onp-7\"\n})([\"display:flex;justify-content:flex-end;width:100%;height:22px;\"]);\nvar OperationButton = styled.div.withConfig({\n  displayName: \"DifferenceItem__OperationButton\",\n  componentId: \"sc-1h68onp-8\"\n})([\"width:28px;height:22px;margin-right:12px;font-size:14px;line-height:22px;color:#a2aab8;text-align:center;cursor:pointer;\"]);\n\nvar DifferenceItem =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DifferenceItem, _React$Component);\n\n  function DifferenceItem() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DifferenceItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DifferenceItem)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isPopoverOpen: false,\n      price: 0,\n      inputValue: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputRef\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"bindRef\", function (ref) {\n      _this.inputRef = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillMount\", function () {\n      if (_this.props.price) {\n        _this.setState({\n          price: _this.props.price\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"itemButtonClick\", function () {\n      _this.setState({\n        isPopoverOpen: false,\n        inputValue: _this.state.price\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVisibleChange\", function (isPopoverOpen) {\n      _this.setState({\n        isPopoverOpen: isPopoverOpen\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"listenInput\", function (inputValue) {\n      _this.setState({\n        inputValue: inputValue\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changePrice\", function () {\n      if (!isNaN(_parseInt(_this.state.inputValue, 10)) && _parseInt(_this.state.inputValue, 10) !== 0) {\n        _this.setState({\n          price: _parseInt(_this.state.inputValue, 10) * 100,\n          isPopoverOpen: false\n        }, function () {\n          _this.props.onChangeValue({\n            companyLevelId: _this.props.id,\n            price: _this.props.isAdd ? _this.state.price : -_this.state.price\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetState\", function () {\n      _this.setState({\n        isPopoverOpen: false,\n        price: 0,\n        inputValue: '0'\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderItem\", function () {\n      return React.createElement(PopoverContent, null, React.createElement(PopoverContentText, null, \" \\u83B7\\u5F97\".concat(_this.props.level, \"\\u7C7B\\u5C97\\u4F4DOffer\\uFF0C\\u5219\").concat(_this.props.isAdd ? '补' : '退', \"\\u5DEE\\u4EF7\"), React.createElement(NumberInput, {\n        onChange: _this.listenInput,\n        precision: 0,\n        placeholder: \"\".concat(_this.props.initPrice / 100),\n        max: 1000000,\n        min: 0,\n        style: NumberInputStyle\n      }), \"\\u5143\"), React.createElement(PopoverContentTextOperation, null, React.createElement(OperationButton, {\n        onClick: _this.itemButtonClick\n      }, \"\\u53D6\\u6D88\"), React.createElement(OperationButton, {\n        style: _parseInt(_this.state.inputValue, 10) <= 0 || isNaN(_parseInt(_this.state.inputValue, 10)) ? {\n          color: '#CDD7F0',\n          cursor: 'not-allowed'\n        } : {\n          color: '#5674BF',\n          cursor: 'pointer'\n        },\n        onClick: _this.changePrice\n      }, \"\\u4FDD\\u5B58\")));\n    });\n\n    return _this;\n  }\n\n  _createClass(DifferenceItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.onRef) {\n        this.props.onRef(this);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          level = _this$props.level,\n          isChoose = _this$props.isChoose,\n          noOperation = _this$props.noOperation,\n          isAdd = _this$props.isAdd;\n      var price = this.state.price;\n      return React.createElement(ItemContainer, null, React.createElement(ItemText, {\n        style: isChoose ? {\n          color: '#FF991F'\n        } : noOperation ? {\n          color: '#A2AAB8'\n        } : {\n          color: '#172B4D'\n        }\n      }, level, \"\\u7EA7\"), isChoose ? React.createElement(ChooseStyleContainer, null, React.createElement(ChooseStyle, null)) : noOperation ? React.createElement(ChooseStyleContainer, null) : React.createElement(_Popover, {\n        arrowPointAtCenter: true,\n        onVisibleChange: this.handleVisibleChange,\n        visible: this.state.isPopoverOpen,\n        trigger: \"click\",\n        placement: \"topLeft\",\n        content: this.renderItem()\n      }, React.createElement(ItemButton, {\n        onClick: this.itemButtonClick\n      }, price === 0 ? '添加差价' : \"\".concat(isAdd ? '+' : '-').concat(price / 100, \"\\u5143\"))));\n    }\n  }]);\n\n  return DifferenceItem;\n}(React.Component);\n\n_defineProperty(DifferenceItem, \"defaultProps\", {\n  isChoose: false,\n  price: 0,\n  noOperation: false,\n  isAdd: true\n});\n\nexport { DifferenceItem as default };\nvar NumberInputStyle = {\n  width: '84px',\n  height: '22px',\n  margin: '0 8px 0',\n  lineHeight: '22px'\n};","map":null,"metadata":{},"sourceType":"module"}