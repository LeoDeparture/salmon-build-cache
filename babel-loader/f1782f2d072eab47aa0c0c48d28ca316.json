{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport Search from 'antd/lib/input/Search';\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport EmptyComponent from '../../../../components/Empty';\nimport Loading from '../../../../components/Loading';\nimport ZhiWenSelect from '../../../../components/Select/ZhiWenSelect';\nimport ListQuestionBanks, { QueryListQuestionBanks } from '../containers/QueryListQuestionBank';\n\nvar CreateModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateModal, _Component);\n\n  function CreateModal(props) {\n    var _this;\n\n    _classCallCheck(this, CreateModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateModal).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"showModal\", function () {\n      _this.setState({\n        visible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCancel\", function () {\n      var questionBankId = _this.props.questionBankId; // 如果已有确认选择后的值， 再次选择后点击取消，此时选中状态不保存\n\n      if (questionBankId) {\n        _this.setState({\n          visible: false,\n          chooseId: questionBankId\n        });\n\n        return;\n      }\n\n      _this.setState({\n        visible: false,\n        chooseId: undefined,\n        questionBankName: undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeChooseID\", function (chooseId, questionBankName) {\n      _this.setState({\n        chooseId: chooseId,\n        questionBankName: questionBankName\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clickOk\", function () {\n      var _this$state = _this.state,\n          chooseId = _this$state.chooseId,\n          questionBankName = _this$state.questionBankName;\n\n      _this.props.getValue(chooseId, questionBankName);\n\n      _this.setState({\n        visible: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeSearchValue\", function (e) {\n      var v = e.target.value;\n      var result = v;\n\n      if (v === '' || v === null) {\n        result = undefined;\n\n        _this.refetch();\n      }\n\n      _this.variables.where.name_contains = result;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeSelect\", function (type, v) {\n      var value = v === '' || v === null || v && !v.length ? undefined : v;\n\n      if (type === 'isValid') {\n        _this.variables.where[type] = v !== undefined ? Boolean(v) : v;\n      }\n\n      if (type === 'industries_some') {\n        _this.variables.where[type].id_in = value;\n      }\n\n      if (type === 'name_contains') {\n        _this.variables.where[type] = value;\n      }\n\n      _this.setState({\n        filterLoading: true\n      });\n\n      _this.refetch().finally(function () {\n        _this.setState({\n          filterLoading: false\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderItem\", function (data) {\n      if (data && data.length !== 0) {\n        return data.map(function (item) {\n          var id = item.id,\n              name = item.name,\n              industries = item.industries,\n              duration = item.duration,\n              isValid = item.isValid,\n              passScore = item.passScore,\n              questions = item.questions,\n              relatedSubscriptionCourseSeriesCount = item.relatedSubscriptionCourseSeriesCount;\n          var isSelected = id === _this.state.chooseId;\n          var styleType = isSelected ? ItemTypeWords : {\n            flex: 1\n          };\n          return React.createElement(ItemContainer, {\n            key: id,\n            style: isSelected ? {\n              borderColor: '#172b4d'\n            } : {\n              borderColor: null\n            },\n            onClick: _this.changeChooseID.bind(_assertThisInitialized(_this), id, name)\n          }, React.createElement(ItemTextContainer, null, React.createElement(ItemTitle, null, React.createElement(\"div\", {\n            style: styleType\n          }, React.createElement(\"span\", {\n            style: {\n              marginRight: 12\n            }\n          }, name), React.createElement(_Badge, {\n            status: isValid ? 'success' : 'warning',\n            text: isValid ? '有效' : '无效'\n          }))), React.createElement(ItemTypeContainer, null, React.createElement(ItemTypeFixContainer, null, \"\\u884C\\u4E1A\\uFF1A\", React.createElement(\"div\", {\n            style: styleType\n          }, industries.map(function (v) {\n            return v.name;\n          }).join('、')))), React.createElement(ItemTypeContainer, null, React.createElement(ItemTypeFlexContainer, null, \"\\u5DF2\\u5173\\u8054\\u670D\\u8BFE\\u7A0B\\u6570\\uFF1A\", React.createElement(\"div\", {\n            style: styleType\n          }, relatedSubscriptionCourseSeriesCount)), React.createElement(ItemTypeFlexContainer, null, \"\\u9898\\u76EE\\u6570\\u91CF\\uFF1A\", React.createElement(\"div\", {\n            style: styleType\n          }, questions.length)), React.createElement(ItemTypeFlexContainer, null, \"\\u8003\\u8BD5\\u65F6\\u957F\\uFF1A\", React.createElement(\"div\", {\n            style: styleType\n          }, duration, \"\\u5206\\u949F\")), React.createElement(ItemTypeFlexContainer, null, \"\\u5408\\u683C\\u5206\\u6570\\uFF1A\", React.createElement(\"div\", {\n            style: styleType\n          }, passScore, \"\\u5206\")))), React.createElement(ChooseContainer, null, isSelected ? React.createElement(ChooseBorder, {\n            style: {\n              borderColor: '#172b4d'\n            }\n          }, React.createElement(ChooseItem, {\n            style: {\n              background: '#172b4d'\n            }\n          })) : React.createElement(ChooseBorder, null)));\n        });\n      }\n\n      return React.createElement(EmptyComponent, {\n        type: \"table-and-bottomline\"\n      });\n    });\n\n    _this.state = {\n      visible: false,\n      filterLoading: false,\n      chooseId: undefined,\n      questionBankName: undefined\n    };\n    _this.variables = {\n      where: {\n        industries_some: {\n          id_in: undefined\n        },\n        isValid: undefined,\n        name_contains: undefined,\n        isDeleted: false\n      },\n      orderBy: 'createdAt_DESC'\n    };\n    return _this;\n  }\n\n  _createClass(CreateModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var questionBankId = this.props.questionBankId;\n      this.setState({\n        chooseId: questionBankId\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(preProps) {\n      if (preProps.questionBankId !== this.props.questionBankId) {\n        this.setState({\n          chooseId: preProps.questionBankId\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          visible = _this$state2.visible,\n          chooseId = _this$state2.chooseId,\n          filterLoading = _this$state2.filterLoading;\n      return React.createElement(React.Fragment, null, React.createElement(\"style\", null, \"\\n            .ant-btn-primary {\\n              background-color: #172b4d;\\n              border-color: #172b4d;\\n            }\\n          \"), React.createElement(_Modal, {\n        destroyOnClose: true,\n        width: 774,\n        visible: visible,\n        title: \"\\u8BF7\\u9009\\u62E9\\u5957\\u9898\",\n        onCancel: this.handleCancel,\n        maskClosable: false,\n        closable: false,\n        cancelText: \"\\u53D6\\u6D88\",\n        okText: \"\\u786E\\u8BA4\\u9009\\u62E9\",\n        okButtonProps: {\n          disabled: !chooseId\n        },\n        onOk: this.clickOk,\n        bodyStyle: {\n          padding: 0\n        }\n      }, React.createElement(ModelContainer, null, React.createElement(InputContainer, null, React.createElement(StyledSelect, {\n        type: \"zhiwen-profession\",\n        allowClear: true,\n        placeholder: \"\\u4E0D\\u9650\\u884C\\u4E1A\",\n        onChange: this.onChangeSelect.bind(this, 'industries_some')\n      }), React.createElement(_Select, {\n        style: {\n          width: 140\n        },\n        allowClear: true,\n        placeholder: \"\\u4E0D\\u9650\\u72B6\\u6001\",\n        onChange: this.onChangeSelect.bind(this, 'isValid')\n      }, React.createElement(_Select.Option, {\n        value: 1\n      }, \"\\u6709\\u6548\"), React.createElement(_Select.Option, {\n        value: 0\n      }, \"\\u65E0\\u6548\")), React.createElement(Search, {\n        placeholder: \"\\u901A\\u8FC7\\u5957\\u9898\\u540D\\u79F0\\u641C\\u7D22\",\n        style: {\n          width: 344,\n          marginLeft: 12\n        },\n        enterButton: React.createElement(_Button, null, \"\\u641C\\u7D22\"),\n        onChange: this.onChangeSearchValue,\n        onSearch: this.onChangeSelect.bind(this, 'name_contains')\n      })), React.createElement(ListQuestionBanks, {\n        query: QueryListQuestionBanks,\n        variables: this.variables,\n        fetchPolicy: \"network-only\"\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            refetch = _ref.refetch,\n            error = _ref.error;\n        _this2.refetch = refetch;\n\n        if (loading || filterLoading) {\n          return React.createElement(Loading, null);\n        }\n\n        if (error) {\n          return null;\n        }\n\n        return _this2.renderItem(data.listQuestionBank);\n      }))));\n    }\n  }]);\n\n  return CreateModal;\n}(Component);\n\nexport { CreateModal as default };\nvar ModelContainer = styled.div.withConfig({\n  displayName: \"SelectModal__ModelContainer\",\n  componentId: \"sc-1ub6vg-0\"\n})([\"width:100%;height:565px;padding:32px 32px 0 32px;overflow-y:overlay;\"]);\nvar StyledSelect = styled(ZhiWenSelect).withConfig({\n  displayName: \"SelectModal__StyledSelect\",\n  componentId: \"sc-1ub6vg-1\"\n})([\"width:140px;height:32px;margin-right:12px;\"]);\nvar InputContainer = styled.div.withConfig({\n  displayName: \"SelectModal__InputContainer\",\n  componentId: \"sc-1ub6vg-2\"\n})([\"width:100%;height:64px;\"]);\nvar ItemContainer = styled.div.withConfig({\n  displayName: \"SelectModal__ItemContainer\",\n  componentId: \"sc-1ub6vg-3\"\n})([\"display:flex;width:100%;min-height:116px;padding:14px 16px;margin-bottom:16px;color:#a2aab8;border:1px solid #c3c4d1;border-radius:4px;\"]);\nvar ItemTextContainer = styled.div.withConfig({\n  displayName: \"SelectModal__ItemTextContainer\",\n  componentId: \"sc-1ub6vg-4\"\n})([\"display:flex;flex-wrap:wrap;\"]);\nvar ItemTitle = styled.div.withConfig({\n  displayName: \"SelectModal__ItemTitle\",\n  componentId: \"sc-1ub6vg-5\"\n})([\"font-size:20px;line-height:28px;\"]);\nvar ItemTypeContainer = styled.div.withConfig({\n  displayName: \"SelectModal__ItemTypeContainer\",\n  componentId: \"sc-1ub6vg-6\"\n})([\"display:flex;width:100%;margin-top:8px;font-size:14px;line-height:22px;\"]);\nvar ItemTypeFixContainer = styled.div.withConfig({\n  displayName: \"SelectModal__ItemTypeFixContainer\",\n  componentId: \"sc-1ub6vg-7\"\n})([\"display:flex;flex-wrap:wrap;\"]);\nvar ItemTypeFlexContainer = styled.div.withConfig({\n  displayName: \"SelectModal__ItemTypeFlexContainer\",\n  componentId: \"sc-1ub6vg-8\"\n})([\"display:flex;flex:1;flex-wrap:wrap;\"]);\nvar ItemTypeWords = {\n  flex: 1,\n  color: '#172b4d'\n};\nvar ChooseContainer = styled.div.withConfig({\n  displayName: \"SelectModal__ChooseContainer\",\n  componentId: \"sc-1ub6vg-9\"\n})([\"display:flex;align-items:center;flex:1;justify-content:flex-end;\"]);\nvar ChooseBorder = styled.div.withConfig({\n  displayName: \"SelectModal__ChooseBorder\",\n  componentId: \"sc-1ub6vg-10\"\n})([\"display:flex;align-items:center;justify-content:center;width:24px;height:24px;margin-right:6px;border:3px solid #c3c4d1;border-radius:50%;\"]);\nvar ChooseItem = styled.div.withConfig({\n  displayName: \"SelectModal__ChooseItem\",\n  componentId: \"sc-1ub6vg-11\"\n})([\"width:10px;height:10px;background:#c3c4d1;border-radius:50%;\"]);","map":null,"metadata":{},"sourceType":"module"}