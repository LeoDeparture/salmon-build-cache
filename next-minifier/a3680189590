{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"88f4\"],{YFqc:function(e,t,n){e.exports=n(\"cTJO\")},b7Gi:function(e,t,n){\"use strict\";n.d(t,\"k\",function(){return r}),n.d(t,\"m\",function(){return i}),n.d(t,\"n\",function(){return o}),n.d(t,\"l\",function(){return c}),n.d(t,\"g\",function(){return l}),n.d(t,\"j\",function(){return u}),n.d(t,\"i\",function(){return s}),n.d(t,\"h\",function(){return d}),n.d(t,\"d\",function(){return f}),n.d(t,\"f\",function(){return m}),n.d(t,\"e\",function(){return p}),n.d(t,\"c\",function(){return g}),n.d(t,\"b\",function(){return h}),n.d(t,\"a\",function(){return b}),n.d(t,\"o\",function(){return y});var a=n(\"vOnD\"),r=a.c.div.withConfig({displayName:\"commonCss__FlexDisplay\",componentId:\"fc9kco-0\"})([\"display:flex;\"]),i=Object(a.c)(r).withConfig({displayName:\"commonCss__FlexDisplayCenterV\",componentId:\"fc9kco-1\"})([\"align-items:center;\"]),o=Object(a.c)(r).withConfig({displayName:\"commonCss__FlexDisplayColumn\",componentId:\"fc9kco-2\"})([\"flex-direction:column;\"]),c=Object(a.c)(r).withConfig({displayName:\"commonCss__FlexDisplayBetween\",componentId:\"fc9kco-3\"})([\"justify-content:space-between;\"]),l=a.c.div.withConfig({displayName:\"commonCss__FlexContent\",componentId:\"fc9kco-4\"})([\"display:flex;flex:1;\"]),u=Object(a.c)(l).withConfig({displayName:\"commonCss__FlexContentCenterV\",componentId:\"fc9kco-5\"})([\"align-items:center;\"]),s=Object(a.c)(l).withConfig({displayName:\"commonCss__FlexContentCenterL\",componentId:\"fc9kco-6\"})([\"justify-content:center;\"]),d=Object(a.c)(l).withConfig({displayName:\"commonCss__FlexContentCenter\",componentId:\"fc9kco-7\"})([\"align-items:center;justify-content:center;\"]),f=Object(a.c)(l).withConfig({displayName:\"commonCss__FlexCenterColumn\",componentId:\"fc9kco-8\"})([\"flex-direction:column;\"]),m=Object(a.c)(u).withConfig({displayName:\"commonCss__FlexCenterColumnCenterV\",componentId:\"fc9kco-9\"})([\"flex-direction:column;\"]),p=(Object(a.c)(s).withConfig({displayName:\"commonCss__FlexCenterColumnCenterL\",componentId:\"fc9kco-10\"})([\"flex-direction:column;\"]),Object(a.c)(d).withConfig({displayName:\"commonCss__FlexCenterColumnCenter\",componentId:\"fc9kco-11\"})([\"flex-direction:column;\"])),g=a.c.p.withConfig({displayName:\"commonCss__DetailCommonP\",componentId:\"fc9kco-12\"})([\"display:inline-block;font-size:14px;color:#c3c3c3;white-space:nowrap;\"]),h=a.c.p.withConfig({displayName:\"commonCss__ContentP\",componentId:\"fc9kco-13\"})([\"padding:0 8px;font-size:14px;color:#505050;word-break:break-all;\"]),b=a.c.p.withConfig({displayName:\"commonCss__CommonPBlock\",componentId:\"fc9kco-14\"})([\"margin-bottom:0;font-size:14px;color:#c3c3c3;white-space:nowrap;\"]),y=a.c.p.withConfig({displayName:\"commonCss__TextContent\",componentId:\"fc9kco-15\"})([\"display:\",\";margin-bottom:0;font-size:\",\";color:\",\";\"],function(e){return e.display||\"inline-block\"},function(e){return e.fontSize||\"14px\"},function(e){return e.color||\"#4a4a4a\"})},bIp5:function(e,t,n){\"use strict\";n.d(t,\"c\",function(){return s}),n.d(t,\"b\",function(){return d}),n.d(t,\"a\",function(){return f}),n.d(t,\"d\",function(){return m});var a=n(\"rt45\"),r=n(\"lTCR\"),i=n.n(r);function o(){var e=Object(a.a)([\"\\nmutation SignAgreement ($input: AgreementNoInputType!) {\\n  signAgreement(input:$input){\\n    id\\n    status {\\n      id\\n      key\\n      name\\n    }\\n  }\\n}\\n\"]);return o=function(){return e},e}function c(){var e=Object(a.a)([\"\\nmutation CancelAgreement ($input: AgreementNoInputType!) {\\n  cancelAgreement(input:$input){\\n    id\\n    status {\\n      id\\n      key\\n      name\\n    }\\n    canceller {\\n      id\\n      person {\\n        id\\n        name\\n      }\\n    }\\n    canceledAt\\n  }\\n}\\n\"]);return c=function(){return e},e}function l(){var e=Object(a.a)([\"\\nmutation ResendAgreement ($input: AgreementNoInputType!) {\\n  resendAgreement(input:$input){\\n    id\\n  }\\n}\\n\"]);return l=function(){return e},e}function u(){var e=Object(a.a)([\"\\nmutation ReviewAgreement ($input: AgreementNoInputType!) {\\n  reviewAgreement(input:$input){\\n    id\\n    status {\\n      id\\n      key\\n      name\\n    }\\n    reviewer {\\n      id\\n      person {\\n        id\\n        name\\n      }\\n    }\\n    reviewedAt\\n  }\\n}\\n\"]);return u=function(){return e},e}var s=i()(u()),d=i()(l()),f=i()(c()),m=i()(o())},cTJO:function(e,t,n){\"use strict\";var a=n(\"KI45\"),r=a(n(\"9Jkg\")),i=a(n(\"/HRN\")),o=a(n(\"WaGi\")),c=a(n(\"ZDA2\")),l=a(n(\"/+P4\")),u=a(n(\"N9n2\")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},d=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0});var f=n(\"CxY0\"),m=s(n(\"q1tI\")),p=(d(n(\"lgD3\")),s(n(\"nOHt\"))),g=n(\"Bu4q\");function h(e){return e&&\"object\"==typeof e?g.formatWithValidation(e):e}var b=function(e){function t(){var e,n,a,r,o;return(0,i.default)(this,t),(e=(0,c.default)(this,(0,l.default)(t).apply(this,arguments))).formatUrls=(n=function(e,t){return{href:h(e),as:h(t)}},a=null,r=null,o=null,function(e,t){if(e===a&&t===r)return o;var i=n(e,t);return a=e,r=t,o=i,i}),e.linkClicked=function(t){var n=t.currentTarget,a=n.nodeName,r=n.target;if(\"A\"!==a||!(r&&\"_self\"!==r||t.metaKey||t.ctrlKey||t.shiftKey||t.nativeEvent&&2===t.nativeEvent.which)){var i=e.formatUrls(e.props.href,e.props.as),o=i.href,c=i.as;if(function(e){var t=f.parse(e,!1,!0),n=f.parse(g.getLocationOrigin(),!1,!0);return!t.host||t.protocol===n.protocol&&t.host===n.host}(o)){var l=window.location.pathname;o=f.resolve(l,o),c=c?f.resolve(l,c):o,t.preventDefault();var u=e.props.scroll;null==u&&(u=c.indexOf(\"#\")<0),p.default[e.props.replace?\"replace\":\"push\"](o,c,{shallow:e.props.shallow}).then(function(e){e&&u&&(window.scrollTo(0,0),document.body.focus())}).catch(function(t){e.props.onError&&e.props.onError(t)})}}},e}return(0,u.default)(t,e),(0,o.default)(t,[{key:\"componentDidMount\",value:function(){this.prefetch()}},{key:\"componentDidUpdate\",value:function(e){(0,r.default)(this.props.href)!==(0,r.default)(e.href)&&this.prefetch()}},{key:\"prefetch\",value:function(){if(this.props.prefetch&&\"undefined\"!=typeof window){var e=window.location.pathname,t=this.formatUrls(this.props.href,this.props.as).href,n=f.resolve(e,t);p.default.prefetch(n)}}},{key:\"render\",value:function(){var e=this,t=this.props.children,n=this.formatUrls(this.props.href,this.props.as),a=n.href,r=n.as;\"string\"==typeof t&&(t=m.default.createElement(\"a\",null,t));var i=m.Children.only(t),o={onClick:function(t){i.props&&\"function\"==typeof i.props.onClick&&i.props.onClick(t),t.defaultPrevented||e.linkClicked(t)}};return!this.props.passHref&&(\"a\"!==i.type||\"href\"in i.props)||(o.href=r||a),o.href&&\"undefined\"!=typeof __NEXT_DATA__&&__NEXT_DATA__.nextExport&&(o.href=p.Router._rewriteUrlForNextExport(o.href)),m.default.cloneElement(i,o)}}]),t}(m.Component);t.default=b},mKL7:function(e,t,n){\"use strict\";n.r(t);n(\"NuVJ\");var a=n(\"2ue9\"),r=n.n(a),i=n(\"0iUn\"),o=n(\"sLSF\"),c=n(\"MI3g\"),l=n(\"a7VT\"),u=n(\"Tit0\"),s=n(\"q1tI\"),d=n.n(s),f=n(\"+oBk\"),m=n(\"b7Gi\"),p=(n(\"nT0F\"),n(\"MM9K\")),g=n.n(p),h=n(\"zrwo\"),b=(n(\"tL+A\"),n(\"QpBz\")),y=n.n(b),v=n(\"ln6h\"),O=n.n(v),j=n(\"dfwq\"),C=n(\"O40h\"),w=n(\"AT/M\"),x=n(\"vYYK\"),k=(n(\"zmYW\"),n(\"DtFj\")),A=n.n(k),E=(n(\"G851\"),n(\"ZvzK\")),N=n.n(E),_=(n(\"FGdI\"),n(\"Pbn2\")),I=n.n(_),P=(n(\"CbT5\"),n(\"RWbP\")),T=n.n(P),D=(n(\"PFYH\"),n(\"Jv8k\")),M=n.n(D),W=(n(\"fwXI\"),n(\"CC+v\")),z=n.n(W),F=(n(\"ppZR\"),n(\"d2CI\")),q=n.n(F),R=n(\"NAv5\"),S=n(\"vOnD\"),Y=n(\"nOHt\"),L=n.n(Y),K=n(\"YFqc\"),H=n.n(K),$=function(e){function t(){return Object(i.default)(this,t),Object(c.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(u.default)(t,e),Object(o.default)(t,[{key:\"render\",value:function(){var e=this.props.data.listTemplates,t=function(e){var t=e.data,n=t.id,a=t.name,r=t.version;return d.a.createElement(H.a,{href:\"/agreement-form/\"+n},d.a.createElement(G,null,d.a.createElement(\"p\",null,a+\" \"+r)))};return e.map(function(e){var n=e.id;return d.a.createElement(t,{key:n,data:e})})}}]),t}(d.a.Component),G=S.c.div.withConfig({displayName:\"TemplateList__ItemWrapper\",componentId:\"lagh8n-0\"})([\"width:300px;height:64px;margin:0 auto 24px auto;background-color:#fff;border:solid 1px #dbdbdb;border-radius:4px;&:hover{cursor:pointer;background-color:rgb(92,134,251,0.05);}p{margin:0;font-size:16px;line-height:64px;color:rgba(0,0,0,0.65);text-align:center;}\"]),Q=n(\"rt45\"),J=n(\"lTCR\"),U=n.n(J),V=n(\"4KRT\");function B(){var e=Object(Q.a)([\"\\n  query listTemplates {\\n    listTemplates {\\n      id\\n      name\\n      version\\n    }\\n  }\\n\"]);return B=function(){return e},e}var X=U()(B()),Z=function(e){function t(){return Object(i.default)(this,t),Object(c.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(u.default)(t,e),t}(V.d),ee=function(e){function t(){return Object(i.default)(this,t),Object(c.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(u.default)(t,e),Object(o.default)(t,[{key:\"render\",value:function(){return d.a.createElement(Z,{query:X,fetchPolicy:\"network-only\"},function(e){var t=e.loading,n=e.error,a=e.data;return t?d.a.createElement(te,null,d.a.createElement(g.a,{size:\"large\"})):n?null:d.a.createElement($,{data:a})})}}]),t}(d.a.Component),te=S.c.div.withConfig({displayName:\"TemplateContainer__LoadingWrapper\",componentId:\"sc-1b28d6d-0\"})([\"display:flex;align-items:center;justify-content:center;min-height:200px;\"]),ne=function(e){function t(){var e,n;Object(i.default)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(c.default)(this,(e=Object(l.default)(t)).call.apply(e,[this].concat(r))),Object(x.a)(Object(w.default)(n),\"state\",{visible:!1}),Object(x.a)(Object(w.default)(n),\"showPop\",function(){n.setState({visible:!0})}),Object(x.a)(Object(w.default)(n),\"hidePop\",function(){n.setState({visible:!1})}),n}return Object(u.default)(t,e),Object(o.default)(t,[{key:\"componentDidMount\",value:function(){this.props.onRef(this)}},{key:\"render\",value:function(){return d.a.createElement(z.a,{visible:this.state.visible,maskClosable:!1,onCancel:this.hidePop,title:null,footer:null},d.a.createElement(ae,null,d.a.createElement(\"h1\",null,\"请选择协议模板\"),d.a.createElement(ee,null)))}}]),t}(d.a.Component),ae=S.c.div.withConfig({displayName:\"CreateAgreementPop__ContentWrapper\",componentId:\"prcdpk-0\"})([\"h1{margin:0 0 35px 0;font-size:16px;line-height:24px;color:rgba(0,0,0,0.85);text-align:center;}\"]),re=q.a.Content,ie=function(e){function t(){var e,n;Object(i.default)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(c.default)(this,(e=Object(l.default)(t)).call.apply(e,[this].concat(r))),Object(x.a)(Object(w.default)(n),\"onRefCreateAgreementPop\",function(e){n.createAgreementPop=e}),Object(x.a)(Object(w.default)(n),\"onClickCreateButton\",function(){n.createAgreementPop.showPop()}),Object(x.a)(Object(w.default)(n),\"reviewAgreementModal\",function(e){z.a.confirm({cancelText:\"取消\",centered:!0,content:d.a.createElement(\"div\",null,d.a.createElement(\"p\",{style:{fontSize:\"13px\"}},\"确认后，此协议将会以短信和邮件的方式发送给学员。\"),d.a.createElement(\"p\",{style:{fontSize:\"13px\"}},\"联系电话: \".concat(e.studentPhoneNumber)),d.a.createElement(\"p\",{style:{fontSize:\"13px\"}},\"邮箱: \".concat(e.studentEmail))),okText:\"通过审核并发送协议\",iconType:\"exclamation-circle\",okType:\"primary\",onOk:n.props.reviewAgreement.bind(Object(w.default)(n),e.agreementNo),title:\"确认通过审核并发送协议吗？\"})}),Object(x.a)(Object(w.default)(n),\"resendAgreementModal\",function(e){z.a.confirm({cancelText:\"取消\",centered:!0,content:d.a.createElement(\"div\",null,d.a.createElement(\"p\",{style:{fontSize:\"13px\"}},\"确认后，此协议将会以短信和邮件的方式发送给学员。\"),d.a.createElement(\"p\",{style:{fontSize:\"13px\"}},\"联系电话: \".concat(e.studentPhoneNumber)),d.a.createElement(\"p\",{style:{fontSize:\"13px\"}},\"邮箱: \".concat(e.studentEmail))),okText:\"重新发送协议\",iconType:\"exclamation-circle\",okType:\"primary\",onOk:n.props.resendAgreement.bind(Object(w.default)(n),e.agreementNo),title:\"确认重新发送协议吗？\"})}),Object(x.a)(Object(w.default)(n),\"cancelAgreementModal\",function(e){z.a.confirm({cancelText:\"取消\",centered:!0,content:d.a.createElement(\"div\",null,d.a.createElement(\"p\",{style:{fontSize:\"13px\"}},\"撤销后，此协议将失去法律效力。\")),okText:\"确认撤销\",okType:\"danger\",iconType:\"close-circle\",iconClassName:\"tst\",onOk:n.props.cancelAgreement.bind(Object(w.default)(n),e.agreementNo),title:\"确认撤销此协议？\"})}),Object(x.a)(Object(w.default)(n),\"menu\",function(e){var t=[\"查看详情\",\"撤销\"];\"PENDINGREVIEW\"===e.status.key?t=[\"查看详情\",\"通过审核并发送协议\",\"撤销\"]:\"PENDINGSIGN\"===e.status.key?t=[\"查看详情\",\"重新发送协议\",\"撤销\"]:\"CANCELED\"===e.status.key&&(t=[\"查看详情\"]);var a=function(){L.a.push(\"/agreement-details?agreementNo=\".concat(e.agreementNo))};return d.a.createElement(M.a,null,t.map(function(t,r){return\"查看详情\"===t?d.a.createElement(M.a.Item,{onClick:a,key:\"agreementmenu\".concat(r)},d.a.createElement(\"span\",null,t)):\"通过审核并发送协议\"===t?d.a.createElement(M.a.Item,{onClick:n.reviewAgreementModal.bind(Object(w.default)(n),e),key:\"agreementmenu\".concat(r)},d.a.createElement(\"a\",null,\"通过审核并发送协议\")):\"重新发送协议\"===t?d.a.createElement(M.a.Item,{onClick:n.resendAgreementModal.bind(Object(w.default)(n),e),key:\"agreementmenu\".concat(r)},d.a.createElement(\"a\",null,\"重新发送协议\")):\"撤销\"===t?d.a.createElement(M.a.Item,{onClick:n.cancelAgreementModal.bind(Object(w.default)(n),e),key:\"agreementmenu\".concat(r)},d.a.createElement(\"a\",{style:{color:\"red\"}},\"撤销\")):null}))}),Object(x.a)(Object(w.default)(n),\"getRowKey\",function(e){return e.id}),n}return Object(u.default)(t,e),Object(o.default)(t,[{key:\"render\",value:function(){var e=this,t=this.props.data,n=[{dataIndex:\"agreementNo\",key:\"agreementNo\",title:\"协议ID\",width:\"250px\"},{dataIndex:\"name\",key:\"name\",title:\"协议名称\"},{dataIndex:\"studentName\",key:\"studentName\",title:\"学员姓名\"},{dataIndex:\"status.name\",key:\"status.name\",title:\"状态\",width:\"100px\",render:function(e,t){var n=\"warning\";return\"SIGNED\"===t.status.key?n=\"success\":\"CANCELED\"===t.status.key&&(n=\"default\"),d.a.createElement(m.k,{style:{alignItems:\"center\"}},d.a.createElement(T.a,{status:n}),d.a.createElement(\"div\",{style:{fontSize:\"14px\"}},t.status.name))}},{dataIndex:\"signedAt\",key:\"signedAt\",title:\"签署时间\",render:function(e,t){return t.signedAt?Object(R.format)(t.signedAt,\"YYYY/MM/DD HH:mm\"):\"- -\"}},{dataIndex:\"creator.person.name\",key:\"creator.person.name\",title:\"负责人\"},{dataIndex:\"reviewer.person.name\",key:\"reviewer.person.name\",title:\"审核人\",render:function(e,t){return t.reviewer?t.reviewer.person.name:\"- -\"}},{dataIndex:\"createdAt\",key:\"createdAt\",title:\"生成时间\",render:function(e,t){return t.createdAt?Object(R.format)(t.createdAt,\"YYYY/MM/DD HH:mm\"):\"- -\"}},{dataIndex:\"operating\",key:\"operating\",width:\"120px\",render:function(t,n){return d.a.createElement(N.a,{overlay:e.menu(n)},d.a.createElement(\"span\",{style:{color:\"#6285ff\"},className:\"ant-dropdown-link\"},\"选择操作\",d.a.createElement(I.a,{type:\"down\"})))},title:\"操作\"}];return d.a.createElement(d.a.Fragment,null,d.a.createElement(oe,null,d.a.createElement(\"h1\",null,\"协议管理\"),d.a.createElement(ne,{onRef:this.onRefCreateAgreementPop})),d.a.createElement(ce,null,d.a.createElement(A.a,{rowKey:this.getRowKey,columns:n,dataSource:t,pagination:!1,bordered:!1,locale:{emptyText:\"暂无协议，点击右上角按钮开始生成协议\"},footer:this.props.footer.bind(this,le)})))}}]),t}(d.a.Component),oe=S.c.div.withConfig({displayName:\"AgreementTable__HeaderWrapper\",componentId:\"qxl21l-0\"})([\"display:flex;align-items:center;justify-content:space-between;height:60px;background-color:#fff;h1{margin:0 0 0 32px;font-size:20px;line-height:60px;color:rgba(0,0,0,0.85);}\"]),ce=Object(S.c)(re).withConfig({displayName:\"AgreementTable__ContentWrapper\",componentId:\"qxl21l-1\"})([\"min-width:1136px;margin:24px;background-color:#fff;\"]),le=S.c.div.withConfig({displayName:\"AgreementTable__ContentLoad\",componentId:\"qxl21l-2\"})([\"display:flex;align-items:flex-start;justify-content:center;\"]),ue=n(\"bIp5\");function se(){var e=Object(Q.a)([\"\\n  query listAgreementsWithPagination($input: ListAgreementInputType!) {\\n    listAgreementsWithPagination(input: $input) {\\n      edges {\\n        node {\\n          id\\n          agreementNo\\n          name\\n          studentName\\n          studentEmail\\n          studentPhoneNumber\\n          status {\\n            id\\n            key\\n            name\\n          }\\n          signedAt\\n          creator {\\n            id\\n            person {\\n              id\\n              name\\n            }\\n          }\\n          reviewer {\\n            id\\n            person {\\n              id\\n              name\\n            }\\n          }\\n          reviewedAt\\n          canceledAt\\n          createdAt\\n        }\\n      }\\n      pageInfo {\\n        hasNextPage\\n        startCursor\\n        endCursor\\n      }\\n    }\\n  }\\n\"]);return se=function(){return e},e}var de=U()(se()),fe=function(e){function t(){return Object(i.default)(this,t),Object(c.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(u.default)(t,e),t}(V.d),me=20,pe=function(e){function t(){var e,n;Object(i.default)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(c.default)(this,(e=Object(l.default)(t)).call.apply(e,[this].concat(r))),Object(x.a)(Object(w.default)(n),\"pageInfo\",{hasNextPage:!0,endCursor:\"\",startCursor:\"\"}),Object(x.a)(Object(w.default)(n),\"queryMore\",Object(C.default)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.pageInfo.hasNextPage){e.next=4;break}return e.next=3,n.fetchMore({updateQuery:function(e,t){var n=t.fetchMoreResult;if(!n)return e;var a=e.listAgreementsWithPagination.edges,r=n.listAgreementsWithPagination.edges;return n.listAgreementsWithPagination.edges=[].concat(Object(j.default)(a),Object(j.default)(r)),n},variables:{input:{after:n.pageInfo.endCursor,first:me}}}).then(function(e){return e.data?(n.pageInfo=e.data.listAgreementsWithPagination.pageInfo,n.modifyQueryData(e.data)):null});case 3:return e.abrupt(\"return\");case 4:case\"end\":return e.stop()}},e)}))),Object(x.a)(Object(w.default)(n),\"modifyQueryData\",function(e){return e.listAgreementsWithPagination?e.listAgreementsWithPagination.edges.map(function(e){return e.node}):null}),Object(x.a)(Object(w.default)(n),\"footer\",function(e){return d.a.createElement(\"div\",null,n.pageInfo.hasNextPage?d.a.createElement(e,{onClick:n.queryMore},d.a.createElement(\"a\",{style:{fontSize:12,color:\"#666\",marginRight:\"5px\"}},\"点击加载更多\")):d.a.createElement(\"div\",null))}),Object(x.a)(Object(w.default)(n),\"reviewAgreement\",function(e){return n.client.mutate({mutation:ue.c,variables:{input:{agreementNo:e}},update:function(e,t){var n=t.data.reviewAgreement;y.a.success(\"已成功通过审核并发送协议\");var a=e.readQuery({query:de,variables:{input:{first:me}}});if(a){var r=a.listAgreementsWithPagination.edges.map(function(e){return e.node.id===n.id?Object(h.a)({},e,{node:Object(h.a)({},e.node,{status:n.status,reviewer:n.reviewer,reviewedAt:n.reviewedAt})}):e});e.writeQuery({query:de,variables:{input:{first:me}},data:{listAgreementsWithPagination:Object(h.a)({},a.listAgreementsWithPagination,{edges:r})}})}}})}),Object(x.a)(Object(w.default)(n),\"resendAgreement\",function(e){return n.client.mutate({mutation:ue.b,variables:{input:{agreementNo:e}},update:function(){y.a.success(\"已重新发送协议\")}})}),Object(x.a)(Object(w.default)(n),\"cancelAgreement\",function(e){return n.client.mutate({mutation:ue.a,variables:{input:{agreementNo:e}},update:function(e,t){var n=t.data.reviewAgreement;y.a.success(\"已成功撤销此协议\");var a=e.readQuery({query:de,variables:{input:{first:me}}});if(a){var r=a.listAgreementsWithPagination.edges.map(function(e){return e.node.id===n.id?Object(h.a)({},e,{node:Object(h.a)({},e.node,{status:n.status,canceller:n.canceller,canceledAt:n.canceledAt})}):e});e.writeQuery({query:de,variables:{input:{first:me}},data:{listAgreementsWithPagination:Object(h.a)({},a.listAgreementsWithPagination,{edges:r})}})}}})}),n}return Object(u.default)(t,e),Object(o.default)(t,[{key:\"render\",value:function(){var e=this;return d.a.createElement(fe,{query:de,variables:{input:{first:me}},fetchPolicy:\"network-only\"},function(t){var n=t.loading,a=t.error,r=t.data,i=t.fetchMore,o=t.client;return a?null:r.listAgreementsWithPagination?(e.fetchMore=i,e.client=o,n||(e.pageInfo=r.listAgreementsWithPagination.pageInfo),d.a.createElement(ie,{data:e.modifyQueryData(r),footer:e.footer,reviewAgreement:e.reviewAgreement,resendAgreement:e.resendAgreement,cancelAgreement:e.cancelAgreement})):d.a.createElement(m.h,null,d.a.createElement(g.a,{tip:\"Loading...\",size:\"large\"}))})}}]),t}(d.a.Component),ge=function(e){function t(){return Object(i.default)(this,t),Object(c.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(u.default)(t,e),Object(o.default)(t,[{key:\"render\",value:function(){return d.a.createElement(f.a,{menuName:\"协议管理\",subMenuName:\"协议管理\"},d.a.createElement(m.d,null,d.a.createElement(pe,null)),d.a.createElement(r.a,null))}}]),t}(d.a.Component),he=function(){return d.a.createElement(ge,null)};n.d(t,\"default\",function(){return he})},xAj1:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/agreement-management\",function(){var e=n(\"mKL7\");return{page:e.default||e}}])}},[[\"xAj1\",\"5d41\",\"9da1\",\"ad9d\"]]]);"}