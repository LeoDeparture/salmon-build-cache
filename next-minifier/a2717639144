{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"3df3\"],{P2j4:function(e,t,n){\"use strict\";n.r(t);var a=n(\"q1tI\"),r=n.n(a),i=n(\"ln6h\"),u=n.n(i),l=n(\"O40h\"),c=(n(\"fwXI\"),n(\"CC+v\")),o=n.n(c),s=n(\"0iUn\"),d=n(\"sLSF\"),p=n(\"MI3g\"),f=n(\"a7VT\"),m=n(\"AT/M\"),h=n(\"Tit0\"),b=n(\"vYYK\"),g=n(\"nOHt\"),v=n.n(g),O=n(\"vOnD\"),j=n(\"YyJk\"),E=(n(\"MaXC\"),n(\"4IMT\")),y=n.n(E),w=(n(\"hr7U\"),n(\"9xET\")),C=n.n(w),T=(n(\"cUip\"),n(\"iJl9\")),I=n.n(T),k=n(\"pLtp\"),x=n.n(k),S=(n(\"nTym\"),n(\"qu0K\")),q=n.n(S),L=q.a.Item,M=O.c.div.withConfig({displayName:\"CreatingAccountNormalEmailContent__ContentDiv\",componentId:\"sc-71a1ox-0\"})([\"display:flex;align-items:center;flex-direction:column;justify-content:center;width:50%;height:100vh;margin:0 auto;\"]),N=function(e){function t(){var e,n;Object(s.default)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(i))),Object(b.a)(Object(m.default)(n),\"state\",{disabled:!0,email:\"\",timeOut:!1}),Object(b.a)(Object(m.default)(n),\"componentDidMount\",function(){n.setState({email:v.a.router.query.email})}),Object(b.a)(Object(m.default)(n),\"handleSubmit\",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(){var e=Object(l.default)(u.a.mark(function e(t,a){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}n.setState({disabled:!0}),e.next=19;break;case 4:return n.setState({disabled:!1}),r=v.a.router.query,a.personId=r.personId,e.prev=7,e.next=10,n.props.signupMutationFun(a);case 10:e.sent.data&&v.a.push(\"/login\"),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),n.setState({disabled:!0}),\"The user already exists.\"===e.t0.graphQLErrors[0].message&&o.a.error({title:\"该账号已经被注册\"}),\"an error has occured: invite code may have expired\"===e.t0.message&&o.a.error({title:\"该账号已经被注册\"});case 19:case\"end\":return e.stop()}},e,null,[[7,14]])}));return function(t,n){return e.apply(this,arguments)}}())}),Object(b.a)(Object(m.default)(n),\"handleChange\",function(){window.setTimeout(function(){var e=n.props.form.getFieldsValue(),t=!0;x()(e).forEach(function(n){t=t&&e[n]}),n.setState({disabled:!t})},100)}),Object(b.a)(Object(m.default)(n),\"renderFun\",function(){if(n.state.timeOut)return r.a.createElement(M,null,r.a.createElement(\"p\",null,\"此链接已过期\"));var e=n.props.form.getFieldDecorator;return r.a.createElement(q.a,{onSubmit:n.handleSubmit,style:{width:\"100%\",backgroundColor:\"#fff\"}},r.a.createElement(M,null,r.a.createElement(C.a,null,r.a.createElement(\"h3\",{style:{textAlign:\"center\",marginBottom:30}},\"请设置你的帐号信息\"),r.a.createElement(L,{style:{width:350},label:\"姓名\"},e(\"name\",{rules:[{message:\"请输入姓名!\",required:!0}]})(r.a.createElement(I.a,{placeholder:\"推荐使用真实中文姓名\",onChange:n.handleChange}))),r.a.createElement(L,{style:{width:350},label:\"昵称\"},e(\"nickname\",{rules:[{message:\"请输入昵称!\",required:!0}]})(r.a.createElement(I.a,{placeholder:\"请输入昵称\",onChange:n.handleChange}))),r.a.createElement(L,{style:{width:350},label:\"账号\"},r.a.createElement(I.a,{disabled:!0,placeholder:n.state.email,onChange:n.handleChange})),r.a.createElement(L,{style:{width:350},label:\"密码\"},e(\"password\",{rules:[{message:\"此字段无法为空\",required:!0,whitespace:!0},{message:\"请输入不少于8位字符的密码\",pattern:/^.{8,}$/}]})(r.a.createElement(I.a,{type:\"password\",placeholder:\"请输入不少于8位字符的密码\",onChange:n.handleChange})))),r.a.createElement(L,{labelCol:{span:12}},r.a.createElement(y.a,{style:{marginTop:10,width:350},type:\"primary\",htmlType:\"submit\",disabled:n.state.disabled},\"立即前往职问 MIS 系统\"))))}),n}return Object(h.default)(t,e),Object(d.default)(t,[{key:\"render\",value:function(){return this.renderFun()}}]),t}(r.a.Component),_=q.a.create()(N),Q=n(\"rt45\"),A=n(\"lTCR\"),D=n.n(A),F=n(\"4KRT\");function P(){var e=Object(Q.a)([\"\\n  mutation signup($input: SignupInputType!) {\\n    signup(input: $input) {\\n      id\\n    }\\n  }\\n\"]);return P=function(){return e},e}var R=D()(P()),J=function(e){function t(){return Object(s.default)(this,t),Object(p.default)(this,Object(f.default)(t).apply(this,arguments))}return Object(h.default)(t,e),t}(F.c),$=O.c.div.withConfig({displayName:\"CreatingAccountNormalEmailContainers__ContentDiv\",componentId:\"sc-4ih8tk-0\"})([\"display:flex;align-items:center;justify-content:center;height:100vh;\"]),K=function(e){function t(){var e,n;Object(s.default)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(r))),Object(b.a)(Object(m.default)(n),\"state\",{code:\"\",error:!1,personId:\"\"}),Object(b.a)(Object(m.default)(n),\"componentDidMount\",function(){var e=v.a.router.query;n.setState({code:e.code,personId:e.personId})}),n}return Object(h.default)(t,e),Object(d.default)(t,[{key:\"render\",value:function(){var e=this,t={input:{code:this.state.code,personId:this.state.personId,request:\"INVITE\"}};return r.a.createElement(j.a,{query:j.b,variables:t},function(t){var n=t.loading,a=t.error;return n?null:a?a.graphQLErrors&&a.graphQLErrors[0]&&a.graphQLErrors[0].data&&\"PersonNotExist\"===a.graphQLErrors[0].data.code?(o.a.error({title:\"没有获取到 Person ID\"}),null):a.graphQLErrors&&a.graphQLErrors[0]&&a.graphQLErrors[0].data&&\"CodeNotExist\"===a.graphQLErrors[0].data.code?r.a.createElement($,null,r.a.createElement(\"p\",null,\"此链接已过期\")):null:r.a.createElement(J,{mutation:R},function(t){var n=function(){var n=Object(l.default)(u.a.mark(function n(a){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt(\"return\",t({variables:{input:{code:e.state.code,name:a.name,nickname:a.nickname,password:a.password,personId:a.personId}}}));case 1:case\"end\":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();return r.a.createElement(_,{signupMutationFun:n})})})}}]),t}(r.a.Component),U=function(){return r.a.createElement(K,null)};n.d(t,\"default\",function(){return U})},YyJk:function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return p}),n.d(t,\"a\",function(){return f});var a=n(\"0iUn\"),r=n(\"MI3g\"),i=n(\"a7VT\"),u=n(\"Tit0\"),l=n(\"rt45\"),c=n(\"lTCR\"),o=n.n(c),s=n(\"4KRT\");function d(){var e=Object(l.a)([\"\\n  query getCodeRemainingTime ($input:GetCodeInputType!) {\\n    getCodeRemainingTime(input:$input){\\n      remainingTime\\n    }\\n  }\\n\"]);return d=function(){return e},e}var p=o()(d()),f=function(e){function t(){return Object(a.default)(this,t),Object(r.default)(this,Object(i.default)(t).apply(this,arguments))}return Object(u.default)(t,e),t}(s.d)},\"e/cH\":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/creatingAccountNormal-email\",function(){var e=n(\"P2j4\");return{page:e.default||e}}])}},[[\"e/cH\",\"5d41\",\"9da1\",\"ad9d\"]]]);"}